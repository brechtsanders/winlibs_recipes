#export NAME="Eye of GNOME (eog)"
#export STATUS=
##export URL=http://www.gnome.org/projects/eog
#export URL=https://wiki.gnome.org/Apps/EyeOfGnome
#export BASENAME=eog
#export DESCRIPTION="Eye of GNOME is the GNOME image viewer."
#export CATEGORY=
#export TYPE=application
##export VERSION=2.32.1
##export VERSIONDATE=20101116
##export VERSION=3.0.0
##export VERSIONDATE=20110405
##export VERSION=3.0.1
##export VERSIONDATE=20110427
##export VERSION=3.0.2
##export VERSIONDATE=20110525
##export VERSION=3.1.1
##export VERSIONDATE=20110510
##export VERSION=3.1.2
##export VERSIONDATE=20110615
##export VERSION=3.1.4
##export VERSIONDATE=20110726
##export VERSION=3.1.5
##export VERSIONDATE=20110816
##export VERSION=3.2.0
##export VERSIONDATE=20110927
##export VERSION=3.2.1
##export VERSIONDATE=20111018
##export VERSION=3.2.2
##export VERSIONDATE=20111115
##export VERSION=3.3.2
##export VERSIONDATE=20111122
##export VERSION=3.3.3
##export VERSIONDATE=20120116
##export VERSION=3.3.4
##export VERSIONDATE=20120117
##export VERSION=3.3.5
##export VERSIONDATE=20120207
##export VERSION=3.4.0
##export VERSIONDATE=20120327
##export VERSION=3.4.1
##export VERSIONDATE=20120417
##export VERSION=3.4.2
##export VERSIONDATE=20120610
##export VERSION=3.4.3
##export VERSIONDATE=20120716
##export VERSION=3.5.1
##export VERSIONDATE=20120501
##export VERSION=3.5.2
##export VERSIONDATE=20120626
##export VERSION=3.5.3
##export VERSIONDATE=20120718
##export VERSION=3.5.4
##export VERSIONDATE=20120807
##export VERSION=3.5.90
##export VERSIONDATE=20120824
##export VERSION=3.5.91
##export VERSIONDATE=20120904
##export VERSION=3.5.92
##export VERSIONDATE=20120920
#####src/eog-print-image-setup.c:27:30: fatal error: gtk/gtkunixprint.h: No such file or directory
##export VERSION=3.6.0
##export VERSIONDATE=20120925
##export VERSION=3.6.1
##export VERSIONDATE=20121016
##export VERSION=3.6.2
##export VERSIONDATE=20121113
##export VERSION=3.7.1
##export VERSIONDATE=20121023
##export VERSION=3.7.2
##export VERSIONDATE=20121121
##export VERSION=3.7.4
##export VERSIONDATE=20130115
##export VERSION=3.8.0
##export VERSIONDATE=20130326
##export VERSION=3.8.2
##export VERSIONDATE=20130514
##export VERSION=3.9.1
##export VERSIONDATE=20130618
##export VERSION=3.9.5
##export VERSIONDATE=20130730
##export VERSION=3.10.0
##export VERSIONDATE=20130924
##export VERSION=3.10.1
##export VERSIONDATE=20131016
##export VERSION=3.10.2
##export VERSIONDATE=20131113
##export VERSION=3.11.1
##export VERSIONDATE=20131029
##export VERSION=3.11.2
##export VERSIONDATE=20131119
##export VERSION=3.11.3
##export VERSIONDATE=20131217
##export VERSION=3.11.4
##export VERSIONDATE=20140114
##export VERSION=3.12.0
##export VERSIONDATE=20140325
##export VERSION=3.12.1
##export VERSIONDATE=20140418
##export VERSION=3.12.2
##export VERSIONDATE=20140513
##export VERSION=3.13.1
##export VERSIONDATE=20140429
##export VERSION=3.13.2
##export VERSIONDATE=20140529
##export VERSION=3.13.3
##export VERSIONDATE=20140722
##export VERSION=3.14.0
##export VERSIONDATE=20140923
##export VERSION=3.14.1
##export VERSIONDATE=20141014
##export VERSION=3.14.2
##export VERSIONDATE=20141111
##export VERSION=3.14.3
##export VERSIONDATE=20141120
##export VERSION=3.14.4
##export VERSIONDATE=20150330
##export VERSION=3.14.5
##export VERSIONDATE=20160215
##export VERSION=3.15.1
##export VERSIONDATE=20150203
#####Requested 'gtk+-3.0 >= 3.10.6' but version of GTK+ is 3.8.9
##export VERSION=3.16.0
##export VERSIONDATE=20150324
##export VERSION=3.16.1
##export VERSIONDATE=20150414
##export VERSION=3.16.2
##export VERSIONDATE=20150514
##export VERSION=3.16.3
##export VERSIONDATE=20150817
##export VERSION=3.16.4
##export VERSIONDATE=20160215
##export VERSION=3.16.5
##export VERSIONDATE=20160822
##export VERSION=3.17.1
##export VERSIONDATE=20150526
##export VERSION=3.17.2
##export VERSIONDATE=20150623
##export VERSION=3.17.3
##export VERSIONDATE=20150721
##export VERSION=3.18.0
##export VERSIONDATE=20150928
##export VERSION=3.18.1
##export VERSIONDATE=20151110
##export VERSION=3.18.2
##export VERSIONDATE=20160215
#export VERSION=3.18.3
#export VERSIONDATE=20160822
##export VERSION=3.19.1
##export VERSIONDATE=20151031
##export VERSION=3.19.2
##export VERSIONDATE=20151127
##export VERSION=3.19.3
##export VERSIONDATE=20151214
##export VERSION=3.19.4
##export VERSIONDATE=20160121
##export VERSION=3.20.0
##export VERSIONDATE=20160322
##export VERSION=3.20.1
##export VERSIONDATE=20160412
##export VERSION=3.20.2
##export VERSIONDATE=20160510
##export VERSION=3.20.3
##export VERSIONDATE=20160621
##export VERSION=3.20.4
##export VERSIONDATE=20160822
##export VERSION=3.20.5
##export VERSIONDATE=20161012
##export VERSION=3.23.1
##export VERSIONDATE=20170117
##export VERSION=3.24.0
##export VERSIONDATE=20170321
##export VERSION=3.24.1
##export VERSIONDATE=20170411
##export VERSION=3.25.1
##export VERSIONDATE=20170620
##export VERSION=3.26.0
##export VERSIONDATE=20170912
##export VERSION=3.26.1
##export VERSIONDATE=20171003
##export VERSION=3.26.2
##export VERSIONDATE=20171109
##export VERSION=3.27.1
##export VERSIONDATE=20171114
##export VERSION=3.27.2
##export VERSIONDATE=20171212
##export VERSION=3.27.3
##export VERSIONDATE=20180109
##export VERSION=3.28.0
##export VERSIONDATE=20180313
##export VERSION=3.28.1
##export VERSIONDATE=20180410
##export VERSION=3.28.2
##export VERSIONDATE=20180508
##export VERSION=3.28.3
##export VERSIONDATE=20180724
##export VERSION=3.28.4
##export VERSIONDATE=20180925
##export VERSION=3.31.1
##export VERSIONDATE=20181113
##export VERSION=3.31.2
##export VERSIONDATE=20181211
##export VERSION=3.31.3
##export VERSIONDATE=20190108
##export VERSION=3.31.91
##export VERSIONDATE=20190305
##export VERSION=3.32.0
##export VERSIONDATE=20190312
##export VERSION=3.32.1
##export VERSIONDATE=20190412
##export VERSION=3.32.2
##export VERSIONDATE=20190521
##export VERSION=3.33.1
##export VERSIONDATE=20190521
##export VERSION=3.33.2
##export VERSIONDATE=20190618
##export VERSION=3.33.3
##export VERSIONDATE=20190716
##export VERSION=3.34.0
##export VERSIONDATE=20190910
##export VERSION=3.34.1
##export VERSIONDATE=20191008
##export VERSION=3.34.2
##export VERSIONDATE=20200105
##export VERSION=3.35.1
##export VERSIONDATE=20191013
##export VERSION=3.35.2
##export VERSIONDATE=20200105
##export VERSION=3.35.3
##export VERSIONDATE=20200205
##export VERSION=3.36.0
##export VERSIONDATE=20200308
##export VERSION=3.36.1
##export VERSIONDATE=20200329
##export VERSION=3.36.2
##export VERSIONDATE=20200426
##export VERSION=3.36.3
##export VERSIONDATE=20200705
##export VERSION=3.36.4
##export VERSIONDATE=20201122
##export VERSION=3.36.5
##export VERSIONDATE=20210502
##export VERSION=3.37.1
##export VERSIONDATE=20200426
##export VERSION=3.37.2
##export VERSIONDATE=20200906
##export VERSION=3.38.1
##export VERSIONDATE=20201122
##export VERSION=3.38.2
##export VERSIONDATE=20210214
##export VERSION=3.38.3
##export VERSIONDATE=20210502
#####No package 'libpeas-1.0' found
#####No package 'libpeas-gtk-1.0' found
#####msgfmt: cannot locate ITS rules for ..\data\eog.appdata.xml.in
#export DEPENDENCIES=glib2,gtk3,cairo,qt,libiconv,gnome-desktop,gdk-pixbuf,gconf,gnome-icon-theme,shared-mime-info,libexif,lcms2,dbus-glib,zlib,libjpeg,libopenjpeg,libpng,libtiff,librsvg,libpeas,gnome-doc-utils,nss
#export OPTIONALDEPENDENCIES=
#export BUILDDEPENDENCIES=
#export OPTIONALBUILDDEPENDENCIES=
##export VERSION=3.37.2
##export VERSIONDATE=20200705
#####meson.build:112:0: ERROR: Dependency "libportal" not found, tried pkgconfig and cmake
##export VERSION=3.38.0
##export VERSIONDATE=20200913
##export VERSION=40.0
##export VERSIONDATE=20210321
##export VERSION=40.2
##export VERSIONDATE=20210606
##export VERSION=41.0
##export VERSIONDATE=20210919
##export VERSION=41.1
##export VERSIONDATE=20211205
##export VERSION=41.2
##export VERSIONDATE=20220320
##export VERSION=42.0
##export VERSIONDATE=20220320
#####meson.build:111:0: ERROR: Dependency "libpeas-gtk-1.0" not found, tried pkgconfig and cmake
#wl-showstatus --package-version
##export DEPENDENCIES=glib2,gtk3,cairo,qt,libiconv,gnome-desktop,gdk-pixbuf,gconf,gnome-icon-theme,shared-mime-info,libexif,lcms2,dbus-glib,zlib,libjpeg,libopenjpeg,libpng,libtiff,librsvg,libpeas,gnome-doc-utils,nss,libportal
##export OPTIONALDEPENDENCIES=
##export BUILDDEPENDENCIES=
##export OPTIONALBUILDDEPENDENCIES=
#export LICENSEFILE=COPYING
#export LICENSETYPE=GPL
#export DOWNLOADURL="http://ftp.gnome.org/pub/GNOME/sources/eog/"
#export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
##export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/gnome/sources/$BASENAME/`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/$BASENAME-$VERSION.tar.bz2
#export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/gnome/sources/$BASENAME/$(echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/')/$BASENAME-$VERSION.tar.xz
##export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/gnome/sources/$BASENAME/$(echo $VERSION|sed 's/^\([0-9]*\)\..*$/\1/')/$BASENAME-$VERSION.tar.xz
#wl-showstatus download
#wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
#wl-wait4deps
##tar xj --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.bz2
#tar xJ --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.xz
#cd $BASENAME-$VERSION
## fix missing gtk/gtkunixprint.h in src/eog-print-image-setup.c
#mkdir -p gtk
#touch gtk/gtkunixprint.h
## remove gio-unix and gtk+-unix-print dependancy
#mv configure configure.bak
#sed -e "s/gio-unix/gio-windows/g; s/gtk+-unix-print-3\.0.*GTK_PRINT_REQUIRED//g" configure.bak > configure
## fix problem detecting GNU gettext tools on 64-bit
#if ( echo $RUNPLATFORM | grep -q x86_64 ); then
# mv configure configure.bak
# sed -e "s/as_fn_error\(.*GNU gettext tools not found; required for intltool\)/as_echo\1/" configure.bak > configure
#fi
#wl-showstatus configure &&
# PATH=$PATH:$PERLDIR/../c/bin INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM LDFLAGS="-Wl,-no-undefined" &&
# wl-showstatus build-install &&
# make install-strip &&
#    echo OK
## wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && rm -rf $BASENAME-$VERSION



export NAME="Eye of GNOME (eog)"
export STATUS=
#export URL=http://www.gnome.org/projects/eog
export URL=https://wiki.gnome.org/Apps/EyeOfGnome
export BASENAME=eog
export DESCRIPTION="Eye of GNOME is the GNOME image viewer."
export CATEGORY=
export TYPE=application
#export VERSION=41.2
#export VERSIONDATE=20220320
#export VERSION=42.0
#export VERSIONDATE=20220320
#export VERSION=42.1
#export VERSIONDATE=20220424
#export VERSION=42.2
#export VERSIONDATE=20220529
#export VERSION=42.3
#export VERSIONDATE=20220807
#export VERSION=43.0
#export VERSIONDATE=20220918
#export VERSION=43.1
#export VERSIONDATE=20221023
#export VERSION=43.2
#export VERSIONDATE=20230108
#export VERSION=43.3
#export VERSIONDATE=20230702
#export VERSION=44.0
#export VERSIONDATE=20230319
#export VERSION=44.1
#export VERSIONDATE=20230423
#export VERSION=44.2
#export VERSIONDATE=20230528
#export VERSION=44.3
#export VERSIONDATE=20230702
#export VERSION=45.0
#export VERSIONDATE=20230918
#export VERSION=45.1
#export VERSIONDATE=20231022
#export VERSION=45.2
#export VERSIONDATE=20240107
#export VERSION=45.3
#export VERSIONDATE=20240317
#export VERSION=45.4
#export VERSIONDATE=20240802
export VERSION=47.0
export VERSIONDATE=20240908
wl-showstatus --package-version
export DEPENDENCIES=gettext,glib2,gtk3,cairo,qt,libiconv,gnome-desktop,gdk-pixbuf,gconf,gnome-icon-theme,shared-mime-info,libexif,lcms2,dbus-glib,zlib,libjpeg,libopenjpeg,libpng,libtiff,librsvg,libpeas,gnome-doc-utils,nss,exempi,gobject-introspection
export OPTIONALDEPENDENCIES=libportal
export BUILDDEPENDENCIES=
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=COPYING
export LICENSETYPE=GPL
#export DOWNLOADURL="http://ftp.gnome.org/pub/GNOME/sources/eog/"
export DOWNLOADURL="https://download.gnome.org/sources/eog/"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
#export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/gnome/sources/$BASENAME/`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/$BASENAME-$VERSION.tar.bz2
#export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/gnome/sources/$BASENAME/$(echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/')/$BASENAME-$VERSION.tar.xz
#export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/gnome/sources/$BASENAME/$(echo $VERSION|sed 's/^\([0-9]*\)\..*$/\1/')/$BASENAME-$VERSION.tar.xz
export DOWNLOADSOURCEURL=https://download.gnome.org/sources/eog/$(echo $VERSION|sed 's/^\([0-9]*\)\..*$/\1/')/$BASENAME-$VERSION.tar.xz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
#tar xj --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.bz2
tar xJ --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.xz
cd $BASENAME-$VERSION
#export BUILDDEPENDENCIES=meson,ninja
#export OPTIONALBUILDDEPENDENCIES=
#-Dc_args=$CFLAGS -Dcpp_args=$CXXFLAGS -Dc_link_args=$LDFLAGS
# fix missing gio/gdesktopappinfo.h
mkdir -p winfix/gio
cat > winfix/gio/gdesktopappinfo.h << EOF
#include <gio/gio.h>
typedef void GDesktopAppInfo;
#define g_desktop_app_info_new(n) NULL
EOF
# fix MSVC issue
mkdir -p winfix
cp -rf $PYDIR/lib/distutils winfix/
patch -ulbf winfix/distutils/cygwinccompiler.py << EOF
@@ -85,3 +85,3 @@
         else:
-            raise ValueError("Unknown MS Compiler version %s " % msc_ver)
+            return None

EOF
# fix missing gio-unix
sed -i.bak -e "s/gio-unix-/gio-/" meson.build
mkdir -p build_both &&
 wl-showstatus configure &&
 #PKG_CONFIG= PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library both -Dprofile=default -Dlibexif=true -Dcms=true -Dlibjpeg=true -Dlibrsvg=false -Dlibportal=false -Dintrospection=true -Dgtk_doc=false -Dinstalled_tests=false -Dc_args="-I$(pwd)/winfix" -Dc_link_args="-Wl,--export-all-symbols" . build_both &&
 #PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library both -Dprofile=default -Dlibexif=true -Dcms=true -Dlibjpeg=true -Dlibrsvg=false -Dlibportal=false -Dintrospection=true -Dgtk_doc=false -Dinstalled_tests=false -Dc_args="-I$(pwd)/winfix" -Dc_link_args="-Wl,--export-all-symbols" . build_both &&
 PYTHONPATH=$MINGWPREFIX/python/Lib/site-packages:$MINGWPREFIX/lib${PYTHONPATH:+:$PYTHONPATH} $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library both -Dprofile=default -Dlibexif=true -Dcms=true -Dlibjpeg=true -Dlibrsvg=false -Dlibportal=false -Dintrospection=true -Dgtk_doc=false -Dinstalled_tests=false -Dc_args="-I$(pwd)/winfix" -Dc_link_args="-Wl,--export-all-symbols" . build_both &&
 #-Dlibrsvg=true
 # fix slash/backslash path issue when calling Python from Ninja
 sed -i.bak -e "s/join_paths/os.path.join/g; /COMMAND =.*python\.exe/ s?\"/\([a-zA-Z]\)/?\"\1:/?; /COMMAND =.*python\.exe/ s?/?\\\\?g" build_*/build.ninja &&
 ## fix Python path issues in meson_exe
 #sed -i.bak -e "s?$PYDIR?$(echo $PYDIR|sed -e "s?^/\([a-zA-Z]\)/?\1:/?")?" build_both/meson-private/meson_exe_python.exe_*.dat &&
 wl-showstatus build-install &&
 #PKG_CONFIG= PATH=$PYDIR:$PATH PYTHONPATH=$PWD/winfix:$MINGWPREFIX/python/Lib/site-packages:$MINGWPREFIX/lib${PYTHONPATH:+:$PYTHONPATH} GETTEXTDATADIR=$MINGWPREFIX/share/gettext ninja -Cbuild_both install &&
 PATH=$PYDIR:$PATH PYTHONPATH=$PWD/winfix:$MINGWPREFIX/python/Lib/site-packages:$MINGWPREFIX/lib${PYTHONPATH:+:$PYTHONPATH} GETTEXTDATADIR=$MINGWPREFIX/share/gettext ninja -Cbuild_both install &&
 cp -u $INSTALLPREFIX/lib/eog/*.dll $INSTALLPREFIX/bin/ &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && rm -rf $BASENAME-$VERSION
####glib-compile-schemas.exe $MINGWPREFIX/share/glib-2.0/schemas
####GSETTINGS_SCHEMA_DIR=$MINGWPREFIX/share/glib-2.0/schemas eog
####XDG_DATA_DIRS=$MINGWPREFIX/share eog
####TO DO: fix error: (eog.exe:17976): GLib-GIO-ERROR **: 14:38:52.013: Settings schema 'org.gnome.eog.plugins' is not installed



