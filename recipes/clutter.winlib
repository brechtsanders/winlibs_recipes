export NAME="Clutter"
export STATUS=
export URL=http://www.clutter-project.org/
export BASENAME=clutter
export DESCRIPTION="Clutter is an open source (LGPL 2.1) software library for creating fast, compelling, portable, and dynamic graphical user interfaces."
export CATEGORY=gui
export TYPE=library
#export VERSION=1.5.8
#export VERSIONDATE=20101129
#export VERSION=1.5.10
#export VERSIONDATE=20101218
#export VERSION=1.5.12
#export VERSIONDATE=20110115
#export VERSION=1.5.14
#export VERSIONDATE=20110124
#export VERSION=1.6.0
#export VERSIONDATE=20110202
#export VERSION=1.6.2
#export VERSIONDATE=20110207
#export VERSION=1.6.4
#export VERSIONDATE=20110214
#export VERSION=1.6.6
#export VERSIONDATE=20110221
#export VERSION=1.6.8
#export VERSIONDATE=20110307
#export VERSION=1.6.10
#export VERSIONDATE=20110321
#export VERSION=1.6.12
#export VERSIONDATE=20110405
#export VERSION=1.6.14
#export VERSIONDATE=20110406
#export VERSION=1.6.16
#export VERSIONDATE=20110416
#export VERSION=1.6.18
#export VERSIONDATE=20110914
#export VERSION=1.6.20
#export VERSIONDATE=20110915
##export DEPENDENCIES=atk,pango,cairo,glib2,gettext,libjson-glib,libx11
#export DEPENDENCIES=atk,pango,cairo,glib2,gettext,libjson-glib,libx11,freeglut
#export VERSION=1.7.2
#export VERSIONDATE=20110614
#export VERSION=1.7.4
#export VERSIONDATE=20110712
#export VERSION=1.7.6
#export VERSIONDATE=20110726
#export VERSION=1.7.10
#export VERSIONDATE=20110816
#export VERSION=1.7.12
#export VERSIONDATE=20110830
#export VERSION=1.7.14
#export VERSIONDATE=20110906
#export VERSION=1.8.0
#export VERSIONDATE=20110920
#export VERSION=1.8.2
#export VERSIONDATE=20111017
#export VERSION=1.8.4
#export VERSIONDATE=20120130
#export VERSION=1.9.2
#export VERSIONDATE=20111122
#export VERSION=1.9.4
#export VERSIONDATE=20120117
#export VERSION=1.9.6
#export VERSIONDATE=20120119
#export VERSION=1.9.8
#export VERSIONDATE=20120124
#export VERSION=1.9.10
#export VERSIONDATE=20120207
#export VERSION=1.9.12
#export VERSIONDATE=20120224
#export VERSION=1.9.14
#export VERSIONDATE=20120306
#export VERSION=1.9.16
#export VERSIONDATE=20120319
#export VERSION=1.10.0
#export VERSIONDATE=20120322
####cltutter/gdk/clutter-backend-gdk.c:30:23: fatal error: sys/ioctl.h: No such file or directory
#export VERSION=1.10.2
#export VERSIONDATE=20120417
#export VERSION=1.10.4
#export VERSIONDATE=20120501
#export VERSION=1.10.6
#export VERSIONDATE=20120529
#export VERSION=1.10.8
#export VERSIONDATE=20120619
#export VERSION=1.11.2
#export VERSIONDATE=20120501
#export VERSION=1.11.4
#export VERSIONDATE=20120606
#export VERSION=1.11.6
#export VERSIONDATE=20120626
#export VERSION=1.11.8
#export VERSIONDATE=20120717
#export VERSION=1.11.10
#export VERSIONDATE=20120807
#export VERSION=1.11.12
#export VERSIONDATE=20120824
#export VERSION=1.11.14
#export VERSIONDATE=20120904
#export VERSION=1.11.16
#export VERSIONDATE=20120918
####Requested 'atk >= 2.5.3' but version of Atk is 2.4.0
#export VERSION=1.12.0
#export VERSIONDATE=20120925
#export VERSION=1.12.2
#export VERSIONDATE=20121017
#export VERSION=1.13.2
#export VERSIONDATE=20121218
#export VERSION=1.13.4
#export VERSIONDATE=20130118
#export VERSION=1.13.6
#export VERSIONDATE=20130221
#export VERSION=1.13.8
#export VERSIONDATE=20130305
#export VERSION=1.13.10
#export VERSIONDATE=20130319
#export VERSION=1.14.0
#export VERSIONDATE=20130326
#export VERSION=1.14.2
#export VERSIONDATE=20130418
#export VERSION=1.14.4
#export VERSIONDATE=20130515
#export VERSION=1.14.6
#export VERSIONDATE=20131121
#export VERSION=1.15.2
#export VERSIONDATE=20130710
#export VERSION=1.16.0
#export VERSIONDATE=20130924
#export VERSION=1.16.2
#export VERSIONDATE=20131119
#export VERSION=1.16.4
#export VERSIONDATE=20140125
#export VERSION=1.17.2
#export VERSIONDATE=20140123
#export VERSION=1.17.4
#export VERSIONDATE=20140219
#export VERSION=1.17.6
#export VERSIONDATE=20140304
####clutter/clutter-test-utils.c:20:32: error: conflicting types for '__p__environ'
#export VERSION=1.18.0
#export VERSIONDATE=20140318
####Requested 'cogl-1.0 >= 1.17.3' but version of Cogl is 1.16.2
####No package 'cogl-path-1.0' found
#export VERSION=1.18.2
#export VERSIONDATE=20140418
#export VERSION=1.18.4
#export VERSIONDATE=20140813
#export VERSION=1.19.2
#export VERSIONDATE=20140529
#export VERSION=1.19.4
#export VERSIONDATE=20140626
#export VERSION=1.19.6
#export VERSIONDATE=20140724
#export VERSION=1.19.8
#export VERSIONDATE=20140822
#export VERSION=1.19.10
#export VERSIONDATE=20140917
#export VERSION=1.20.0
#export VERSIONDATE=20140922
#export VERSION=1.20.2
#export VERSIONDATE=20150424
#export VERSION=1.21.2
#export VERSIONDATE=20141216
#export VERSION=1.21.4
#export VERSIONDATE=20150122
#export VERSION=1.21.6
#export VERSIONDATE=20150304
#export VERSION=1.21.8
#export VERSIONDATE=20150316
#export VERSION=1.22.0
#export VERSIONDATE=20150323
#export VERSION=1.22.2
#export VERSIONDATE=20150512
#export VERSION=1.22.4
#export VERSIONDATE=20150512
#export VERSION=1.23.2
#export VERSIONDATE=20150619
#export VERSION=1.23.4
#export VERSIONDATE=20150723
#export VERSION=1.23.6
#export VERSIONDATE=20150822
#export VERSION=1.24.0
#export VERSIONDATE=20150915
#export VERSION=1.24.2
#export VERSIONDATE=20151013
#export VERSION=1.25.2
#export VERSIONDATE=20151218
#export VERSION=1.25.4
#export VERSIONDATE=20160122
#export VERSION=1.25.6
#export VERSIONDATE=20160219
#export VERSION=1.26.0
#export VERSIONDATE=20160321
#export VERSION=1.26.2
#export VERSIONDATE=20170512
export VERSION=1.26.4
export VERSIONDATE=20200310
####clutter/egl/clutter-backend-eglnative.h:31:27: fatal error: cogl/cogl-egl.h: No such file or directory
wl-showstatus --package-version
export DEPENDENCIES=cogl,atk,pango,cairo,glib2,gettext,libjson-glib,libx11,freeglut
export OPTIONALDEPENDENCIES=
export BUILDDEPENDENCIES=
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=COPYING
export LICENSETYPE=LGPL
export DOWNLOADURL="http://ftp.gnome.org/pub/GNOME/sources/clutter/"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
#export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/gnome/sources/$BASENAME/`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/$BASENAME-$VERSION.tar.bz2
export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/gnome/sources/$BASENAME/`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/$BASENAME-$VERSION.tar.xz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
#tar xj --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.bz2
tar xJ --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.xz
cd $BASENAME-$VERSION
## fix missing files
#mkdir -p sys
#touch sys/shm.h sys/ipc.h
## fix missing index in clutter/clutter-actor.c (version >= 1.9.10)
#patch -ulbf clutter/clutter-actor.c << EOF
#--- clutter/clutter-actor.c.bak 2012-02-06 13:13:16 +0100
#+++ clutter/clutter-actor.c     2012-02-07 23:44:40 +0100
#@@ -9909,3 +9909,3 @@
#     }
#-  else if (index < 0)
#+  else if (index_ < 0)
#     {
#EOF
## fix use of deprecated clutter-shader.h in clutter/win32/clutter-backend-win32.c (version >= 1.12.0)
#patch -ulbf clutter/win32/clutter-backend-win32.c << EOF
#--- clutter/win32/clutter-backend-win32.c  2012-08-06 16:38:06 +0200
#+++ clutter/win32/clutter-backend-win32.c  2012-09-26 09:30:10 +0200
#@@ -39,3 +39,3 @@
#
#-#include "clutter-shader.h"
#+#include "../deprecated/clutter-shader.h"
#
#EOF
# fix missing extern for exported variables in clutter/clutter-version.h.in (version >= 1.26.2)
patch -ulbf clutter/clutter-version.h.in << EOF
@@ -306,7 +306,7 @@
 #   define CLUTTER_VAR extern
 #  endif
 # else
-#  define CLUTTER_VAR __declspec(dllimport)
+#  define CLUTTER_VAR extern __declspec(dllimport)
 # endif
 #else
 # define CLUTTER_VAR _CLUTTER_EXTERN
EOF
# skip making tests/conform on 64-bit
cat > tests/conform/Makefile.in << EOF
clean:
all:
install:
install-strip:
EOF
# skip making tests on 64-bit (version >= 1.10.2)
cat > tests/Makefile.in << EOF
clean:
all:
install:
install-strip:
EOF
## fix "error: Required GLX library not found" in configure
#patch -ulbf configure << EOF
#--- configure  2010-11-29 14:46:34 +0100
#+++ configure  2010-11-29 21:15:36 +0100
#@@ -12064,3 +12064,3 @@
# else
#-  as_fn_error \$? "Required GLX library not found" "\$LINENO" 5
#+  HAVE_LIBGLX=yes
# fi
#EOF
wl-showstatus configure &&
 #./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --with-flavour=win32 --with-imagebackend=internal --with-x=no &&
 #./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --with-flavour=win32 --with-imagebackend=internal --with-x &&
 #./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --with-flavour=win32 --enable-introspection=no --with-imagebackend=internal --with-x &&
 #./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --with-flavour=win32 --enable-debug=no --enable-introspection=no --with-imagebackend=internal --with-x &&
 #./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --with-flavour=win32 --enable-debug=no --enable-introspection=no --with-imagebackend=internal --enable-win32-backend=yes --enable-gdk-backend=no --without-x &&
 #./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --with-flavour=win32 --enable-debug=no --enable-introspection=no --with-imagebackend=internal --enable-win32-backend=yes --enable-gdk-backend=no --with-x &&
 #./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --with-flavour=win32 --enable-debug=no --enable-introspection=no --with-imagebackend=internal --enable-win32-backend=yes --enable-gdk-backend=no --with-x --enable-deprecated=yes &&
 #./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --with-flavour=win32 --enable-debug=no --enable-introspection=no --with-imagebackend=internal --enable-win32-backend=yes --enable-gdk-backend=no --enable-x11-backend=no --without-x --enable-deprecated=yes &&
 #./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --with-flavour=win32 --enable-debug=no --enable-introspection=no --with-imagebackend=internal --enable-win32-backend=yes --enable-gdk-backend=no --enable-x11-backend=no --enable-egl-backend=no --without-x --enable-deprecated=yes &&
 ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --with-flavour=win32 --enable-debug=no --enable-introspection=no --with-imagebackend=internal --enable-win32-backend=yes --enable-gdk-backend=no --enable-x11-backend=no --enable-egl-backend=no --without-x --enable-deprecated=yes CFLAGS="-fcommon $(if ${CC:-gcc} --help -v 2>/dev/null|grep -q "\-Wincompatible-pointer-types" || ${CC:-gcc} --version|grep -q "^clang"; then echo "-Wno-incompatible-pointer-types"; fi)" &&
 wl-showstatus build-install &&
 #make install-strip &&
 PATH=$PYDIR:$PATH make install-strip &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION



