export NAME="XZ Utils"
export STATUS=
export URL=http://tukaani.org/xz/
export BASENAME=xz
export DESCRIPTION="XZ Utils is free general-purpose data compression software with high compression ratio. XZ Utils were written for POSIX-like systems (GNU/Linux, *BSDs, etc.), but also work on some not-so-POSIX systems like Windows. XZ Utils are the successor to LZMA Utils."
export CATEGORY=compression
export TYPE=library
#export VERSION=4.999.9beta
#export VERSION=5.0.0
#export VERSIONDATE=20101025
#export VERSION=5.0.1
#export VERSIONDATE=20110202
#export VERSION=5.0.2
#export VERSIONDATE=20110401
#export VERSION=5.0.3
#export VERSIONDATE=20110522
#export VERSION=5.0.4
#export VERSIONDATE=20120623
#export VERSION=5.0.5
#export VERSIONDATE=20120701
#export VERSION=5.0.6
#export VERSIONDATE=20140915
#export VERSION=5.0.7
#export VERSIONDATE=20140921
#export VERSION=5.2.0
#export VERSIONDATE=20141222
#export VERSION=5.2.1
#export VERSIONDATE=20150227
#export VERSION=5.2.2
#export VERSIONDATE=20150929
#export VERSION=5.2.3
#export VERSIONDATE=20170101
#export VERSION=5.2.4
#export VERSIONDATE=20180430
#export VERSION=5.2.5
#export VERSIONDATE=20200318
#export VERSION=5.2.6
#export VERSIONDATE=20200813
#export VERSION=5.2.7
#export VERSIONDATE=20221001
#export VERSION=5.2.8
#export VERSIONDATE=20221114
#export VERSION=5.2.9
#export VERSIONDATE=20221201
#export VERSION=5.2.10
#export VERSIONDATE=20221214
export VERSION=5.4.0
export VERSIONDATE=20221214
wl-showstatus --package-version
export DEPENDANCIES=libiconv,pthreads,liblzmadec
export OPTIONALDEPENDANCIES=gettext
export BUILDDEPENDANCIES=
export LICENSEFILE=COPYING
export LICENSETYPE="Public Domain,LGPL,GPL"
export DOWNLOADURL="http://tukaani.org/xz/ xz-"
#export DOWNLOADURL="https://sourceforge.net/projects/lzmautils/files/ xz-"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
export DOWNLOADSOURCEURL=http://tukaani.org/xz/$BASENAME-$VERSION.tar.bz2
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
tar xfj $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.bz2
cd $BASENAME-$VERSION
# fix configure (version >= 5.2.7)
patch -ulbf configure << EOF
@@ -17441,3 +17441,3 @@
 _ACEOF
-if (eval "\$ac_cpp conftest.\$ac_ext") 2>&5 |
+if (false) 2>&5 |
   \$EGREP "Extensible Linking Format" >/dev/null 2>&1
EOF
wl-showstatus configure &&
 ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM &&
 wl-showstatus build-install &&
 ( grep -q "#define PACKAGE_NAME" config.h || grep "ASSUME_RAM\|PACKAGE\|PACKAGE_URL\|PACKAGE_BUGREPORT" dos/config.h >> config.h ) &&
 echo "#undef HAVE_OPTRESET" >> config.h &&
 make install-strip &&
 #make check &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION
####xz --version



