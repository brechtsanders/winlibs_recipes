export NAME="SCIP"
export STATUS=
export URL=https://scipopt.org/
export BASENAME=scip
export DESCRIPTION="SCIP is a framework for Constraint Integer Programming oriented towards the needs of mathematical programming experts who want to have total control of the solution process and access detailed information down to the guts of the solver. SCIP can also be used as a pure MIP and MINLP solver or as a framework for branch-cut-and-price."
export CATEGORY=math
export TYPE=library
#export VERSION=7.0.3
#export VERSIONDATE=20210906
export VERSION=master
export VERSIONDATE=20210910
#export VERSION=8.0.0
#export VERSIONDATE=20220322
#export VERSION=8.0.1
#export VERSIONDATE=20220721
wl-showstatus --package-version
export DEPENDANCIES=zlib,readline,gmp,papilo,zimpl,ipopt,zimpl
export OPTIONALDEPENDANCIES=
export BUILDDEPENDANCIES=cmake,ninja
export LICENSEFILE=COPYING
export LICENSETYPE=
#export DOWNLOADURL="https://scipopt.org/ download.php?fname=scip-"
#export DOWNLOADURL="https://github.com/scipopt/scip/releases"
export DOWNLOADURL="https://github.com/scipopt/scip/tags"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
#export DOWNLOADSOURCEURL=https://scipopt.org/download.php?fname=scip-$VERSION.tgz
#export DOWNLOADSOURCEURL=https://github.com/scipopt/scip/archive/refs/heads/$VERSION.tar.gz
export DOWNLOADSOURCEURL=https://github.com/scipopt/scip/archive/refs/tags/v$(echo $VERSION|sed -e "s/\.//g").tar.gz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
wl-showstatus extract
#tar xfz $TARBALLDIR/$BASENAME/$VERSION.tar.gz
tar xfz $TARBALLDIR/$BASENAME/v$(echo $VERSION|sed -e "s/\.//g").tar.gz
cd $BASENAME-$VERSION
# fix detection of Ipopt
sed -i.bak -e "s/\(NOT \)WIN32/\1MSVC/" cmake/Modules/FindIPOPT.cmake 
mkdir -p build_static build_shared &&
 wl-showstatus configure &&
 cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=OFF -DSHARED:BOOL=OFF -DSTATIC_GMP:BOOL=ON -DBUILD_TESTING:BOOL=OFF -DPKG_CONFIG_EXECUTABLE:FILEPATH=$(which pkg-config.exe) -S. -Bbuild_static &&
 wl-showstatus configure &&
 cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=ON -DSHARED:BOOL=ON -DSTATIC_GMP:BOOL=OFF -DBUILD_TESTING:BOOL=OFF -DPKG_CONFIG_EXECUTABLE:FILEPATH=$(which pkg-config.exe) -S. -Bbuild_shared &&
 wl-showstatus build-install &&
 ninja -Cbuild_static install/strip &&
 wl-showstatus build-install &&
 ninja -Cbuild_shared install/strip &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION



