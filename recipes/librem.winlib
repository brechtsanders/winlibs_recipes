export NAME="Librem"
export STATUS=
export URL=http://creytiv.com/rem.html
#export URL=https://github.com/creytiv/rem
export BASENAME=librem
export DESCRIPTION="Librem is a portable and generic library for real-time audio and video processing."
export CATEGORY=audio,video,dataprocessing
export TYPE=library
#export VERSION=0.5.0
#export VERSIONDATE=20170215
#export VERSION=0.5.1
#export VERSIONDATE=20170408
#export VERSION=0.5.2
#export VERSIONDATE=20170923
#export VERSION=0.5.3
#export VERSIONDATE=20180421
export VERSION=0.6.0
export VERSIONDATE=20181124
wl-showstatus --package-version
export DEPENDANCIES=libre
export OPTIONALDEPENDANCIES=
export BUILDDEPENDANCIES=pexports
export LICENSEFILE=docs/COPYING
export LICENSETYPE=BSD
#export DOWNLOADURL="http://creytiv.com/pub/ rem-"
export DOWNLOADURL="https://github.com/creytiv/rem/releases/ rem-"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
#export DOWNLOADSOURCEURL=http://creytiv.com/pub/rem-$VERSION.tar.gz
export DOWNLOADSOURCEURL=https://github.com/creytiv/rem/releases/download/v$VERSION/rem-$VERSION.tar.gz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
wl-showstatus extract
tar xfz $TARBALLDIR/$BASENAME/rem-$VERSION.tar.gz
cd rem-$VERSION
wl-showstatus build-install &&
 #make install CC="gcc -I$MINGWPREFIX/include/re -I$(pwd)/include" AR=ar RANLIB=ranlib OS=win32 CROSS_COMPILE= LIBRE_MK=$MINGWPREFIX/share/re/re.mk LIBS="-lre" PREFIX=$INSTALLPREFIX &&
 make install CC="gcc -I$MINGWPREFIX/include/re -I$(pwd)/include" AR=ar RANLIB=ranlib OS=win32 CROSS_COMPILE= LIBRE_MK=$MINGWPREFIX/share/re/re.mk LIBS="-Wl,--as-needed -lre -lws2_32" PREFIX=$INSTALLPREFIX &&
 mkdir -p $INSTALLPREFIX/bin &&
 mv -f $INSTALLPREFIX/lib/*.dll $INSTALLPREFIX/bin/ &&
 pexports.exe $INSTALLPREFIX/bin/librem.dll > librem.def &&
 dlltool -D $INSTALLPREFIX/bin/librem.dll -d librem.def -l $INSTALLPREFIX/lib/librem.dll.a &&
 strip $INSTALLPREFIX/bin/*.dll &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf rem-$VERSION



