#export NAME="gst-plugins-bad"
#export STATUS=
#export URL=http://www.gnome.org/projects/gst-plugins-bad
#export BASENAME=gst-plugins-bad
#export DESCRIPTION="GStreamer Bad Plug-ins is a set of plug-ins that aren't up to par compared to the rest. They might be close to being good quality, but they're missing something - be it a good code review, some documentation, a set of tests, a real live maintainer, or some actual wide use."
#export CATEGORY=audio,video
#export TYPE=library
##export VERSION=1.0.1
##export VERSIONDATE=20121008
##export VERSION=1.0.2
##export VERSIONDATE=20121025
##export VERSION=1.0.3
##export VERSIONDATE=20121121
##export VERSION=1.0.4
##export VERSIONDATE=20121219
##export VERSION=1.0.5
##export VERSIONDATE=20130108
##export VERSION=1.0.6
##export VERSIONDATE=20130322
##export VERSION=1.0.7
##export VERSIONDATE=20130426
##export VERSION=1.0.8
##export VERSIONDATE=20130715
##export VERSION=1.0.9
##export VERSIONDATE=20130731
##export VERSION=1.0.10
##export VERSIONDATE=20130829
##export VERSION=1.1.1
##export VERSIONDATE=20130606
##export VERSION=1.1.2
##export VERSIONDATE=20130712
##export VERSION=1.1.3
##export VERSIONDATE=20130729
##export VERSION=1.1.4
##export VERSIONDATE=20130828
##export VERSION=1.2.0
##export VERSIONDATE=20130924
##export VERSION=1.2.1
##export VERSIONDATE=20131110
##export VERSION=1.2.2
##export VERSIONDATE=20131228
##export VERSION=1.2.3
##export VERSIONDATE=20140209
##export VERSION=1.2.4
##export VERSIONDATE=20140418
##export VERSION=1.3.1
##export VERSIONDATE=20140504
##export VERSION=1.3.2
##export VERSIONDATE=20140521
##export VERSION=1.3.3
##export VERSIONDATE=20140623
##export VERSION=1.4.0
##export VERSIONDATE=20140721
##export VERSION=1.4.1
##export VERSIONDATE=20140828
##export VERSION=1.4.3
##export VERSIONDATE=20140924
##export VERSION=1.4.4
##export VERSIONDATE=20141106
##export VERSION=1.4.5
##export VERSIONDATE=20141220
##export VERSION=1.5.1
##export VERSIONDATE=20150606
#####ext/dtls/gstdtlscertificate.c:175:3: error: unknown type name 'gnutls_x509_dn'
##export VERSION=1.5.2
##export VERSIONDATE=20150625
##export VERSION=1.6.0
##export VERSIONDATE=20150926
#####ext/gtk/gtkgstglwidget.c:303: undefined reference to `glClearColor@16'
#####ext/gtk/gtkgstglwidget.c:304: undefined reference to `glClear@4'
#####ext/gtk/gstplugin.c:38: undefined reference to `gst_gtk_gl_sink_get_type'
##export VERSION=1.6.1
##export VERSIONDATE=20151101
##export VERSION=1.6.2
##export VERSIONDATE=20151215
##export VERSION=1.6.3
##export VERSIONDATE=20160120
##export VERSION=1.6.4
##export VERSIONDATE=20160415
##export VERSION=1.7.1
##export VERSIONDATE=20151225
##export VERSION=1.7.2
##export VERSIONDATE=20160220
#####ext/openexr/gstopenexrdec.cpp:36:25: error: reference to 'IStream' is ambiguous
##### class MemIStream:public IStream
#####/include/objidl.h:478:1: note: candidates are: struct IStream
##### DECLARE_INTERFACE_(IStream,ISequentialStream)
#####In file included from gstopenexrdec.cpp:31:0:
#####/include/OpenEXR/ImfIO.h:58:18: note: class Imf_2_0::IStream
##### class IMF_EXPORT IStream
##export VERSION=1.8.0
##export VERSIONDATE=20160324
##export VERSION=1.8.1
##export VERSIONDATE=20160420
##export VERSION=1.8.2
##export VERSIONDATE=20160609
##export VERSION=1.8.3
##export VERSIONDATE=20160819
##export VERSION=1.9.1
##export VERSIONDATE=20160706
#####tests/examples/gl/gtk/3dvideo/3dvideo-main.o:main.cpp:(.text+0x6e6): undefined reference to `XInitThreads'
##export VERSION=1.9.2
##export VERSIONDATE=201609011
##export VERSION=1.9.90
##export VERSIONDATE=20160930
##export VERSION=1.10.0
##export VERSIONDATE=20161102
##export VERSION=1.10.1
##export VERSIONDATE=20161118
##export VERSION=1.10.2
##export VERSIONDATE=20161130
##export VERSION=1.10.3
##export VERSIONDATE=20170131
##export VERSION=1.10.4
##export VERSIONDATE=20170224
##export VERSION=1.10.5
##export VERSIONDATE=20170615
#####sys/acmenc/acmenc.c:176:42: error: 'ACM_METRIC_MAX_SIZE_FORMAT' undeclared (first use in this function)
##export VERSION=1.11.1
##export VERSIONDATE=20170113
##export VERSION=1.11.2
##export VERSIONDATE=20170225
##export VERSION=1.11.90
##export VERSIONDATE=20170408
##export VERSION=1.11.91
##export VERSIONDATE=20170428
##export VERSION=1.12.0
##export VERSIONDATE=20170505
##export VERSION=1.12.1
##export VERSIONDATE=20170620
##export VERSION=1.12.2
##export VERSIONDATE=20170714
##export VERSION=1.12.3
##export VERSIONDATE=20170919
##export VERSION=1.12.4
##export VERSIONDATE=20171208
##export VERSION=1.12.5
##export VERSIONDATE=20180329
##export VERSION=1.13.1
##export VERSIONDATE=20180216
##export VERSION=1.14.0
##export VERSIONDATE=20180320
##export VERSION=1.14.1
##export VERSIONDATE=20180518
##export VERSION=1.14.2
##export VERSIONDATE=20180720
##export VERSION=1.14.3
##export VERSIONDATE=20180917
##export VERSION=1.14.4
##export VERSIONDATE=20181003
##export VERSION=1.14.5
##export VERSIONDATE=20190530
##export VERSION=1.15.1
##export VERSIONDATE=20190117
##export VERSION=1.15.2
##export VERSIONDATE=20190227
##export VERSION=1.16.0
##export VERSIONDATE=20190419
##export VERSION=1.16.1
##export VERSIONDATE=20190924
##export VERSION=1.16.2
##export VERSIONDATE=20191204
#export VERSION=1.16.3
#export VERSIONDATE=20201022
#####sys/acmenc/acmenc.c:176:42: error: 'ACM_METRIC_MAX_SIZE_FORMAT' undeclared (first use in this function)
#wl-showstatus --package-version
#export DEPENDENCIES=gst-plugins-base,celt,libcurl,faac,faad2,glib2,libgsm,gettext,libopus,liborc,librtmp,schroedinger,libopenjpeg,graphene,opencv
#export OPTIONALDEPENDENCIES=aalib,libx265,wildmidi
#export BUILDDEPENDENCIES=
#export OPTIONALBUILDDEPENDENCIES=
#export LICENSEFILE=COPYING
#export LICENSETYPE=GPL
#export DOWNLOADURL="http://gstreamer.freedesktop.org/src/gst-plugins-bad/"
#export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
#export DOWNLOADSOURCEURL=http://gstreamer.freedesktop.org/src/$BASENAME/$BASENAME-$VERSION.tar.xz
#wl-showstatus download
#wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
#wl-wait4deps
#tar xfJ $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.xz
#cd $BASENAME-$VERSION
## fix missing DirectX (needed for d3dvideosink)
#export DOWNLOADSOURCEURL=http://trent.gamblin.ca/dx/dx9mgw.zip
#wl-showstatus download
#wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
#unzip -oq $TARBALLDIR/$BASENAME/dx9mgw.zip
## fix missing HWND_MESSAGE in sys/d3dvideosink/d3dvideosink.c
#mv sys/d3dvideosink/d3dvideosink.c sys/d3dvideosink/d3dvideosink.c.bak
#echo "#define _WIN32_WINNT 0x0500" >sys/d3dvideosink/d3dvideosink.c
#cat sys/d3dvideosink/d3dvideosink.c.bak >> sys/d3dvideosink/d3dvideosink.c
## fix missing d3d10.h in sys/d3dvideosink/directx/directx10/dx10_d3d.c
#echo "#include <d3d9.h>" > d3d10.h
### fix missing AES_ICM in ext/srtp/gstsrtp.c (version >= 1.4.0)
##mv ext/srtp/gstsrtp.c ext/srtp/gstsrtp.c.bak
##sed -e "s/AES_ICM/AES_128_ICM/g" ext/srtp/gstsrtp.c.bak > ext/srtp/gstsrtp.c
## fix printf issue in ext/dtls/gstdtlsdec.c (version >= 1.5.1)
#patch -ulbf ext/dtls/gstdtlsdec.c << EOF
#--- ext/dtls/gstdtlsdec.c  2015-06-04 09:41:57.000000000 +0200
#+++ ext/dtls/gstdtlsdec.c  2015-06-07 21:17:45.759040700 +0200
#@@ -571,4 +571,4 @@
#
#-  GST_DEBUG_OBJECT (self, "received buffer from %s with length %zd",
#-      self->connection_id, gst_buffer_get_size (buffer));
#+  GST_DEBUG_OBJECT (self, "received buffer from %s with length %lu",
#+      self->connection_id, (unsigned long)gst_buffer_get_size (buffer));
#
#EOF
## fix printf issue in ext/dtls/gstdtlsenc.c (version >= 1.5.1)
#patch -ulbf ext/dtls/gstdtlsenc.c << EOF
#--- ext/dtls/gstdtlsenc.c  2015-05-31 20:38:24.000000000 +0200
#+++ ext/dtls/gstdtlsenc.c  2015-06-07 21:18:43.613744100 +0200
#@@ -485,4 +485,4 @@
#       GST_WARNING_OBJECT (self,
#-          "error sending data: %d B were written, expected value was %zd B",
#-          ret, map_info.size);
#+          "error sending data: %d B were written, expected value was %lu B",
#+          ret, (unsigned long)map_info.size);
#     }
#EOF
## fix 64-bit issue in sys/directsound/gstdirectsoundsrc.c (version >= 1.5.2)
#patch -ulbf sys/directsound/gstdirectsoundsrc.c << EOF
#--- sys/directsound/gstdirectsoundsrc.c  2015-04-13 08:56:11.000000000 +0200
#+++ sys/directsound/gstdirectsoundsrc.c  2015-07-24 09:35:05.370043300 +0200
#@@ -732,3 +732,3 @@
#
#-    mmres = mixerGetDevCaps ((UINT) dsoundsrc->mixer,
#+    mmres = mixerGetDevCaps ((uintptr_t) dsoundsrc->mixer,
#         mixer_caps, sizeof (MIXERCAPS));
#EOF
## fix redefinition of IStream in ext/openexr/gstopenexrdec.cpp (version >= 1.5.2)
#mv ext/openexr/gstopenexrdec.cpp ext/openexr/gstopenexrdec.cpp.bak
#cat > ext/openexr/gstopenexrdec.cpp << EOF
##include "config.h"
##define IStream WIN_IStream
#//#include <windows.h>
##include <objidlbase.h>
##undef IStream
#EOF
#cat ext/openexr/gstopenexrdec.cpp.bak >> ext/openexr/gstopenexrdec.cpp
## fix missing GLenum/GLuint in gst-libs/gst/gl/gstglfilter.h (version >= 1.5.2)
#mv gst-libs/gst/gl/gstglfilter.h gst-libs/gst/gl/gstglfilter.h.bak
#echo "#include <GL/gl.h>" > gst-libs/gst/gl/gstglfilter.h
#cat gst-libs/gst/gl/gstglfilter.h.bak >> gst-libs/gst/gl/gstglfilter.h
## fix missing GLenum/GLuint in ext/gtk/gstgtkglsink.h (version >= 1.5.2)
#mv ext/gtk/gstgtkglsink.h ext/gtk/gstgtkglsink.h.bak
#echo "#include <GL/gl.h>" > ext/gtk/gstgtkglsink.h
#cat ext/gtk/gstgtkglsink.h.bak >> ext/gtk/gstgtkglsink.h
## fix ext/openjpeg/gstopenjpeg.h for newer versions of openjpeg (version >= 1.12.2)
#mv ext/openjpeg/gstopenjpeg.h ext/openjpeg/gstopenjpeg.h.bak &&
#sed -e "s?openjpeg-[0-9.]*/openjpeg.h?$(ls -1 $MINGWPREFIX/include/openjpeg-*/openjpeg.h | tail -n1 | sed -e "s?$MINGWPREFIX/include/\(openjpeg-\)?\1?")?" ext/openjpeg/gstopenjpeg.h.bak > ext/openjpeg/gstopenjpeg.h
## avoid invalid #pragma in sys/decklink/win/DeckLinkAPI.h (version >= 1.13.1)
#sed -i.bak -e "s?#pragma warning?//&?" sys/decklink/win/DeckLinkAPI.h
## fix format issue in sys/decklink/gstdecklinkaudiosink.cpp (version >= 1.13.1)
#patch -ulbf sys/decklink/gstdecklinkaudiosink.cpp << EOF
#@@ -724,3 +724,3 @@
#             "Ignoring scheduling error 0x%08x because we're not started yet"
#-            " or not anymore", ret);
#+            " or not anymore", (unsigned int)ret);
#         flow_ret = GST_FLOW_OK;
#EOF
## fix comparison type issue in sys/decklink/gstdecklinkvideosink.cpp (version >= 1.13.1)
#patch -ulbf sys/decklink/gstdecklinkvideosink.cpp << EOF
#@@ -464,4 +464,4 @@
#    */
#-  if (self->timecode_format == GST_DECKLINK_TIMECODE_FORMAT_VITC ||
#-      self->timecode_format == GST_DECKLINK_TIMECODE_FORMAT_VITCFIELD2)
#+  if ((int)self->timecode_format == GST_DECKLINK_TIMECODE_FORMAT_VITC ||
#+      (int)self->timecode_format == GST_DECKLINK_TIMECODE_FORMAT_VITCFIELD2)
#     flags = bmdVideoOutputVITC;
#EOF
## fix unused variable in sys/decklink/win/DeckLinkAPIDispatch.cpp (version >= 1.13.1)
#patch -ulbf sys/decklink/win/DeckLinkAPIDispatch.cpp << EOF
#@@ -35 +35 @@
#-       HRESULT res = CoCreateInstance(CLSID_CDeckLinkIterator, NULL, CLSCTX_ALL,
#+       CoCreateInstance(CLSID_CDeckLinkIterator, NULL, CLSCTX_ALL,
#EOF
## fix sys/decklink/win/DeckLinkAPI_i.c (version >= 1.13.1)
#patch -ulbf sys/decklink/win/DeckLinkAPI_i.c << EOF
#@@ -20,3 +20,5 @@
#
#+#ifndef __MINGW32__
# #pragma warning( disable: 4049 )  /* more than 64k source lines */
#+#endif
#
#@@ -67,3 +69,3 @@
#
#-#endif !_MIDL_USE_GUIDDEF_
#+#endif // !_MIDL_USE_GUIDDEF_
#
#EOF
## fix missing MODE_2_1 in ext/fdkaac/gstfdkaacenc.c (version >= 1.14.4)
#patch -ulbf ext/fdkaac/gstfdkaacenc.c << EOF
#@@ -72,8 +72,10 @@
#           GST_AUDIO_CHANNEL_POSITION_FRONT_LEFT,
#           GST_AUDIO_CHANNEL_POSITION_FRONT_RIGHT}}, {
#+#ifdef MODE_2_1
#     3, MODE_2_1, {
#   GST_AUDIO_CHANNEL_POSITION_FRONT_LEFT,
#           GST_AUDIO_CHANNEL_POSITION_FRONT_RIGHT,
#           GST_AUDIO_CHANNEL_POSITION_LFE1}}, {
#+#endif
#     4, MODE_1_2_1, {
#   GST_AUDIO_CHANNEL_POSITION_FRONT_CENTER,
#EOF
## fix missing AAC_PCM_OUTPUT_INTERLEAVED in ext/fdkaac/gstfdkaacdec.c (version >= 1.14.4)
#patch -ulbf ext/fdkaac/gstfdkaacdec.c << EOF
#@@ -159,4 +159,5 @@
#   }
#
#+#ifdef AAC_PCM_OUTPUT_INTERLEAVED
#   if ((err =
#           aacDecoder_SetParam (self->dec, AAC_PCM_OUTPUT_INTERLEAVED,
#@@ -165,4 +166,5 @@
#     return FALSE;
#   }
#+#endif
#
#   /* 8 channels * 2 bytes per sample * 2048 samples */
#EOF
## fix ext/openh264/gstopenh264enc.cpp for openh264 version >= 1 (version >= 1.16.0)
#patch -ulbf ext/openh264/gstopenh264enc.cpp << EOF
#@@ -741,3 +741,3 @@
#   enc_params.bEnableLongTermReference = 0;
#-#if OPENH264_MINOR >= 4
#+#if OPENH264_MINOR >= 4 || OPENH264_MAJOR >= 2
#   enc_params.eSpsPpsIdStrategy = CONSTANT_ID;
#EOF
## fix building DLLs on 64-bit
#if ( echo $RUNPLATFORM | grep -q x86_64 ); then
# autoreconf -f -i -I m4 -I $MINGWPREFIX/share/aclocal
#fi
## fix invalid C compiler flag -Wno-non-virtual-dtor in sys/decklink/Makefile.in (version >= 1.13.1)
#patch -ulbf sys/decklink/Makefile.in << EOF
#@@ -785,2 +785,3 @@
# plugin_LTLIBRARIES = libgstdecklink.la
#+libgstdecklink_la_CFLAGS = \$(GST_PLUGINS_BAD_CFLAGS) \$(GST_PLUGINS_BASE_CFLAGS) \$(GST_BASE_CFLAGS) \$(GST_CFLAGS) \$(DECKLINK_CXXFLAGS)
# libgstdecklink_la_CPPFLAGS = \\
#@@ -980,3 +981,3 @@
# win/libgstdecklink_la-DeckLinkAPI_i.lo: win/DeckLinkAPI_i.c
#-@am__fastdepCC_TRUE@   \$(AM_V_CC)\$(LIBTOOL) \$(AM_V_lt) --tag=CC \$(AM_LIBTOOLFLAGS) \$(LIBTOOLFLAGS) --mode=compile \$(CC) \$(DEFS) \$(DEFAULT_INCLUDES) \$(INCLUDES) \$(libgstdecklink_la_CPPFLAGS) \$(CPPFLAGS) \$(AM_CFLAGS) \$(CFLAGS) -MT win/libgstdecklink_la-DeckLinkAPI_i.lo -MD -MP -MF win/\$(DEPDIR)/libgstdecklink_la-DeckLinkAPI_i.Tpo -c -o win/libgstdecklink_la-DeckLinkAPI_i.lo \`test -f 'win/DeckLinkAPI_i.c' || echo '\$(srcdir)/'\`win/DeckLinkAPI_i.c
#+@am__fastdepCC_TRUE@`printf "\\t"`\$(AM_V_CC)\$(LIBTOOL) \$(AM_V_lt) --tag=CC \$(AM_LIBTOOLFLAGS) \$(LIBTOOLFLAGS) --mode=compile \$(CC) \$(DEFS) \$(DEFAULT_INCLUDES) \$(INCLUDES) \$(libgstdecklink_la_CFLAGS) \$(CPPFLAGS) \$(AM_CFLAGS) \$(CFLAGS) -MT win/libgstdecklink_la-DeckLinkAPI_i.lo -MD -MP -MF win/\$(DEPDIR)/libgstdecklink_la-DeckLinkAPI_i.Tpo -c -o win/libgstdecklink_la-DeckLinkAPI_i.lo \`test -f 'win/DeckLinkAPI_i.c' || echo '\$(srcdir)/'\`win/DeckLinkAPI_i.c
# @am__fastdepCC_TRUE@   \$(AM_V_at)\$(am__mv) win/\$(DEPDIR)/libgstdecklink_la-DeckLinkAPI_i.Tpo win/\$(DEPDIR)/libgstdecklink_la-DeckLinkAPI_i.Plo
#EOF
#wl-showstatus configure
## skip making tests/examples/gl/sdl (version >= 1.5.1)
#####error: unknown type name 'GLsync'
#cat > tests/examples/gl/sdl/Makefile.in << EOF
#clean:
#all:
#install:
#install-strip:
#EOF
## skip making tests/examples/gl/gtk/switchvideooverlay (version >= 1.12.2)
#####switchvideooverlay-main.o:main.cpp:(.text+0x454): undefined reference to `XInitThreads'
#cat > tests/examples/gl/gtk/switchvideooverlay/Makefile.in << EOF
#clean:
#all:
#install:
#install-strip:
#EOF
## skip making tests/examples/gl/gtk/3dvideo (version >= 1.12.2)
#####3dvideo-main.o:main.cpp:(.text+0x761): undefined reference to `XInitThreads'
#cat > tests/examples/gl/gtk/3dvideo/Makefile.in << EOF
#clean:
#all:
#install:
#install-strip:
#EOF
### remove dependancy on dynamic libstdc++ (GCC 4)
##mv libtool libtool.bak &&
##sed -e "s/-lstdc++/-lstdc++_s -lsupc++/" libtool.bak > libtool &&
##./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --with-gtk=2.0 CFLAGS="-I$(pwd)/dx9mgw/include" LDFLAGS="-Ldx9mgw/lib -Wl,--enable-auto-import -Wl,-no-undefined" &&
##./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --with-gtk=2.0 --disable-direct3d --disable-direct3d9 --without-x LDFLAGS="-Wl,--enable-auto-import -Wl,-no-undefined" &&
##PYTHON=$PYDIR/python.exe ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --disable-debug --with-gtk=2.0 --disable-direct3d --disable-direct3d9 --without-x --disable-introspection LDFLAGS="-Wl,--enable-auto-import -Wl,-no-undefined" &&
##PYTHON=$PYDIR/python.exe ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --disable-debug --with-gtk=2.0 --disable-direct3d --disable-direct3d9 --disable-glx --disable-srtp --disable-x11 --without-x --disable-introspection LDFLAGS="-Wl,--enable-auto-import -Wl,-no-undefined" &&
##PYTHON=$PYDIR/python.exe ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --disable-debug --with-gtk=2.0 --disable-direct3d --disable-direct3d9 --disable-glx --disable-srtp --disable-x11 --without-x --disable-dtls --disable-sdltest --disable-introspection LDFLAGS="-Wl,--enable-auto-import -Wl,-no-undefined" &&
##PYTHON=$PYDIR/python.exe ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --disable-debug --with-gtk=2.0 --disable-direct3d --disable-glx --disable-srtp --disable-x11 --disable-dtls --disable-sdltest --disable-introspection CXXFLAGS="-I$MINGWPREFIX/include/opencv" LDFLAGS="-Wl,--enable-auto-import -Wl,-no-undefined" &&
##PYTHON=$PYDIR/python.exe ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --disable-debug --with-gtk=2.0 --disable-direct3d --disable-glx --disable-srtp --disable-x11 --disable-dtls --disable-sdltest --disable-introspection --disable-opencv --disable-examples CXXFLAGS="-I$MINGWPREFIX/include/opencv" LDFLAGS="-Wl,--enable-auto-import -Wl,-no-undefined" &&
##PYTHON=$PYDIR/python.exe ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --disable-debug --disable-glib-asserts --with-gtk=2.0 --disable-direct3d --enable-gl --disable-srtp --disable-x11 --disable-dtls --disable-sdltest --disable-introspection --enable-openexr --disable-opencv --disable-examples CXXFLAGS="-I$MINGWPREFIX/include/opencv" LDFLAGS="-Wl,--enable-auto-import -Wl,-no-undefined" &&
##PYTHON=$PYDIR/python.exe ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --disable-debug --with-gtk=2.0 --disable-direct3d --disable-glx --disable-srtp --disable-x11 --disable-dtls --disable-sdltest --disable-introspection --enable-openexr --disable-opencv --disable-fdk_aac --disable-ladspa --disable-examples CXXFLAGS="-I$MINGWPREFIX/include/opencv" LDFLAGS="-Wl,--enable-auto-import -Wl,-no-undefined" &&
#PYTHON=$PYDIR/python.exe ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --disable-debug --with-gtk=2.0 --disable-direct3d --disable-glx --disable-srtp --disable-x11 --disable-dtls --disable-sdltest --disable-introspection --enable-openexr --disable-opencv --disable-fdk_aac --disable-ladspa --disable-examples CXXFLAGS="-I$MINGWPREFIX/include/opencv" LDFLAGS="-Wl,--enable-auto-import -Wl,-no-undefined -Wl,--as-needed -lws2_32" &&
# # fix undefined reference to g_module_open/g_module_symbol (version >= 1.13.1)
# sed -i.bak -e "s/^libgstfrei0r_la_LIBADD *= */&-Wl,--as-needed -lgmodule-2.0 /" gst/frei0r/Makefile &&
# wl-showstatus build-install &&
# ## fix gst/librfb/ (version >= 1.1.1)
# #mv gst/librfb/Makefile gst/librfb/Makefile.bak &&
# #sed -e "s/^\(GST_PLUGINS_BASE_LIBS *=.*\)$/\1 -lgstbase-1.0/" gst/librfb/Makefile.bak > gst/librfb/Makefile &&
# ## fix ext/gtk/ (version >= 1.5.2)
# #mv ext/gtk/Makefile ext/gtk/Makefile.bak &&
# #sed -e "s/^\(GST_PLUGINS_BASE_LIBS *=.*\)$/\1 -lopengl32/" ext/gtk/Makefile.bak > ext/gtk/Makefile &&
# # fix error: stray '\' in program
# make -Cgst-libs/gst/interfaces photography-enumtypes.c && sed -i.bak -e "s/^\\\\#/#/g" gst-libs/gst/interfaces/photography-enumtypes.c &&
# make -Cgst-libs/gst/mpegts gstmpegts-enumtypes.c && sed -i.bak -e "s/^\\\\#/#/g" gst-libs/gst/mpegts/gstmpegts-enumtypes.c &&
# make -Cgst-libs/gst/webrtc webrtc-enumtypes.c && sed -i.bak -e "s/^\\\\#/#/g" gst-libs/gst/webrtc/webrtc-enumtypes.c &&
# ( make install-strip || make install-strip ERROR_CFLAGS= || make install-strip LILV_CFLAGS="$(pkg-config --cflags lilv-0)" OPENJPEG_CFLAGS="$(pkg-config --cflags libopenjp2)" ) &&
# wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION
######sys\directsound/gstdirectsoundsrc.c:371: undefined reference to `_imp__CLSIDFromString@8'
##make -C sys/directsound LIBS="-Wl,--as-needed -lole32"


export NAME="gst-plugins-bad"
export STATUS=
export URL=http://www.gnome.org/projects/gst-plugins-bad
export BASENAME=gst-plugins-bad
export DESCRIPTION="GStreamer Bad Plug-ins is a set of plug-ins that aren't up to par compared to the rest. They might be close to being good quality, but they're missing something - be it a good code review, some documentation, a set of tests, a real live maintainer, or some actual wide use."
export CATEGORY=audio,video
export TYPE=library
#export VERSION=1.17.1
#export VERSIONDATE=20200620
#export VERSION=1.17.2
#export VERSIONDATE=20200703
#export VERSION=1.18.0
#export VERSIONDATE=20200908
#export DEPENDENCIES=gst-plugins-base,celt,libcurl,faac,faad2,glib2,libgsm,gettext,libopus,liborc,librtmp,schroedinger,libopenjpeg,graphene,opencv
#export VERSION=1.18.1
#export VERSIONDATE=20201027
#export DEPENDENCIES=gst-plugins-base,celt,libcurl,faac,faad2,glib2,libgsm,gettext,libopus,liborc,librtmp,schroedinger,libopenjpeg,graphene,opencv,gobject-introspection
#export VERSION=1.18.2
#export VERSIONDATE=20201207
#export VERSION=1.18.3
#export VERSIONDATE=20210114
#export VERSION=1.18.4
#export VERSIONDATE=20210316
#export VERSION=1.18.5
#export VERSIONDATE=20210909
#export VERSION=1.18.6
#export VERSIONDATE=20220203
#export VERSION=1.19.1
#export VERSIONDATE=20210601
#export VERSION=1.19.2
#export VERSIONDATE=20210923
#export VERSION=1.19.3
#export VERSIONDATE=20211104
#export VERSION=1.20.0
#export VERSIONDATE=20220204
#export VERSION=1.20.1
#export VERSIONDATE=20220314
#export VERSION=1.20.2
#export VERSIONDATE=20220503
#export VERSION=1.20.3
#export VERSIONDATE=20220616
#export VERSION=1.20.4
#export VERSIONDATE=20221013
#export VERSION=1.20.5
#export VERSIONDATE=20221220
#export VERSION=1.20.6
#export VERSIONDATE=20230224
#export VERSION=1.21.1
#export VERSIONDATE=20221004
#export VERSION=1.21.2
#export VERSIONDATE=20221108
#export VERSION=1.21.3
#export VERSIONDATE=20221205
#export VERSION=1.22.0
#export VERSIONDATE=20230124
export VERSION=1.22.1
export VERSIONDATE=20230305
wl-showstatus --package-version
export DEPENDENCIES=gst-plugins-base,celt,libcurl,faac,faad2,glib2,libgsm,gettext,libopus,liborc,librtmp,schroedinger,libopenjpeg,graphene,opencv,libltc,libmfx,libaom,libbs2b,dssim,libofa,libmms,libmicrodns,srt,gobject-introspection
#export DEPENDENCIES=gst-plugins-base,celt,libcurl,faac,faad2,glib2,libgsm,gettext,libopus,liborc,librtmp,schroedinger,libopenjpeg,graphene,opencv,libltc,libmfx,libaom,libbs2b,dssim,libofa,libmms,libmicrodns,srt,gobject-introspection,fluidsynth
export OPTIONALDEPENDENCIES=aalib,libx265,wildmidi
export BUILDDEPENDENCIES=
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=COPYING
export LICENSETYPE=GPL
export DOWNLOADURL="http://gstreamer.freedesktop.org/src/gst-plugins-bad/"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
export DOWNLOADSOURCEURL=https://gstreamer.freedesktop.org/src/$BASENAME/$BASENAME-$VERSION.tar.xz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
tar xfJ $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.xz
cd $BASENAME-$VERSION
# fix MSVC issue
mkdir -p winfix
cp -rf $PYDIR/lib/distutils winfix/
patch -ulbf winfix/distutils/cygwinccompiler.py << EOF
@@ -85,3 +85,3 @@
         else:
-            raise ValueError("Unknown MS Compiler version %s " % msc_ver)
+            return None

EOF
# fix MSVC issue
mkdir -p winfix
cp -rf $PYDIR/lib/distutils winfix/
patch -ulbf winfix/distutils/cygwinccompiler.py << EOF
@@ -85,3 +85,3 @@
         else:
-            raise ValueError("Unknown MS Compiler version %s " % msc_ver)
+            return None

EOF
#sed -i.bak -e "s?opencv4/\(opencv2/\)?\1?g" ext/opencv/meson.build
# disable d3d11 (version >= 1.21.1)
sed -i.bak -e "s/^subdir('\(d3d11\|cuda\)')/#&/g" gst-libs/gst/meson.build
mkdir -p build_both &&
 wl-showstatus configure &&
 #PKG_CONFIG= PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library both -Dsctp=disabled -Dopenexr=disabled -Dflite=disabled -Dd3d11=disabled -Dx11=disabled -Dintrospection=disabled -Ddoc=disabled -Dexamples=disabled -Dtests=disabled -Dc_args="-I$MINGWPREFIX/include/raptor2" . build_both &&
 #PKG_CONFIG= PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library both -Dsctp=disabled -Dopenexr=disabled -Dflite=disabled -Dd3d11=disabled -Dx11=disabled -Dintrospection=enabled -Ddoc=disabled -Dexamples=disabled -Dtests=disabled -Dc_args="-I$MINGWPREFIX/include/raptor2" . build_both &&
 #PKG_CONFIG= PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library both -Dsctp=disabled -Dopenexr=disabled -Dflite=disabled -Dopencv=disabled -Dmpeg2enc=disabled -Dmplex=disabled -Dofa=enabled -Dopenni2=disabled -Dvoaacenc=disabled -Dvoamrwbenc=disabled -Dwebrtc=disabled -Dwebrtcdsp=disabled -Dwpe=disabled -Dzxing=disabled -Dteletext=disabled -Dtinyalsa=disabled -Dva=disabled -Ddc1394=disabled -Ddirectfb=disabled -Dwayland=disabled -Dd3d11=disabled -Dx11=disabled -Dintrospection=enabled -Ddoc=disabled -Dexamples=disabled -Dtests=disabled -Dc_args="-I$MINGWPREFIX/include/raptor2" . build_both &&
 #PKG_CONFIG= PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library both -Dfluidsynth=disabled -Dsctp=disabled -Dopenexr=disabled -Dflite=disabled -Dopencv=disabled -Dmpeg2enc=disabled -Dmplex=disabled -Dopenni2=disabled -Dvoaacenc=disabled -Dvoamrwbenc=disabled -Dwebrtc=disabled -Dwebrtcdsp=disabled -Dwpe=disabled -Dzxing=disabled -Dteletext=disabled -Dtinyalsa=disabled -Dva=disabled -Ddc1394=disabled -Ddirectfb=disabled -Dwayland=disabled -Dd3d11=disabled -Dx11=disabled -Dintrospection=enabled -Ddoc=disabled -Dexamples=disabled -Dtests=disabled -Dc_args="-I$MINGWPREFIX/include/raptor2" . build_both &&
 #PKG_CONFIG= PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library both -Dfluidsynth=disabled -Dsctp=disabled -Dopenexr=disabled -Dflite=disabled -Dopencv=disabled -Dmpeg2enc=disabled -Dmplex=disabled -Dopenni2=disabled -Dvoaacenc=disabled -Dvoamrwbenc=disabled -Dwebrtc=disabled -Dwebrtcdsp=disabled -Dwpe=disabled -Dzxing=disabled -Dteletext=disabled -Dtinyalsa=disabled -Dva=disabled -Ddc1394=disabled -Ddirectfb=disabled -Dwayland=disabled -Dd3d11=disabled -Dd3dvideosink=disabled -Damfcodec=disabled -Dnvcodec=disabled -Dqsv=disabled -Dx11=disabled -Dintrospection=enabled -Ddoc=disabled -Dexamples=disabled -Dtests=disabled -Dc_args="-I$MINGWPREFIX/include/raptor2" . build_both &&
 PKG_CONFIG= PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library both -Dfluidsynth=disabled -Dsctp=disabled -Dopenexr=disabled -Dflite=disabled -Dopencv=disabled -Dmpeg2enc=disabled -Dmplex=disabled -Dopenni2=disabled -Dvoaacenc=disabled -Dvoamrwbenc=disabled -Dwebrtc=disabled -Dwebrtcdsp=disabled -Dwpe=disabled -Dzxing=disabled -Dteletext=disabled -Dtinyalsa=disabled -Dva=disabled -Ddc1394=disabled -Ddirectfb=disabled -Dwayland=disabled -Dd3d11=disabled -Dd3dvideosink=disabled -Dmsdk=disabled -Damfcodec=disabled -Dnvcodec=disabled -Dqsv=disabled -Dx11=disabled -Dintrospection=enabled -Ddoc=disabled -Dexamples=disabled -Dtests=disabled -Dc_args="-I$MINGWPREFIX/include/raptor2" . build_both &&
 #-Dmplex=disabled 
 #-Dpackage-name="" -Dpackage-origin=""
 ## fix slash/backslash path issue when calling Python from Ninja
 #sed -i.bak -e "s/join_paths/os.path.join/g; /COMMAND =.*python\.exe/ s?\"/\([a-zA-Z]\)/?\"\1:/?; /COMMAND =.*python\.exe/ s?/?\\\\?g" build_both/build.ninja &&
 ## fix Python path issues in meson_exe
 #sed -i.bak -e "s?$PYDIR?$(echo $PYDIR|sed -e "s?^/\([a-zA-Z]\)/?\1:/?")?" build_both/meson-private/meson_exe_*.dat &&
 # fix execution of g-ir-scanner
 sed -i.bak -e "s?^\(\s*COMMAND\s*=\s*\)\(\"[^\"]*\/g-ir-scanner\"\)?\1\"python.exe\" \2?" build_both/build.ninja &&
 ## fix executing shell scripts
 #sed -i.bak -e "s?^\(\s*COMMAND\s*=\s*\)\(\"[^\"]*\.sh\"\)?\1\"$(cygpath -m $(which sh.exe))\" \2?" build_both/build.ninja &&
 # fix link issues (version >= 1.19.2)
 sed -i.bak2 -e "s?\"\(dbghelp\|advapi32\)\"?\"-l\1\"?g" build_both/build.ninja &&
 wl-showstatus build-install &&
 PKG_CONFIG= PATH=$PATH:$PYDIR PYTHONPATH=$(pwd)/winfix:$MINGWPREFIX/lib${PYTHONPATH:+:$PYTHONPATH} ninja -Cbuild_both install &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION
####TO DO: fix building d3d11 (version >= 1.21.1)



