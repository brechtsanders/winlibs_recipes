export NAME="xmlto"
export STATUS=
#export URL=http://cyberelk.net/tim/software/xmlto/
#export URL=http://fedorahosted.org/xmlto/
export URL=https://pagure.io/xmlto/
export BASENAME=xmlto
export DESCRIPTION="xmlto is a shell-script tool for converting XML files to various formats."
export CATEGORY=dataprocessing
export TYPE=application
#export VERSION=0.0.23
#export VERSIONDATE=20101011
#export VERSION=0.0.24
#export VERSIONDATE=20110714
####I/O error : Attempt to load network entity http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd
#export VERSION=0.0.25
#export VERSIONDATE=20111202
#export VERSION=0.0.26
#export VERSIONDATE=20140405
#export VERSION=0.0.27
#export VERSIONDATE=20151110
####src/files.c:33:17: fatal error: pwd.h: No such file or directory
####src/rcfile.c:26:18: fatal error: glob.h: No such file or directory
####src/nano.c:38:21: fatal error: termios.h: No such file or directory
export VERSION=0.0.28
export VERSIONDATE=20151118
wl-showstatus --package-version
export DEPENDENCIES=getopt,libxml2,libxslt,libpaper
export OPTIONALDEPENDENCIES=
export BUILDDEPENDENCIES=
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=
export LICENSETYPE=
#export DOWNLOADURL="http://fedorahosted.org/releases/x/m/xmlto/"
export DOWNLOADURL="https://releases.pagure.org/xmlto/"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
#export DOWNLOADSOURCEURL=http://fedorahosted.org/releases/x/m/xmlto/$BASENAME-$VERSION.tar.bz2
export DOWNLOADSOURCEURL=https://releases.pagure.org/xmlto/$BASENAME-$VERSION.tar.bz2
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
tar xj --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.bz2
cd $BASENAME-$VERSION
# fix already defined attrib in xmlif/xmlif.c (version >= 0.0.27)
sed -i.bak -e "s/\(define \|BEGIN(\|YY_STATE_EOF(\)attrib/\1attribt/g" xmlif/xmlif.c
# fix already defined val in xmlif/xmlif.c (version >= 0.0.28)
sed -i.bak2 -e "s/\bval\b/value/g" xmlif/xmlif.c
wl-showstatus configure &&
 ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --with-webbrowser=any &&
 wl-showstatus build-install &&
 make install-strip &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION



