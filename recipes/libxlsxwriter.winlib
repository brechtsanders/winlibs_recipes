export NAME="libxlsxwriter"
export STATUS=
export URL=https://libxlsxwriter.github.io/
export BASENAME=libxlsxwriter
export DESCRIPTION="Libxlsxwriter is a C library for creating Excel XLSX files"
export CATEGORY=fileformat
export TYPE=library
#export VERSION=0.1.3
#export VERSIONDATE=20150417
#export VERSION=0.1.4
#export VERSIONDATE=20150418
#export VERSION=0.1.5
#export VERSIONDATE=20150505
#export VERSION=0.1.6
#export VERSIONDATE=20150928
#export VERSION=0.1.8
#export VERSIONDATE=20151207
#export VERSION=0.1.9
#export VERSIONDATE=20151208
#export VERSION=0.2.0
#export VERSIONDATE=20151210
#export VERSION=0.2.1
#export VERSIONDATE=20151211
#export VERSION=0.2.2
#export VERSIONDATE=20151212
#export VERSION=0.2.3
#export VERSIONDATE=20151213
#export VERSION=0.2.5
#export VERSIONDATE=20151214
#export VERSION=0.2.6
#export VERSIONDATE=20151220
#export VERSION=0.2.7
#export VERSIONDATE=20151221
#export VERSION=0.2.7
#export VERSIONDATE=20151222
#export VERSION=0.3.1
#export VERSIONDATE=20160404
#export VERSION=0.3.2
#export VERSIONDATE=20160408
#export VERSION=0.3.3
#export VERSIONDATE=20160524
#export VERSION=0.3.4
#export VERSIONDATE=20160529
#export VERSION=0.3.5
#export VERSIONDATE=20160531
#export VERSION=0.3.6
#export VERSIONDATE=20160601
#export VERSION=0.3.7
#export VERSIONDATE=20160603
#export VERSION=0.3.8
#export VERSIONDATE=20160612
#export VERSION=0.3.9
#export VERSIONDATE=20160703
#export VERSION=0.4.0
#export VERSIONDATE=20160705
#export VERSION=0.4.1
#export VERSIONDATE=20160712
#export VERSION=0.4.2
#export VERSIONDATE=20160715
#export VERSION=0.4.3
#export VERSIONDATE=20161226
#export VERSION=0.4.4
#export VERSIONDATE=20161231
#export VERSION=0.4.5
#export VERSIONDATE=20161231
#export VERSION=0.4.6
#export VERSIONDATE=20170102
#export VERSION=0.4.8
#export VERSIONDATE=20170103
#export VERSION=0.5.2
#export VERSIONDATE=20170107
#export VERSION=0.5.3
#export VERSIONDATE=20170108
#export VERSION=0.5.4
#export VERSIONDATE=20170109
#export VERSION=0.5.5
#export VERSIONDATE=20170110
#export VERSION=0.5.6
#export VERSIONDATE=20170111
#export VERSION=0.5.7
#export VERSIONDATE=20170113
#export VERSION=0.5.8
#export VERSIONDATE=20170113
#export VERSION=0.5.9
#export VERSIONDATE=20170114
#export VERSION=0.6.0
#export VERSIONDATE=20170115
#export VERSION=0.6.1
#export VERSIONDATE=20170116
#export VERSION=0.6.2
#export VERSIONDATE=20170117
#export VERSION=0.6.3
#export VERSIONDATE=20170119
#export VERSION=0.6.4
#export VERSIONDATE=20170121
#export VERSION=0.6.6
#export VERSIONDATE=20170122
#export VERSION=0.6.7
#export VERSIONDATE=20170126
#export VERSION=0.6.8
#export VERSIONDATE=20170128
#export VERSION=0.6.9
#export VERSIONDATE=20170130
#export VERSION=0.7.0
#export VERSIONDATE=20170627
#export VERSION=0.7.1
#export VERSIONDATE=20170725
#export VERSION=0.7.2
#export VERSIONDATE=20170727
#export VERSION=0.7.3
#export VERSIONDATE=20170816
#export VERSION=0.7.4
#export VERSIONDATE=20170820
#export VERSION=0.7.5
#export VERSIONDATE=20170925
#export VERSION=0.7.6
#export VERSIONDATE=20180212
#export VERSION=0.7.7
#export VERSIONDATE=20180517
#export VERSION=0.7.8
#export VERSIONDATE=20180831
#export VERSION=0.7.9
#export VERSIONDATE=20180902
#export VERSION=0.8.0
#export VERSIONDATE=20180912
#export VERSION=0.8.1
#export VERSIONDATE=20180915
#export VERSION=0.8.2
#export VERSIONDATE=20180917
#export VERSION=0.8.3
#export VERSIONDATE=20181002
#export VERSION=0.8.4
#export VERSIONDATE=20181110
#export VERSION=0.8.5
#export VERSIONDATE=20190211
#export VERSION=0.8.6
#export VERSIONDATE=20190408
#export VERSION=0.8.7
#export VERSIONDATE=20190621
#export VERSION=0.8.8
#export VERSIONDATE=20191118
#export VERSION=0.8.9
#export VERSIONDATE=20191217
#export VERSION=0.9.0
#export VERSIONDATE=20191227
#export VERSION=0.9.1
#export VERSIONDATE=20191227
#export VERSION=0.9.3
#export VERSIONDATE=20200114
#export VERSION=0.9.4
#export VERSIONDATE=20200120
#export VERSION=0.9.5
#export VERSIONDATE=20200601
#export VERSION=0.9.6
#export VERSIONDATE=20200804
#export VERSION=0.9.7
#export VERSIONDATE=20200804
#export VERSION=0.9.8
#export VERSIONDATE=20200812
#export VERSION=0.9.9
#export VERSIONDATE=20200818
#export VERSION=1.0.0
#export VERSIONDATE=20200908
#export VERSION=1.0.1
#export VERSIONDATE=20210331
#export VERSION=1.0.2
#export VERSIONDATE=20210416
#export VERSION=1.0.3
#export VERSIONDATE=20210421
#export VERSION=1.0.4
#export VERSIONDATE=20210508
#export VERSION=1.0.5
#export VERSIONDATE=20210514
#export VERSION=1.0.6
#export VERSIONDATE=20210529
#export VERSION=1.0.7
#export VERSIONDATE=20210702
#export VERSION=1.0.8
#export VERSIONDATE=20210703
#export VERSION=1.0.9
#export VERSIONDATE=20210708
#export VERSION=1.1.0
#export VERSIONDATE=20210710
#export VERSION=1.1.1
#export VERSIONDATE=20210713
#export VERSION=1.1.2
#export VERSIONDATE=20210809
#export VERSION=1.1.3
#export VERSIONDATE=20210810
export VERSION=1.1.4
export VERSIONDATE=20211010
wl-showstatus --package-version
export DEPENDANCIES=zlib
export OPTIONALDEPENDANCIES=
export BUILDDEPENDANCIES=pexports
export LICENSEFILE=LICENSE.txt
export LICENSETYPE=FreeBSD
export DOWNLOADURL="https://github.com/jmcnamara/libxlsxwriter/releases RELEASE_"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
export DOWNLOADSOURCEURL=https://github.com/jmcnamara/libxlsxwriter/archive/RELEASE_$VERSION.tar.gz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
#mv $TARBALLDIR/$BASENAME/RELEASE_$VERSION $TARBALLDIR/$BASENAME/libxlsxwriter-RELEASE_$VERSION.tar.gz | mv $TARBALLDIR/$BASENAME/RELEASE_$VERSION.tar.gz $TARBALLDIR/$BASENAME/libxlsxwriter-RELEASE_$VERSION.tar.gz
wl-wait4deps
wl-showstatus extract
#tar xfz $TARBALLDIR/$BASENAME/libxlsxwriter-RELEASE_$VERSION.tar.gz
tar xfz $TARBALLDIR/$BASENAME/RELEASE_$VERSION.tar.gz
cd libxlsxwriter-RELEASE_$VERSION
## fix missing sys/cdefs.h in include/xlsxwriter/third_party/queue.h (version <= 0.1.6)
#mv include/xlsxwriter/third_party/queue.h include/xlsxwriter/third_party/queue.h.bak
#sed -e "s?\(#include <sys/cdefs.h>\)?/*\1*/?" include/xlsxwriter/third_party/queue.h.bak > include/xlsxwriter/third_party/queue.h
# fix missing fill_win32_filefunc64 in src/packager.c (version >= 0.1.8)
mv src/packager.c src/packager.c.bak
sed -e "s/#ifdef _WIN32/#if defined(_WIN32) \&\& \!defined(__MINGW32__)/" src/packager.c.bak > src/packager.c
wl-showstatus build &&
 #make CC=gcc &&
 #make CC=gcc MING_LIKE=1 &&
 make CC="gcc -DZEXPORT=" MING_LIKE=1 &&
 wl-showstatus install &&
 mkdir -p $INSTALLPREFIX/include $INSTALLPREFIX/lib $INSTALLPREFIX/bin &&
 cp -rf include/* $INSTALLPREFIX/include/ &&
 cp -f lib/*.a $INSTALLPREFIX/lib/ &&
 #cp -f lib/libxlsxwriter.so $INSTALLPREFIX/bin/xlsxwriter.dll &&
 cp -f src/libxlsxwriter.dll $INSTALLPREFIX/bin/xlsxwriter.dll &&
 strip $INSTALLPREFIX/bin/xlsxwriter.dll &&
 pexports $INSTALLPREFIX/bin/xlsxwriter.dll | sed -e "s/^\(LIBRARY \).*/\1xlsxwriter.dll/" > xlsxwriter.def &&
 dlltool -d xlsxwriter.def -D $INSTALLPREFIX/bin/xlsxwriter.dll -l $INSTALLPREFIX/lib/libxlsxwriter.dll.a &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf libxlsxwriter-RELEASE_$VERSION



