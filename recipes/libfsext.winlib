export NAME="libfsext"
export STATUS=
export URL=https://github.com/libyal/libfsext
export BASENAME=libfsext
export DESCRIPTION="Library and tools to access the Extended File System"
export CATEGORY=development
export TYPE=library
#export VERSION=master
#export VERSIONDATE=20180117
#export VERSION=20200810
#export VERSIONDATE=20200810
#export VERSION=20200811
#export VERSIONDATE=20200811
#export VERSION=20200819
#export VERSIONDATE=20200819
#export VERSION=20201107
#export VERSIONDATE=20201107
#export VERSION=20210129
#export VERSIONDATE=20210130
#export VERSION=20210424
#export VERSIONDATE=20210424
#export VERSION=20210504
#export VERSIONDATE=20210504
#export VERSION=20210522
#export VERSIONDATE=20210522
#export VERSION=20210720
#export VERSIONDATE=20210720
#export VERSION=20210721
#export VERSIONDATE=20210721
#export VERSION=20220112
#export VERSIONDATE=20220113
#export VERSION=20220216
#export VERSIONDATE=20220216
#export VERSION=20220319
#export VERSIONDATE=20220319
export VERSION=20220529
export VERSIONDATE=20220529
wl-showstatus --package-version
export DEPENDANCIES=libcerror,libcthreads,libcdata,libclocale,libcnotify,libcsplit,libuna,libcfile,libcpath,libbfio,libfcache,libfdata,libfdatetime,libfguid,libhmac,openssl
export OPTIONALDEPENDANCIES=
export BUILDDEPENDANCIES=
export LICENSEFILE=COPYING.LESSER
export LICENSETYPE=LGPL
export DOWNLOADURL="https://github.com/libyal/libfsext/releases"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
export DOWNLOADSOURCEURL=https://github.com/libyal/libfsext/archive/$VERSION.tar.gz
#export DOWNLOADSOURCEURL=https://github.com/libyal/$BASENAME/releases/download/$(echo $VERSION|sed -e "s/alpha-//")/$BASENAME-$VERSION.tar.gz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
#mv $TARBALLDIR/$BASENAME/$VERSION.tar.gz $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.gz
wl-wait4deps
wl-showstatus extract
#tar xfz $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.gz
tar xfz $TARBALLDIR/$BASENAME/$VERSION.tar.gz
cd $BASENAME-$(echo $VERSION|sed -e "s/alpha-//")
# fix missing files
for F in libcerror libcthreads pthread libcdata libclocale libcnotify libcsplit libuna libcfile libcpath libbfio libfcache libfdata libfdatetime libfguid libhmac; do
 mkdir -p $F
 touch $F/Makefile.am
done
wl-showstatus configure &&
 #./autogen.sh &&
 autoreconf -f -i -I m4 -I $MINGWPREFIX/share/aclocal &&
 # fix issue detecting swprintf
 sed -i.bak -e "s/as_fn_error\(.*Missing function: swprintf\)/echo\1/" configure &&
 ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-wide-character-type &&
 # fix link issues
 sed -i.bak -e "s?\.\./lib[^ /]*/lib\(cpath\)\.la?-l\1?g" libfsext/Makefile &&
 wl-showstatus build-install &&
 make install-strip &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$(echo $VERSION|sed -e "s/alpha-//")



