#export NAME="pygobject"
#export STATUS=
#export URL=http://www.gnome.org/projects/pygobject
#export BASENAME=pygobject
#export DESCRIPTION=""
#export CATEGORY=
#export TYPE=library
##export VERSION=2.26.0
##export VERSIONDATE=20101008
##export VERSION=2.27.0
##export VERSIONDATE=20101111
##export VERSION=2.28.0
##export VERSIONDATE=20110309
##export VERSION=2.28.1
##export VERSIONDATE=20110322
##export VERSION=2.28.2
##export VERSIONDATE=20110323
##export VERSION=2.28.3
##export VERSIONDATE=20110324
##export VERSION=2.28.4
##export VERSIONDATE=20110419
##export VERSION=2.28.6
##export VERSIONDATE=20110614
#export VERSION=2.28.7
#export VERSIONDATE=20171211
#wl-showstatus --package-version
#export DEPENDENCIES=glib2,libffi
##export VERSION=3.0.0
##export VERSIONDATE=20110920
##export VERSION=3.0.1
##export VERSIONDATE=20111001
##export VERSION=3.0.2
##export VERSIONDATE=20111022
##export VERSION=3.0.3
##export VERSIONDATE=20111230
##export VERSION=3.0.4
##export VERSIONDATE=20120209
##export VERSION=3.1.0
##export VERSIONDATE=20120207
##export VERSION=3.1.1
##export VERSIONDATE=20120221
##export VERSION=3.1.92
##export VERSIONDATE=20120319
##export VERSION=3.1.93
##export VERSIONDATE=20120322
##export VERSION=3.2.0
##export VERSIONDATE=20120326
##export VERSION=3.2.1
##export VERSIONDATE=20120511
##export VERSION=3.2.2
##export VERSIONDATE=20120515
##export VERSION=3.3.1
##export VERSIONDATE=20120430
##export VERSION=3.3.2
##export VERSIONDATE=20120606
##export VERSION=3.3.3.1
##export VERSIONDATE=20120625
##export VERSION=3.3.4
##export VERSIONDATE=20120716
##export VERSION=3.3.91
##export VERSIONDATE=20120904
##export VERSION=3.3.92
##export VERSIONDATE=20120918
#####Requested 'gobject-introspection-1.0 >= 1.29.0' but version of gobject-introspection is 0.10.8
##export VERSION=3.4.0
##export VERSIONDATE=20120924
##export VERSION=3.4.1
##export VERSIONDATE=20121015
##export VERSION=3.4.1.1
##export VERSIONDATE=20121018
##export VERSION=3.4.2
##export VERSIONDATE=20121112
##export VERSION=3.7.1
##export VERSIONDATE=20121023
##export VERSION=3.7.2
##export VERSIONDATE=20121119
##export VERSION=3.7.3
##export VERSIONDATE=20121218
##export VERSION=3.7.4
##export VERSIONDATE=20130114
##export VERSION=3.7.5.1
##export VERSIONDATE=20130205
##export VERSION=3.8.0
##export VERSIONDATE=20130325
##export VERSION=3.8.1
##export VERSIONDATE=20130415
#####Requested 'gobject-introspection-1.0 >= 1.33.14' but version of gobject-introspection is 0.10.8
##export VERSION=3.8.2
##export VERSIONDATE=20130514
##export VERSION=3.8.3
##export VERSIONDATE=20130706
#####No package 'gobject-introspection-1.0' found
##export VERSION=3.9.1
##export VERSIONDATE=20130501
##export VERSION=3.9.2
##export VERSIONDATE=20130529
##export VERSION=3.9.5
##export VERSIONDATE=20130729
##export VERSION=3.10.0
##export VERSIONDATE=20130923
##export VERSION=3.10.1
##export VERSIONDATE=20131014
##export VERSION=3.10.2
##export VERSIONDATE=20131111
##export VERSION=3.11.1
##export VERSIONDATE=20131028
##export VERSION=3.11.2
##export VERSIONDATE=20131118
##export VERSION=3.11.3
##export VERSIONDATE=20131216
##export VERSION=3.11.4
##export VERSIONDATE=20140114
##export VERSION=3.11.5
##export VERSIONDATE=20140204
#####checking whether /E/Prog/Python26-32/python.exe version >= 2.7... configure: error: too old
##export VERSION=3.12.0
##export VERSIONDATE=20140324
##export VERSION=3.12.1
##export VERSIONDATE=20140418
##export VERSION=3.12.2
##export VERSIONDATE=20140526
##export VERSION=3.13.1
##export VERSIONDATE=20140429
##export VERSION=3.13.2
##export VERSIONDATE=20140526
##export VERSION=3.13.3
##export VERSIONDATE=20140624
##export VERSION=3.13.4
##export VERSIONDATE=20140816
#####No package 'gobject-introspection-1.0' found
##export VERSION=3.14.0
##export VERSIONDATE=20140924
##export VERSION=3.15.0
##export VERSIONDATE=20150221
##export VERSION=3.16.0
##export VERSIONDATE=20150324
#####configure: error: Python libs not found. Windows and Darwin require Python modules to be explicitly linked to libpython.
##export VERSION=3.16.1
##export VERSIONDATE=20150414
##export VERSION=3.16.2
##export VERSIONDATE=20150615
##export VERSION=3.17.1
##export VERSIONDATE=20150615
##export VERSION=3.18.0
##export VERSIONDATE=20150922
##export VERSION=3.18.2
##export VERSIONDATE=20151025
##export VERSION=3.19.2
##export VERSIONDATE=20151101
##export VERSION=3.20.0
##export VERSIONDATE=20160406
##export VERSION=3.20.1
##export VERSIONDATE=20160425
##export VERSION=3.21.0
##export VERSIONDATE=20160425
##export VERSION=3.22.0
##export VERSIONDATE=20160920
##export VERSION=3.24.0
##export VERSIONDATE=20170320
##export VERSION=3.24.1
##export VERSIONDATE=20170410
##export VERSION=3.25.1
##export VERSIONDATE=20170423
##export VERSION=3.26.0
##export VERSIONDATE=20170912
##export VERSION=3.26.1
##export VERSIONDATE=20171027
##export VERSION=3.27.0
##export VERSIONDATE=20171211
##export VERSION=3.27.1
##export VERSIONDATE=20171212
##export VERSION=3.27.2
##export VERSIONDATE=20180207
##export VERSION=3.27.3
##export VERSIONDATE=20180210
##export VERSION=3.27.4
##export VERSIONDATE=20180214
##export VERSION=3.27.5
##export VERSIONDATE=20180302
##export VERSION=3.28.0
##export VERSIONDATE=20180312
##export VERSION=3.28.1
##export VERSIONDATE=20180318
##export VERSION=3.28.2
##export VERSIONDATE=20180328
##export VERSION=3.28.3
##export VERSIONDATE=20180601
##export VERSION=3.29.1
##export VERSIONDATE=20180416
##export VERSION=3.29.2
##export VERSIONDATE=20180517
##export VERSION=3.29.3
##export VERSIONDATE=20180817
##export VERSION=3.30.0
##export VERSIONDATE=20180901
##export VERSION=3.30.1
##export VERSIONDATE=20180915
##export VERSION=3.30.2
##export VERSIONDATE=20181112
##export VERSION=3.30.4
##export VERSIONDATE=20181201
##export VERSION=3.30.5
##export VERSIONDATE=20190617
##export VERSION=3.31.1
##export VERSIONDATE=20181118
##export VERSION=3.31.2
##export VERSIONDATE=20181216
##export VERSION=3.31.3
##export VERSIONDATE=20190203
##export VERSION=3.31.4
##export VERSIONDATE=20190307
##export VERSION=3.32.0
##export VERSIONDATE=20190311
##export VERSION=3.32.1
##export VERSIONDATE=20190420
##export VERSION=3.32.2
##export VERSIONDATE=20190624
##export VERSION=3.33.1
##export VERSIONDATE=20190819
##export VERSION=3.34.0
##export VERSIONDATE=20190910
#####No package 'gobject-introspection-1.0' found
##wl-showstatus --package-version
##export DEPENDENCIES=glib2,libffi,gobject-introspection
#export OPTIONALDEPENDENCIES=
#export BUILDDEPENDENCIES=
#export OPTIONALBUILDDEPENDENCIES=
#export LICENSEFILE=COPYING
#export LICENSETYPE=LGPL
#export DOWNLOADURL="http://ftp.gnome.org/pub/GNOME/sources/pygobject/"
#export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
##export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/gnome/sources/$BASENAME/`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/$BASENAME-$VERSION.tar.bz2
#export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/gnome/sources/$BASENAME/`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/$BASENAME-$VERSION.tar.xz
#wl-showstatus download
#wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
#wl-wait4deps
##tar xj --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.bz2
#tar xJ --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.xz
#cd $BASENAME-$VERSION
## fix Python name
#mv configure configure.bak
#sed -e "s/\(basename \$PYTHON\)/\1|sed -e s?\\.exe??/" configure.bak > configure
## fix wrong extension and invalid -rpath
#for F in */Makefile.in ; do
# mv $F $F.bak
# sed -e "s/\.so/\.dll/g; s/-rpath[ \t][^ ]*//g" $F.bak > $F
#done
## fix making tests
#cat > tests/Makefile.in << EOF
#clean:
#all:
#install:
#install-strip:
#EOF
#wl-showstatus configure &&
##PYTHON=$PYDIR/python.exe C_INCLUDE_PATH=$PYDIR/include${C_INCLUDE_PATH:+:$C_INCLUDE_PATH} ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --disable-introspection --disable-glibtest CFLAGS="-I$PYDIR/include" LDFLAGS="-no-undefined -Wl,-no-undefined" &&
##PYTHON=$PYDIR/python.exe C_INCLUDE_PATH=$PYDIR/include${C_INCLUDE_PATH:+:$C_INCLUDE_PATH} ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --disable-shared --disable-introspection --disable-glibtest CFLAGS="-I$PYDIR/include" LDFLAGS="-no-undefined -Wl,-no-undefined" PYTHON_EXEC_PREFIX=$PYDIR &&
##PYTHON=$PYDIR/python.exe C_INCLUDE_PATH=$PYDIR/include${C_INCLUDE_PATH:+:$C_INCLUDE_PATH} ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --disable-introspection --disable-glibtest CFLAGS="-I$PYDIR/include" LDFLAGS="-Wl,-no-undefined" PYTHON_EXEC_PREFIX=$PYDIR &&
##PYTHON=$PYDIR/python.exe C_INCLUDE_PATH=$PYDIR/include${C_INCLUDE_PATH:+:$C_INCLUDE_PATH} LIBRARY_PATH=$PYDIR/libs${LIBRARY_PATH:+:$LIBRARY_PATH} ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --disable-introspection --disable-glibtest CFLAGS="-I$PYDIR/include" LDFLAGS="-Wl,-no-undefined" PYTHON_EXEC_PREFIX=$PYDIR &&
##PYTHON=$PYDIR/python.exe C_INCLUDE_PATH=$PYDIR/include${C_INCLUDE_PATH:+:$C_INCLUDE_PATH} ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --disable-introspection --disable-glibtest CFLAGS="-I$PYDIR/include" LDFLAGS="-Wl,-no-undefined" PYTHON_EXEC_PREFIX=$PYDIR PYTHON_LIBS="-L$PYDIR/libs -lpython26" &&
##PYTHON=$PYDIR/python.exe C_INCLUDE_PATH=$PYDIR/include${C_INCLUDE_PATH:+:$C_INCLUDE_PATH} ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --disable-introspection --disable-glibtest CFLAGS="-I$PYDIR/include" LDFLAGS="-Wl,-no-undefined" PYTHON_EXEC_PREFIX=$PYDIR PYTHON_LIBS="-Wl,--as-needed -L$PYDIR/libs -lpython26" &&
#PYTHON=$PYDIR/python.exe C_INCLUDE_PATH=$PYDIR/include${C_INCLUDE_PATH:+:$C_INCLUDE_PATH} ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --disable-introspection --disable-glibtest CFLAGS="-I$PYDIR/include" LDFLAGS="-Wl,-no-undefined" PYTHON_EXEC_PREFIX=$PYDIR PYTHON_LIBS="-Wl,--as-needed -L$PYDIR/libs -lpython$(ls -1 $PYDIR/libs/libpython[0-9][0-9].a|sed -e "s/^.*python\([0-9]\)\([0-9]*\).*$/\1\2/")" &&
# wl-showstatus build-install &&
# # fix building DLLs
# mv libtool libtool.bak &&
# sed -e "s/\(allow_undefined=\)yes/\1no/" libtool.bak > libtool &&
# # avoid stuff that is not available
# echo "#undef HAVE_PYSIGNAL_SETWAKEUPFD" >> config.h &&
# # fix issue with backslashes
# for F in Makefile */Makefile ; do
#  mv $F $F.bak
#  sed -e 's?\\Lib\\?/Lib/?g; s/-std=c9x//' $F.bak > $F
# done &&
# ## manually create pygobject-codegen-2.0 if not done automatically
# #( ls -1 codegen/pygobject-codegen-2.0 &> /dev/null || (
# # mkdir -p $INSTALLPREFIX/bin &&
# # sed -e "s?@prefix@?$MINGWPREFIX?; s?@datarootdir@?\${prefix}/share?; s?@datadir@?\${datarootdir}?; s?@PYTHON@?\$PYDIR/python.exe?" codegen/pygobject-codegen-2.0.in > $INSTALLPREFIX/bin/pygobject-codegen-2.0
# #)) &&
# #( make -j1 install-strip || make -j1 install-strip LIBS="-Wl,--as-needed -lpython26" ) &&
# ( make -j1 all install-strip pyexecdir=$INSTALLPREFIX/python/App/Lib/site-packages pkgpyexecdir=$INSTALLPREFIX/python/App/Lib/site-packages ||
#  ( touch glib/.libs/libpyglib-2.0-python.lai && make -j1 all install-strip pyexecdir=$INSTALLPREFIX/python/App/Lib/site-packages pkgpyexecdir=$INSTALLPREFIX/python/App/Lib/site-packages ) ||
#  ( touch glib/.libs/_glib.lai && make -j1 all install-strip pyexecdir=$INSTALLPREFIX/python/App/Lib/site-packages pkgpyexecdir=$INSTALLPREFIX/python/App/Lib/site-packages ) ||
#  ( touch gobject/.libs/_gobject.lai && make -j1 all install-strip pyexecdir=$INSTALLPREFIX/python/App/Lib/site-packages pkgpyexecdir=$INSTALLPREFIX/python/App/Lib/site-packages ) ||
#  ( touch gio/.libs/_gio.lai && make -j1 all install-strip pyexecdir=$INSTALLPREFIX/python/App/Lib/site-packages pkgpyexecdir=$INSTALLPREFIX/python/App/Lib/site-packages )
# ) &&
# mv $INSTALLPREFIX/bin/pygobject-codegen-2.0 $INSTALLPREFIX/bin/pygobject-codegen-2.0.bak &&
# sed -e "s?$INSTALLPREFIX?\$MINGWPREFIX?" $INSTALLPREFIX/bin/pygobject-codegen-2.0.bak > $INSTALLPREFIX/bin/pygobject-codegen-2.0 &&
# rm $INSTALLPREFIX/bin/pygobject-codegen-2.0.bak &&
# wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION
###touch glib/.libs/libpyglib-2.0-python.exe.lai
##touch glib/.libs/libpyglib-2.0-python.lai
##touch glib/.libs/_glib.lai
##touch gobject/.libs/_gobject.lai
##touch gio/.libs/_gio.lai
##make -j1 all install-strip pyexecdir=$INSTALLPREFIX/python/App/Lib/site-packages pkgpyexecdir=$INSTALLPREFIX/python/App/Lib/site-packages &&
#####To do: fix more backslash issues (including in .pc file)



export NAME="pygobject"
export STATUS=
export URL=https://pypi.org/project/PyGObject/
export BASENAME=pygobject
export DESCRIPTION="PyGObject is a Python package which provides bindings for GObject based libraries such as GTK, GStreamer, WebKitGTK, GLib, GIO and many more."
export CATEGORY=development
export TYPE=library
#export VERSION=3.34.0
#export VERSIONDATE=20200308
#export VERSION=3.36.0
#export VERSIONDATE=20200310
#export VERSION=3.36.1
#export VERSIONDATE=20200507
#export VERSION=3.38.0
#export VERSIONDATE=20200913
#export VERSION=3.40.0
#export VERSIONDATE=20210319
#export VERSION=3.40.1
#export VERSIONDATE=20210331
#export VERSION=3.42.0
#export VERSIONDATE=20210919
#export VERSION=3.42.1
#export VERSIONDATE=20220417
#export VERSION=3.42.2
#export VERSIONDATE=20220717
#export VERSION=3.43.1
#export VERSIONDATE=20230128
#export VERSION=3.44.0
#export VERSIONDATE=20230319
#export VERSION=3.44.1
#export VERSIONDATE=20230325
#export VERSION=3.44.2
#export VERSIONDATE=20230929
#export VERSION=3.46.0
#export VERSIONDATE=20230910
#export VERSION=3.47.0
#export VERSIONDATE=20240213
#export VERSION=3.48.0
#export VERSIONDATE=20240309
#export VERSION=3.48.1
#export VERSIONDATE=20240310
#export VERSION=3.48.2
#export VERSIONDATE=20240406
#export VERSION=3.49.0
#export VERSIONDATE=20240907
#export VERSION=3.50.0
#export VERSIONDATE=20240912
#export VERSION=3.51.0
#export VERSIONDATE=20250201
####tests\meson.build:124:15: ERROR: Unknown variable "pycairo_dep".
#export VERSION=3.52.1
#export VERSIONDATE=20250310
#export VERSION=3.52.2
#export VERSIONDATE=20250312
#export VERSION=3.52.3
#export VERSIONDATE=20250317
#export VERSION=3.53.0
#export VERSIONDATE=20250828
#export VERSION=3.54.0
#export VERSIONDATE=20250906
#export VERSION=3.54.1
#export VERSIONDATE=20250912
export VERSION=3.54.2
export VERSIONDATE=20250913
wl-showstatus --package-version
export DEPENDENCIES=glib2,libffi,gobject-introspection
export OPTIONALDEPENDENCIES=
export BUILDDEPENDENCIES=meson,ninja
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=COPYING
export LICENSETYPE=LGPL
export DOWNLOADURL="http://ftp.gnome.org/pub/GNOME/sources/pygobject/"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
#export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/gnome/sources/$BASENAME/$(echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/')/$BASENAME-$VERSION.tar.xz
export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/gnome/sources/$BASENAME/$(echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/')/$BASENAME-$VERSION.tar.gz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
#tar xJ --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.xz
tar xz --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.gz
cd $BASENAME-$VERSION
# fix MSVC issue
mkdir -p winfix
cp -rf $PYDIR/lib/distutils winfix/
patch -ulbf winfix/distutils/cygwinccompiler.py << EOF
@@ -85,3 +85,3 @@
         else:
-            raise ValueError("Unknown MS Compiler version %s " % msc_ver)
+            return None

EOF
mkdir -p build_win &&
 wl-showstatus configure &&
 #PATH=$PATH:$PYDIR PKG_CONFIG= PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library shared -Dpython=python3 -Dpycairo=false . build_win &&
 #PATH=$PATH:$PYDIR PKG_CONFIG= PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library shared -Dpython=python3 -Dpycairo=disabled . build_win &&
 #PKG_CONFIG= PATH=$PATH:$PYDIR PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library shared -Dpython=python3 -Dpycairo=disabled -Dtests=false . build_win &&
 PATH=$PATH:$PYDIR PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library shared -Dpython=python3 -Dpycairo=disabled -Dtests=false . build_win &&
 # fix execution of Python scripts
 #sed -i.bak -e "s?\(COMMAND\|POST_BUILD\)\( *= *\| *=.*\&\& *\)\(\"\{0,1\}[^ ]*\)\(\.py\|glib-mkenums\|g-ir-scanner\)\(\"\{0,1\} \)?\1\2$(echo $PYDIR/python.exe|sed -e "s?^/\([a-zA-Z]\)/?\1:\\\\\\\\?; s?/?\\\\\\\\?g") \3\4\5?" build_win/build.ninja &&
 sed -i.bak -e "s?\(COMMAND\|POST_BUILD\)\( *= *\| *=.*\&\& *\)\(\"\{0,1\}[^ ]*\)\(\.py\|glib-mkenums\|g-ir-scanner\)\(\"\{0,1\} \)?\1\2python.exe \3\4\5?" build_win/build.ninja &&
 wl-showstatus build-install &&
 #PKG_CONFIG= PATH=$PATH:$PYDIR PYTHONPATH=$PWD/winfix:$MINGWPREFIX/lib${PYTHONPATH:+:$PYTHONPATH} ninja -Cbuild_win install &&
 PATH=$PATH:$PYDIR PYTHONPATH=$PWD/winfix:$MINGWPREFIX/lib${PYTHONPATH:+:$PYTHONPATH} ninja -Cbuild_win install &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION



