export NAME="DHEX"
export STATUS=
export URL=https://www.dettus.net/dhex/
export BASENAME=dhex
export DESCRIPTION="DHEX is a more than just another hex editor: It includes a diff mode, which can be used to easily and conveniently compare two binary files. Since it is based on ncurses and is themeable, it can run on any number of systems and scenarios. With its utilization of search logs, it is possible to track changes in different iterations of files easily."
export CATEGORY=
export TYPE=library
export VERSION=0.69
export VERSIONDATE=20250901
wl-showstatus --package-version
export DEPENDENCIES=ncurses
export OPTIONALDEPENDENCIES=
export BUILDDEPENDENCIES=
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=gpl.txt
export LICENSETYPE=GPL
export DOWNLOADURL="https://www.dettus.net/dhex/ dhex_"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
export DOWNLOADSOURCEURL=https://www.dettus.net/dhex/dhex_$VERSION.tar.gz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
wl-showstatus extract
tar xz --force-local -f $TARBALLDIR/$BASENAME/dhex_$VERSION.tar.gz
cd dhex_$VERSION
# fix output.h
patch -ulbf output.h << EOF
@@ -9,3 +9,3 @@

-void initcolors();
+void initcolors(tOutput* output);
 void colorpair(tOutput* output,uicolors uicol,short fg,short bg,int attr);
EOF
# fix missing .exe in Makefile
sed -i.bak -e "s/strip dhex$/&.exe/; s/\(cp dhex\) /\1.exe /" Makefile
wl-showstatus build &&
 make CC=${CC:-gcc} CPPFLAGS="-I$MINGWPREFIX/include/ncurses" LDFLAGS="-s -L$MINGWPREFIX/lib" LIBS="-lncurses" &&
 wl-showstatus install &&
 mkdir -p $INSTALLPREFIX/bin $INSTALLPREFIX/man/man1 $INSTALLPREFIX/man/man5 &&
 make install DESTDIR=$INSTALLPREFIX &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf dhex_$VERSION



