export NAME="Go"
export STATUS=
export URL=https://golang.org/
export BASENAME=go
export DESCRIPTION="Go is an open source programming language that makes it easy to build simple, reliable, and efficient software."
export CATEGORY=development
export TYPE=application
#export VERSION=1.6.1
#export VERSIONDATE=20160415
#export VERSION=1.6.2
#export VERSIONDATE=20160421
#export VERSION=1.6.3
#export VERSIONDATE=20160719
#export VERSION=1.6.4
#export VERSIONDATE=20161202
#export VERSION=1.7
#export VERSIONDATE=20160816
#export VERSION=1.7.1
#export VERSIONDATE=20160908
####./make.bash: line 153: mv: command not found
#export VERSION=1.7.3
#export VERSIONDATE=20161020
#export VERSION=1.7.4
#export VERSIONDATE=20161202
#export VERSION=1.7.5
#export VERSIONDATE=20170127
#export VERSION=1.7.6
#export VERSIONDATE=20170524
#export VERSION=1.8
#export VERSIONDATE=20170217
#export VERSION=1.8.1
#export VERSIONDATE=20170408
#export VERSION=1.8.2
#export VERSIONDATE=20170524
#export VERSION=1.8.3
#export VERSIONDATE=20170525
#export VERSION=1.8.4
#export VERSIONDATE=20171005
#export VERSION=1.8.5
#export VERSIONDATE=20171026
#export VERSION=1.8.6
#export VERSIONDATE=20180123
#export VERSION=1.8.7
#export VERSIONDATE=20180208
#export VERSION=1.9
#export VERSIONDATE=20170827
#export VERSION=1.9.1
#export VERSIONDATE=20171005
#export VERSION=1.9.2
#export VERSIONDATE=20171026
#export VERSION=1.9.3
#export VERSIONDATE=20180123
#export VERSION=1.9.4
#export VERSIONDATE=20180208
#export VERSION=1.9.5
#export VERSIONDATE=20180330
#export VERSION=1.9.6
#export VERSIONDATE=20180502
#export VERSION=1.9.7
#export VERSIONDATE=20180608
#export VERSION=1.10
#export VERSIONDATE=20180217
#export VERSION=1.10.1
#export VERSIONDATE=20180330
#export VERSION=1.10.2
#export VERSIONDATE=20180502
#export VERSION=1.10.3
#export VERSIONDATE=20180819
#export VERSION=1.10.4
#export VERSIONDATE=20180825
#export VERSION=1.10.5
#export VERSIONDATE=20181103
#export VERSION=1.10.6
#export VERSIONDATE=20181214
#export VERSION=1.10.7
#export VERSIONDATE=20181215
#export VERSION=1.10.8
#export VERSIONDATE=20190124
#export VERSION=1.11
#export VERSIONDATE=20180825
#export VERSION=1.11.1
#export VERSIONDATE=20181003
#export VERSION=1.11.2
#export VERSIONDATE=20181103
#export VERSION=1.11.3
#export VERSIONDATE=20181214
#export VERSION=1.11.4
#export VERSIONDATE=20181215
#export VERSION=1.11.5
#export VERSIONDATE=20190125
#export VERSION=1.11.6
#export VERSIONDATE=20190325
#export VERSION=1.11.7
#export VERSIONDATE=20190406
#export VERSION=1.11.8
#export VERSIONDATE=20190412
#export VERSION=1.11.9
#export VERSIONDATE=20190412
#export VERSION=1.11.10
#export VERSIONDATE=20190507
#export VERSION=1.11.11
#export VERSIONDATE=20190612
#export VERSION=1.11.12
#export VERSIONDATE=20190709
#export VERSION=1.11.13
#export VERSIONDATE=20190814
#export VERSION=1.12
#export VERSIONDATE=20190226
#export VERSION=1.12.1
#export VERSIONDATE=20190325
#export VERSION=1.12.2
#export VERSIONDATE=20190406
#export VERSION=1.12.3
#export VERSIONDATE=20190412
#export VERSION=1.12.4
#export VERSIONDATE=20190412
#export VERSION=1.12.5
#export VERSIONDATE=20190507
#export VERSION=1.12.6
#export VERSIONDATE=20190612
#export VERSION=1.12.7
#export VERSIONDATE=20190709
#export VERSION=1.12.8
#export VERSIONDATE=20190814
#export VERSION=1.12.9
#export VERSIONDATE=20190816
#export VERSION=1.12.10
#export VERSIONDATE=20190926
#export VERSION=1.12.12
#export VERSIONDATE=20191018
#export VERSION=1.12.13
#export VERSIONDATE=20191101
#export VERSION=1.12.14
#export VERSIONDATE=20191205
#export VERSION=1.12.15
#export VERSIONDATE=20200110
#export VERSION=1.12.16
#export VERSIONDATE=20200129
#export VERSION=1.12.17
#export VERSIONDATE=20200213
#export VERSION=1.13
#export VERSIONDATE=20190904
#export VERSION=1.13.1
#export VERSIONDATE=20190926
#export VERSION=1.13.3
#export VERSIONDATE=20191018
#export VERSION=1.13.4
#export VERSIONDATE=20191101
#export VERSION=1.13.5
#export VERSIONDATE=20191205
#export VERSION=1.13.6
#export VERSIONDATE=20200110
####The system cannot find the batch label specified - fail
#export VERSION=1.13.7
#export VERSIONDATE=20200129
#export VERSION=1.13.8
#export VERSIONDATE=20200213
#export VERSION=1.13.9
#export VERSIONDATE=20200320
#export VERSION=1.13.10
#export VERSIONDATE=20200409
#export VERSION=1.13.11
#export VERSIONDATE=20200515
#export VERSION=1.13.12
#export VERSIONDATE=20200602
#export VERSION=1.13.13
#export VERSIONDATE=20200715
#export VERSION=1.13.14
#export VERSIONDATE=20200717
#export VERSION=1.13.15
#export VERSIONDATE=20200807
#export VERSION=1.14
#export VERSIONDATE=20200226
#export VERSION=1.14.1
#export VERSIONDATE=20200320
#export VERSION=1.14.2
#export VERSIONDATE=20200409
#export VERSION=1.14.3
#export VERSIONDATE=20200515
#export VERSION=1.14.4
#export VERSIONDATE=20200602
#export VERSION=1.14.5
#export VERSIONDATE=20200715
#export VERSION=1.14.6
#export VERSIONDATE=20200717
#export VERSION=1.14.7
#export VERSIONDATE=20200807
#export VERSION=1.14.8
#export VERSIONDATE=20200902
#export VERSION=1.14.9
#export VERSIONDATE=20200910
#export VERSION=1.14.10
#export VERSIONDATE=20201015
#export VERSION=1.14.11
#export VERSIONDATE=20201106
#export VERSION=1.14.12
#export VERSIONDATE=20201113
#export VERSION=1.14.13
#export VERSIONDATE=20201204
#export VERSION=1.14.14
#export VERSIONDATE=20210120
#export VERSION=1.14.15
#export VERSIONDATE=20210205
#export VERSION=1.15
#export VERSIONDATE=20200812
#export VERSION=1.15.1
#export VERSIONDATE=20200902
#export VERSION=1.15.2
#export VERSIONDATE=20200910
#export VERSION=1.15.3
#export VERSIONDATE=20201015
#export VERSION=1.15.4
#export VERSIONDATE=20201106
#export VERSION=1.15.5
#export VERSIONDATE=20201113
#export VERSION=1.15.6
#export VERSIONDATE=20201204
#export VERSION=1.15.7
#export VERSIONDATE=20210120
#export VERSION=1.15.8
#export VERSIONDATE=20210205
#export VERSION=1.15.9
#export VERSIONDATE=20210311
#export VERSION=1.15.10
#export VERSIONDATE=20210312
#export VERSION=1.15.11
#export VERSIONDATE=20210402
#export VERSION=1.15.12
#export VERSIONDATE=20210407
#export VERSION=1.15.13
#export VERSIONDATE=20210604
#export VERSION=1.15.14
#export VERSIONDATE=20210713
#export VERSION=1.15.15
#export VERSIONDATE=20210806
#export VERSION=1.16
#export VERSIONDATE=20210217
#export VERSION=1.16.1
#export VERSIONDATE=20210311
#export VERSION=1.16.2
#export VERSIONDATE=20210312
#export VERSION=1.16.3
#export VERSIONDATE=20210402
#export VERSION=1.16.4
#export VERSIONDATE=20210507
#export VERSION=1.16.5
#export VERSIONDATE=20210604
#export VERSION=1.16.6
#export VERSIONDATE=20210713
#export VERSION=1.16.8
#export VERSIONDATE=20210910
#export VERSION=1.16.7
#export VERSIONDATE=20210806
#export VERSION=1.16.9
#export VERSIONDATE=20211008
#export VERSION=1.16.10
#export VERSIONDATE=20211105
#export VERSION=1.16.12
#export VERSIONDATE=20211210
#export VERSION=1.16.13
#export VERSIONDATE=20220107
#export VERSION=1.16.14
#export VERSIONDATE=20220211
#export VERSION=1.16.15
#export VERSIONDATE=20220304
#export VERSION=1.17
#export VERSIONDATE=20210817
#export VERSION=1.17.1
#export VERSIONDATE=20210910
#export VERSION=1.17.2
#export VERSIONDATE=20211008
#export VERSION=1.17.3
#export VERSIONDATE=20211105
#export VERSION=1.17.4
#export VERSIONDATE=20211203
#export VERSION=1.17.5
#export VERSIONDATE=20211210
#export VERSION=1.17.6
#export VERSIONDATE=20220107
#export VERSION=1.17.7
#export VERSIONDATE=20220211
#export VERSION=1.17.8
#export VERSIONDATE=20220304
#export VERSION=1.17.9
#export VERSIONDATE=20220413
#export VERSION=1.17.10
#export VERSIONDATE=20220511
#export VERSION=1.17.11
#export VERSIONDATE=20220602
#export VERSION=1.17.12
#export VERSIONDATE=20220713
#export VERSION=1.17.13
#export VERSIONDATE=20220802
#export VERSION=1.18
#export VERSIONDATE=20220316
#export VERSION=1.18.1
#export VERSIONDATE=20220413
#export VERSION=1.18.2
#export VERSIONDATE=20220511
#export VERSION=1.18.3
#export VERSIONDATE=20220602
#export VERSION=1.18.4
#export VERSIONDATE=20220713
#export VERSION=1.18.5
#export VERSIONDATE=20220802
#export VERSION=1.18.6
#export VERSIONDATE=20220907
#export VERSION=1.18.7
#export VERSIONDATE=20221005
#export VERSION=1.18.8
#export VERSIONDATE=20221102
#export VERSION=1.18.9
#export VERSIONDATE=20221207
#export VERSION=1.18.10
#export VERSIONDATE=20230111
#export VERSION=1.19
#export VERSIONDATE=20220803
#export VERSION=1.19.1
#export VERSIONDATE=20220907
#export VERSION=1.19.2
#export VERSIONDATE=20221005
#export VERSION=1.19.3
#export VERSIONDATE=20221102
#export VERSION=1.19.4
#export VERSIONDATE=20221207
#export VERSION=1.19.5
#export VERSIONDATE=20230111
#export VERSION=1.19.6
#export VERSIONDATE=20230215
#export VERSION=1.19.7
#export VERSIONDATE=20230308
#export VERSION=1.19.8
#export VERSIONDATE=20230405
#export VERSION=1.19.9
#export VERSIONDATE=20230503
#export VERSION=1.19.10
#export VERSIONDATE=20230607
#export VERSION=1.19.11
#export VERSIONDATE=20230712
#export VERSION=1.19.12
#export VERSIONDATE=20230802
#export VERSION=1.19.13
#export VERSIONDATE=20230907
#export VERSION=1.20
#export VERSIONDATE=20230202
#export VERSION=1.20.1
#export VERSIONDATE=20230215
#export VERSION=1.20.2
#export VERSIONDATE=20230308
#export VERSION=1.20.3
#export VERSIONDATE=20230405
#export VERSION=1.20.4
#export VERSIONDATE=20230503
#export VERSION=1.20.5
#export VERSIONDATE=20230607
#export VERSION=1.20.6
#export VERSIONDATE=20230712
#export VERSION=1.20.7
#export VERSIONDATE=20230802
#export VERSION=1.20.8
#export VERSIONDATE=20230907
#export VERSION=1.21.0
#export VERSIONDATE=20230809
export VERSION=1.21.1
export VERSIONDATE=20230907
####go tool link: fork/exec R:\winlibs32-11.2.0\go-1.16.6\bin\go\pkg\tool\windows_386\link.exe: Operation did not complete successfully because the file contains a virus or potentially unwanted software.
wl-showstatus --package-version
export DEPENDENCIES=
export OPTIONALDEPENDENCIES=
export BUILDDEPENDENCIES=
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=go/LICENSE
export LICENSETYPE=BSD
export DOWNLOADURL="https://golang.org/dl/ go .src.tar.gz"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
#export DOWNLOADSOURCEURL="https://storage.googleapis.com/golang/go$VERSION.src.tar.gz https://storage.googleapis.com/golang/go$VERSION.windows-$(if gcc --version|grep -q "MinGW-W64"; then echo amd64; else echo 386; fi).zip"
export DOWNLOADSOURCEURL="https://storage.googleapis.com/golang/go$VERSION.src.tar.gz https://storage.googleapis.com/golang/go$VERSION.windows-$(if gcc --version 2> /dev/null | grep -q "x86_64"; then echo amd64; else echo 386; fi).zip"
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
wl-showstatus extract
mkdir -p $BASENAME-$VERSION
tar xz --force-local -f $TARBALLDIR/$BASENAME/go$VERSION.src.tar.gz -C$BASENAME-$VERSION
cd $BASENAME-$VERSION
# extract precompiled version
mkdir -p bin
#unzip -oq $TARBALLDIR/$BASENAME/go$VERSION.windows-$(if gcc --version|grep -q "MinGW-W64"; then echo amd64; else echo 386; fi).zip -dbin
unzip -oq $TARBALLDIR/$BASENAME/go$VERSION.windows-$(if gcc --version|grep -q "x86_64"; then echo amd64; else echo 386; fi).zip -dbin
#export GOROOT_BOOTSTRAP=$(pwd)/bin/go
#export GOROOT=$(pwd)/go
wl-showstatus build &&
 #mkdir -p $INSTALLPREFIX/bin &&
 ## fix missing $INSTALLPREFIX/go/bin/go
 #mkdir -p $INSTALLPREFIX/go/bin &&
 #touch $INSTALLPREFIX/go/bin/go &&
 cd go/src &&
 #GOROOT_FINAL=$MINGWPREFIX/go GOBIN=$INSTALLPREFIX/bin CGO_ENABLED=1 GOOS=windows GOARCH=$(if gcc --version|grep -q "MinGW-W64"; then echo amd64; else echo 386; fi) GOHOSTARCH=$(if gcc --version|grep -q "MinGW-W64"; then echo amd64; else echo 386; fi) CC=$(which gcc.exe) bash make.bash &&
 #GOROOT_FINAL=$MINGWPREFIX/go GOBIN=$INSTALLPREFIX/bin CGO_ENABLED=1 GOOS=windows GOARCH=$(if gcc --version|grep -q "MinGW-W64"; then echo amd64; else echo 386; fi) GOHOSTARCH=$(if gcc --version|grep -q "MinGW-W64"; then echo amd64; else echo 386; fi) CC=$(which gcc.exe) $COMSPEC /c "make.bat" &&
 #GOROOT_FINAL=$MINGWPREFIX/go GOBIN=$INSTALLPREFIX/go/bin CGO_ENABLED=1 GOOS=windows GOARCH=$(if gcc --version|grep -q "x86_64"; then echo amd64; else echo 386; fi) GOHOSTARCH=$(if gcc --version|grep -q "x86_64"; then echo amd64; else echo 386; fi) CC=$(which gcc.exe) $COMSPEC /c "make.bat" &&
 #echo "make.bat" | MAKEFLAGS="-j1" GOROOT_FINAL=$MINGWPREFIX/go GOBIN=$INSTALLPREFIX/go/bin CGO_ENABLED=1 GOOS=windows GOARCH=$(if gcc --version|grep -q "x86_64"; then echo amd64; else echo 386; fi) GOHOSTARCH=$(if gcc --version|grep -q "x86_64"; then echo amd64; else echo 386; fi) CC=$(which gcc.exe) $COMSPEC &&
 #echo "all.bat" | MAKEFLAGS="-j1" GOROOT_BOOTSTRAP=$(pwd)/../../bin/go GOROOT=$(pwd)/../../go GOROOT_FINAL=$MINGWPREFIX/go GOBIN=$INSTALLPREFIX/go/bin CGO_ENABLED=1 GOOS=windows GOARCH=$(if gcc --version|grep -q "x86_64"; then echo amd64; else echo 386; fi) GOHOSTARCH=$(if gcc --version|grep -q "x86_64"; then echo amd64; else echo 386; fi) CC=$(which gcc.exe) $COMSPEC &&
 echo "all.bat" | MAKEFLAGS="-j1" GOROOT_BOOTSTRAP=$(pwd)/../../bin/go GOROOT=$(pwd)/../../go GOROOT_FINAL=$MINGWPREFIX/go GOBIN=$INSTALLPREFIX/go/bin CGO_ENABLED=1 GOOS=windows GOARCH=$(if ${CC:-gcc} --version|grep -q "x86_64"; then echo amd64; else echo 386; fi) GOHOSTARCH=$(if ${CC:-gcc} --version|grep -q "x86_64"; then echo amd64; else echo 386; fi) CC=${CC:-gcc} $COMSPEC &&
 echo "" &&
 cd ../.. &&
 wl-showstatus build-install &&
 # make sure compilation worked
 ls -1 go/bin/go.exe &>/dev/null &&
 mkdir -p $INSTALLPREFIX &&
 cp -rf go $INSTALLPREFIX/ &&
 # make sure installation worked
 #ls -1 $INSTALLPREFIX/bin &>/dev/null &&
 ls -1 $INSTALLPREFIX/go/bin/go.exe &>/dev/null &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION
####To do: check if everything needed is installed
####GOOS=windows GOARCH=amd64 go build
####$MINGWPREFIX/go/bin/go help



## create standalone package
#for F in $(cat $C/var/lib/packages/go/files); do
# echo $F
# mkdir -p $(dirname $F) &&
# if echo $F | grep -q "\.\(exe\|dll\)$"; then
#  copypedeps -r -n $MINGWPREFIX/$F $(dirname $F)
# else
#  cp -f $MINGWPREFIX/$F $F
# fi
#done


## test
#export GOROOT=
#cat > hello.go << EOF
#package main
#import "fmt"
#func main() {
#  fmt.Println("Hello world")
#}
#EOF
#$MINGWPREFIX/go/bin/go build hello.go && ./hello.exe && rm -f hello.exe



## test
#export GOROOT=
#cat > hello.go << EOF
#package main
#import "fmt"
#func main() { 
#  fmt.Println("Hello world!")
#}
#EOF
#$MINGWPREFIX/go/bin/go.exe build -o hello.exe -ldflags="-s -w" hello.go && ./hello.exe && rm -f hello.exe
