#export NAME="evolution-data-server (is in the same as libcamel)"
#export STATUS=
#export URL=http://www.gnome.org/projects/evolution-data-server
#export BASENAME=evolution-data-server
#export DESCRIPTION=""
#export CATEGORY=
#export TYPE=library
#export VERSION=2.32.0
#export VERSIONDATE=20101008
#wl-showstatus --package-version
#export DEPENDANCIES=
#export OPTIONALDEPENDANCIES=
#export BUILDDEPENDANCIES=
#export LICENSEFILE=COPYING
#export LICENSETYPE=
#export DOWNLOADURL="http://ftp.gnome.org/pub/GNOME/sources/evolution-data-server/"
#export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
#export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/gnome/sources/$BASENAME/`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/$BASENAME-$VERSION.tar.bz2
#wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
#wl-wait4deps
#tar xfj $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.bz2
#cd $BASENAME-$VERSION
#  ls -l COPYING*
#wl-showstatus configure &&
#./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM LDFLAGS="-no-undefined -Wl,-no-undefined" &&
# make install-strip &&
# wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && rm -rf $BASENAME-$VERSION



export NAME="Evolution Data Server (contains libcamel,libebook,libecal)"
export STATUS=
export URL=http://freshmeat.net/projects/evolution-data-server/
export BASENAME=evolution-data-server
export DESCRIPTION="Camel is a generic messaging library. It supports the standard messaging system for receiving and sending messages. It is the messaging backend for Evolution."
export CATEGORY=communication
export TYPE=library
#export VERSION=2.26.3
#export VERSION=2.27.3
#export VERSION=2.27.4
#export VERSION=2.27.5
#export VERSION=2.27.90
#export VERSION=2.27.91
#export VERSION=2.27.92
#export VERSION=2.28.0
#export VERSION=2.28.1
####libedataserver/test-source-list.c:210: undefined reference to `e_source_group_peek_sources'
#export VERSION=2.28.2
####libedataserver/e-proxy.c:777: undefined reference to `soup_uri_new'
####libedataserver/e-proxy.c:780: undefined reference to `_SOUP_URI_SCHEME_HTTPS'
#export VERSION=2.28.3.1
#export VERSION=2.30.0
#export VERSIONDATE=20100330
#export VERSION=2.30.1
#export VERSIONDATE=20100426
#export VERSION=2.30.2
#export VERSIONDATE=20100621
#export VERSION=2.30.2.1
#export VERSIONDATE=20100622
#export VERSION=2.30.3
#export VERSIONDATE=20100815
#export VERSION=2.31.1
#export VERSIONDATE=20100504
#export VERSION=2.31.2
#export VERSIONDATE=20100524
#export VERSION=2.31.3
#export VERSIONDATE=20100607
#export VERSION=2.31.3.1
#export VERSIONDATE=20100610
####Requested 'gtk+-2.0 >= 2.20.0' but version of GTK+ is 2.18.8
#export VERSION=2.31.4
#export VERSION=2.31.5
#export VERSION=2.31.6
#export VERSION=2.31.90
#export VERSION=2.31.91
#export VERSION=2.31.92.1
#export VERSION=2.32.0
#export VERSIONDATE=20100928
#export VERSION=2.32.1
#export VERSIONDATE=20101116
#export VERSION=2.32.2
#export VERSIONDATE=20110209
export VERSION=2.32.3
export VERSIONDATE=20110422
export DEPENDANCIES=gtk2,orbit2,libbonobo,gconf,libglade,libxml2,libsoup-2.4,libical,popt,bdb,gperf,libgdata
####configure: error: libgdata 0.7 is not supported, use 0.6 instead
#export VERSION=3.0.0
#export VERSIONDATE=20110404
#export VERSION=3.0.1
#export VERSIONDATE=20110425
#export VERSION=3.0.2
#export VERSIONDATE=20110523
#export VERSION=3.0.2.1
#export VERSIONDATE=20110524
#export VERSION=3.0.3
#export VERSIONDATE=20110831
#export VERSION=3.0.3.1
#export VERSIONDATE=20110922
####camel/camel-url.h:38: error: expected specifier-qualifier-list before 'typedef'
#export VERSION=3.1.1
#export VERSIONDATE=20110509
#export VERSION=3.1.2
#export VERSIONDATE=20110614
#export VERSION=3.1.3
#export VERSIONDATE=20110711
####Requested 'libgdata >= 0.7.0' but version of libgdata is 0.6.4
####camel/camel-url.h:39: error: expected specifier-qualifier-list before 'typedef'
#export VERSION=3.1.4
#export VERSIONDATE=20110724
####camel/camel-service.h:69: error: expected specifier-qualifier-list before 'typedef'
#export VERSION=3.1.5
#export VERSIONDATE=20110815
#export VERSION=3.2.0
#export VERSIONDATE=20110925
#export VERSION=3.2.1
#export VERSIONDATE=20111017
####camel/camel-url.h:39: error: expected specifier-qualifier-list before 'typedef'
#export VERSION=3.2.2
#export VERSIONDATE=20111114
#export VERSION=3.3.1
#export VERSIONDATE=20111024
#export VERSION=3.3.1.1
#export VERSIONDATE=20111027
####Requested 'libgdata >= 0.10' but version of libgdata is 0.9.0
#export VERSION=3.3.2
#export VERSIONDATE=20111121
#export VERSION=3.3.4
#export VERSIONDATE=20120117
#export VERSION=3.3.5
#export VERSIONDATE=20120206
#export VERSION=3.3.90
#export VERSIONDATE=20120220
#export VERSION=3.3.91
#export VERSIONDATE=20120306
#export VERSION=3.3.92
#export VERSIONDATE=20120319
#export VERSION=3.4.0
#export VERSIONDATE=20120326
#export VERSION=3.4.1
#export VERSIONDATE=20120416
#export VERSION=3.4.2
#export VERSIONDATE=20120514
#export VERSION=3.4.3
#export VERSIONDATE=20120618
#export VERSION=3.4.4
#export VERSIONDATE=20120813
#export VERSION=3.5.1
#export VERSIONDATE=20120429
#export VERSION=3.5.3
#export VERSIONDATE=20120625
#export VERSION=3.5.3.1
#export VERSIONDATE=20120701
#export VERSION=3.5.4
#export VERSIONDATE=20120716
#export VERSION=3.5.90
#export VERSIONDATE=20120824
#export VERSION=3.5.91
#export VERSIONDATE=20120902
#export VERSION=3.5.92
#export VERSIONDATE=20120917
####configure: error: NSS headers not found. Use --with-nss-includes to specify the include dir of NSS.
####configure: error: NSS headers not found. Use --with-nss-includes to specify the include dir of NSS.
#export VERSION=3.6.0
#export VERSIONDATE=20120923
#export VERSION=3.6.1
#export VERSIONDATE=20121014
#export VERSION=3.6.2
#export VERSIONDATE=20121112
#export VERSION=3.6.3
#export VERSIONDATE=20130122
#export VERSION=3.6.4
#export VERSIONDATE=20130307
####Requested 'libgdata >= 0.10' but version of libgdata is 0.6.4
#export VERSION=3.7.1
#export VERSIONDATE=20121021
#export VERSION=3.7.2
#export VERSIONDATE=20121118
#export VERSION=3.7.3
#export VERSIONDATE=20121217
#export VERSION=3.7.4
#export VERSIONDATE=20130113
#export VERSION=3.7.5
#export VERSIONDATE=20130203
####configure: error: NSPR headers not found. Use --with-nspr-includes to specify the include dir of NSPR.
#export VERSION=3.8.0
#export VERSIONDATE=20130224
#export VERSION=3.8.1
#export VERSIONDATE=20130415
#export VERSION=3.8.2
#export VERSIONDATE=20130513
#export VERSION=3.8.3
#export VERSIONDATE=20130609
#export VERSION=3.8.4
#export VERSIONDATE=20130724
#export VERSION=3.8.5
#export VERSIONDATE=20130811
#export VERSION=3.9.1
#export VERSIONDATE=20130429
#export VERSION=3.9.2
#export VERSIONDATE=20130527
#export VERSION=3.9.3
#export VERSIONDATE=20130616
#export VERSION=3.9.4
#export VERSIONDATE=20130708
#export VERSION=3.9.5
#export VERSIONDATE=20130729
#export VERSION=3.9.90
#export VERSIONDATE=20130818
#export VERSION=3.10.0
#export VERSIONDATE=20130921
#export VERSION=3.10.1
#export VERSIONDATE=20131014
#export VERSION=3.10.2
#export VERSIONDATE=20131110
#export VERSION=3.10.3
#export VERSIONDATE=20131209
#export VERSION=3.10.4
#export VERSIONDATE=20140210
#export VERSION=3.11.1
#export VERSIONDATE=20131021
#export VERSION=3.11.2
#export VERSIONDATE=20131117
#export VERSION=3.11.3
#export VERSIONDATE=20131217
#export VERSION=3.11.5
#export VERSIONDATE=20140203
####libaccounts-glib not found (or version < 1.4)
####configure: error: NSS headers not found. Use --with-nss-includes to specify the include dir of NSS.
#export VERSION=3.12.0
#export VERSIONDATE=20140323
#export VERSION=3.12.1
#export VERSIONDATE=20140414
#export VERSION=3.12.2
#export VERSIONDATE=20140512
#export VERSION=3.12.3
#export VERSIONDATE=20140609
#export VERSION=3.12.4
#export VERSIONDATE=20140714
#export VERSION=3.12.5
#export VERSIONDATE=20140811
#export VERSION=3.12.6
#export VERSIONDATE=20140909
#####libaccounts-glib not found (or version < 1.4)
#export VERSION=3.12.7
#export VERSIONDATE=20141013
#export VERSION=3.12.7.1
#export VERSIONDATE=20141015
####configure: error: NSS headers not found. Use --with-nss-includes to specify the include dir of NSS.
#export VERSION=3.12.8
#export VERSIONDATE=20141110
#export VERSION=3.12.9
#export VERSIONDATE=20141208
#export VERSION=3.12.10
#export VERSIONDATE=20150112
#export VERSION=3.12.11
#export VERSIONDATE=20150209
####libaccounts-glib not found (or version < 1.4)
#export VERSION=3.13.1
#export VERSIONDATE=20140427
#export VERSION=3.13.2
#export VERSIONDATE=20140526
#export VERSION=3.13.3
#export VERSIONDATE=20140623
####configure: error: NSS headers not found. Use --with-nss-includes to specify the include dir of NSS.
#export VERSION=3.13.4
#export VERSIONDATE=20140729
####libaccounts-glib not found (or version < 1.4)
#export DEPENDANCIES=gtk+,orbit2,libbonobo,gconf,libglade,libxml2,libsoup-2.4,libical,popt,nspr,nss,bdb,libgdata,pthreads,zlib,sqlite3,pcre,gettext,libiconv,openldap,atk,cairo,pango,gdk-pixbuf,glib2,gnome-keyring,libaccounts-glib
#export VERSION=3.13.5
#export VERSIONDATE=20140825
#export VERSION=3.13.6
#export VERSIONDATE=20140922
#export VERSION=3.13.7
#export VERSIONDATE=20141027
#export VERSION=3.13.8
#export VERSIONDATE=20141124
#export VERSION=3.13.9
#export VERSIONDATE=20141222
#export VERSION=3.13.10
#export VERSIONDATE=20150126
#export VERSION=3.16.0
#export VERSIONDATE=20150323
#export VERSION=3.16.1
#export VERSIONDATE=20150413
#export VERSION=3.16.2
#export VERSIONDATE=20150511
#export VERSION=3.16.3
#export VERSIONDATE=20150608
#export VERSION=3.16.4
#export VERSIONDATE=20150714
#export VERSION=3.16.5
#export VERSIONDATE=20150811
#export VERSION=3.17.1
#export VERSIONDATE=20150427
#export VERSION=3.17.2
#export VERSIONDATE=20150525
#export VERSION=3.17.3
#export VERSIONDATE=20150622
#export VERSION=3.17.4
#export VERSIONDATE=20150720
#export VERSION=3.18.0
#export VERSIONDATE=20150921
#export VERSION=3.18.1
#export VERSIONDATE=20151012
#export VERSION=3.18.2
#export VERSIONDATE=20151110
#export VERSION=3.18.3
#export VERSIONDATE=20151214
#export VERSION=3.18.4
#export VERSIONDATE=20160121
#export VERSION=3.18.5
#export VERSIONDATE=20160215
#export VERSION=3.19.1
#export VERSIONDATE=20151030
#export VERSION=3.19.2
#export VERSIONDATE=20151127
#export VERSION=3.19.3
#export VERSIONDATE=20151214
#export VERSION=3.19.4
#export VERSIONDATE=20160121
#export VERSION=3.19.90
#export VERSIONDATE=20160215
#export VERSION=3.19.91
#export VERSIONDATE=20160229
#export VERSION=3.19.92
#export VERSIONDATE=20160314
####libaccounts-glib not found (or version < 1.4)
#export VERSION=3.20.0
#export VERSIONDATE=20160321
#export VERSION=3.20.1
#export VERSIONDATE=20160411
#export VERSION=3.20.2
#export VERSIONDATE=20160509
#export VERSION=3.20.3
#export VERSIONDATE=20160606
#export VERSION=3.20.4
#export VERSIONDATE=20160711
#export VERSION=3.20.5
#export VERSIONDATE=20160808
#export VERSION=3.20.6
#export VERSIONDATE=20161201
#export VERSION=3.21.1
#export VERSIONDATE=20160425
#export VERSION=3.21.2
#export VERSIONDATE=20160523
#export VERSION=3.21.3
#export VERSIONDATE=20160621
#export VERSION=3.21.4
#export VERSIONDATE=20160718
#export VERSION=3.22.0
#export VERSIONDATE=20160919
#export VERSION=3.22.1
#export VERSIONDATE=20161010
#export VERSION=3.22.2
#export VERSIONDATE=20161107
#export VERSION=3.22.3
#export VERSIONDATE=20161213
#export VERSION=3.22.4
#export VERSIONDATE=20170117
#export VERSION=3.22.5
#export VERSIONDATE=20170213
#export VERSION=3.22.6
#export VERSIONDATE=20170313
#export VERSION=3.22.7
#export VERSIONDATE=20170321
#####libedataserver/e-source.c:75:27: fatal error: e-dbus-source.h: No such file or directory
#export VERSION=3.23.1
#export VERSIONDATE=20161025
#export VERSION=3.23.2
#export VERSIONDATE=20161121
#export VERSION=3.23.3
#export VERSIONDATE=20161212
####gcr-3.0 not found (or version < 3.4)
#export VERSION=3.23.4
#export VERSIONDATE=20170116
#export VERSION=3.24.0
#export VERSIONDATE=20170320
#export VERSION=3.24.1
#export VERSIONDATE=20170410
#export VERSION=3.24.2
#export VERSIONDATE=20170410
#export VERSION=3.24.3
#export VERSIONDATE=20170619
#export VERSION=3.24.4
#export VERSIONDATE=20170717
#export VERSION=3.24.5
#export VERSIONDATE=20170815
#export VERSION=3.24.6
#export VERSIONDATE=20170907
#export VERSION=3.24.7
#export VERSIONDATE=20171003
#export VERSION=3.25.1
#export VERSIONDATE=20170424
#export VERSION=3.25.2
#export VERSIONDATE=20170522
#export VERSION=3.25.3
#export VERSIONDATE=20170619
#export VERSION=3.25.4
#export VERSIONDATE=20170717
#export VERSION=3.25.90
#export VERSIONDATE=20170815
#export VERSION=3.26.0
#export VERSIONDATE=20170911
#export VERSION=3.26.1
#export VERSIONDATE=20171003
#export VERSION=3.26.2
#export VERSIONDATE=20171030
#export VERSION=3.26.2.1
#export VERSIONDATE=20171031
#export VERSION=3.26.3
#export VERSIONDATE=20171211
#export VERSION=3.26.4
#export VERSIONDATE=20180108
#export VERSION=3.26.5
#export VERSIONDATE=20180205
#export VERSION=3.26.6
#export VERSIONDATE=20180305
#export VERSION=3.27.1
#export VERSIONDATE=20171016
#export VERSION=3.27.2
#export VERSIONDATE=20171113
#export VERSION=3.27.3
#export VERSIONDATE=20171211
#export VERSION=3.27.4
#export VERSIONDATE=20180108
#export VERSION=3.28.0
#export VERSIONDATE=20180312
#export VERSION=3.28.1
#export VERSIONDATE=20180409
#export VERSION=3.28.2
#export VERSIONDATE=20180507
#export VERSION=3.28.3
#export VERSIONDATE=20180618
#export VERSION=3.28.4
#export VERSIONDATE=20180716
#export VERSION=3.28.5
#export VERSIONDATE=20180731
#export VERSION=3.29.1
#export VERSIONDATE=20180416
#export VERSION=3.29.2
#export VERSIONDATE=20180522
#export VERSION=3.29.3
#export VERSIONDATE=20180618
#export VERSION=3.29.4
#export VERSIONDATE=20180716
#export VERSION=3.29.90
#export VERSIONDATE=20180731
#export VERSION=3.29.91
#export VERSIONDATE=20180813
#export VERSION=3.29.92
#export VERSIONDATE=20180827
#export VERSION=3.30.0
#export VERSIONDATE=20180904
#export VERSION=3.30.1
#export VERSIONDATE=20180924
#export VERSION=3.30.2
#export VERSIONDATE=20181022
#export VERSION=3.30.3
#export VERSIONDATE=20181210
#export VERSION=3.30.4
#export VERSIONDATE=20190107
#export VERSION=3.30.5
#export VERSIONDATE=20190204
#export VERSION=3.31.1
#export VERSIONDATE=20181008
#export VERSION=3.31.2
#export VERSIONDATE=20181112
#export VERSION=3.31.3
#export VERSIONDATE=20181210
#export VERSION=3.31.4
#export VERSIONDATE=20190107
#export VERSION=3.31.90
#export VERSIONDATE=20190204
#export VERSION=3.32.0
#export VERSIONDATE=20190311
#export VERSION=3.32.1
#export VERSIONDATE=20190412
#export VERSION=3.32.2
#export VERSIONDATE=20190506
#export VERSION=3.32.4
#export VERSIONDATE=20190715
#export VERSION=3.32.5
#export VERSIONDATE=20191112
#export VERSION=3.33.1
#export VERSIONDATE=20190422
#export VERSION=3.33.2
#export VERSIONDATE=20190521
#export VERSION=3.33.3
#export VERSIONDATE=20190618
#export VERSION=3.33.4
#export VERSIONDATE=20190715
#export VERSION=3.34.0
#export VERSIONDATE=20190909
#export VERSION=3.34.1
#export VERSIONDATE=20191007
#export VERSION=3.34.2
#export VERSIONDATE=20191122
#export VERSION=3.34.3
#export VERSIONDATE=20200104
#export VERSION=3.34.4
#export VERSIONDATE=20200214
#export VERSION=3.35.1
#export VERSIONDATE=20191011
#export VERSION=3.35.2
#export VERSIONDATE=20191122
#export VERSION=3.35.3
#export VERSIONDATE=20200104
#export VERSION=3.36.0
#export VERSIONDATE=20200306
#export VERSION=3.36.1
#export VERSIONDATE=20200327
#export VERSION=3.36.2
#export VERSIONDATE=20200424
#export VERSION=3.36.3
#export VERSIONDATE=20200530
#export VERSION=3.36.4
#export VERSIONDATE=20200703
#export VERSION=3.36.5
#export VERSIONDATE=20200807
#export VERSION=3.37.1
#export VERSIONDATE=20200424
#export VERSION=3.37.2
#export VERSIONDATE=20200530
#export VERSION=3.37.3
#export VERSIONDATE=20200703
#export VERSION=3.38.0
#export VERSIONDATE=20200911
#export VERSION=3.38.1
#export VERSIONDATE=20201002
#export VERSION=3.38.2
#export VERSIONDATE=20201120
#export VERSION=3.38.3
#export VERSIONDATE=20210108
#export VERSION=3.38.4
#export VERSIONDATE=20210212
#export VERSION=3.39.1
#export VERSIONDATE=20210108
#export VERSION=3.39.2
#export VERSIONDATE=20210212
#export VERSION=3.39.3
#export VERSIONDATE=20210312
#export VERSION=3.40.0
#export VERSIONDATE=20210319
#export VERSION=3.40.1
#export VERSIONDATE=20210430
#export VERSION=3.40.2
#export VERSIONDATE=20210604
#export VERSION=3.40.3
#export VERSIONDATE=20210709
#export VERSION=3.40.4
#export VERSIONDATE=20210813
#export VERSION=3.41.1
#export VERSIONDATE=20210709
#export VERSION=3.41.2
#export VERSIONDATE=20210813
#export VERSION=3.41.3
#export VERSIONDATE=20210903
#export VERSION=3.42.0
#export VERSIONDATE=20210917
#export VERSION=3.42.1
#export VERSIONDATE=20211029
#export VERSION=3.42.2
#export VERSIONDATE=20211203
#export VERSION=3.42.3
#export VERSIONDATE=20220107
#export VERSION=3.42.4
#export VERSIONDATE=20220210
#export VERSION=3.43.1.1
#export VERSIONDATE=20220107
#export VERSION=3.43.2
#export VERSIONDATE=20220210
#export VERSION=3.43.3
#export VERSIONDATE=20220304
#export VERSION=3.44.0
#export VERSIONDATE=20220318
####Cannot find glib-compile-schemas, which is required to build
wl-showstatus --package-version
#export DEPENDANCIES=gtk3,orbit2,libbonobo,gconf,libglade,libxml2,libsoup-2.4,libical,popt,nspr,nss,bdb,libgdata,pthreads,zlib,sqlite3,pcre,gettext,libiconv,openldap,atk,cairo,pango,gdk-pixbuf,glib2,gnome-keyring,libaccounts-glib,nss
export OPTIONALDEPENDANCIES=
export BUILDDEPENDANCIES=
export LICENSEFILE=COPYING
export LICENSETYPE=GPL2
export DOWNLOADURL="http://ftp.gnome.org/pub/GNOME/sources/evolution-data-server/"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
export DOWNLOADSOURCEURL=http://download.gnome.org/sources/evolution-data-server/`echo $VERSION|sed -e "s/^\([0-9]*\.[0-9]*\)\..*$/\1/"`/$BASENAME-$VERSION.tar.bz2
#export DOWNLOADSOURCEURL=http://download.gnome.org/sources/evolution-data-server/`echo $VERSION|sed -e "s/^\([0-9]*\.[0-9]*\)\..*$/\1/"`/$BASENAME-$VERSION.tar.xz
#export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/GNOME/sources/evolution-data-server/`echo $VERSION|sed -e "s/^\([0-9]*\.[0-9]*\)\..*$/\1/"`/$BASENAME-$VERSION.tar.xz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
tar xfj $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.bz2
#tar xfJ $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.xz
cd $BASENAME-$VERSION
# fix missing files (version >= 2.32.2)

# fix detection of libdb
patch -ulbf configure << EOF
--- configure  Tue Jan 12 13:15:42 2010
+++ configure  Tue Jan 12 13:17:10 2010
@@ -16882 +16882 @@
-DB_LIBS="-L\$libdb_prefix/lib -ldb"
+DB_LIBS="-L\$libdb_prefix/lib -ldb -lws2_32 -lpthread"
EOF
## fix error camel/camel-tcp-stream-raw.c when NSS is not available (version >= 2.32.0)
#patch -ulbf camel/camel-tcp-stream-raw.c << EOF
#--- camel/camel-tcp-stream-raw.c  2010-09-13 14:16:52 +0200
#+++ camel/camel-tcp-stream-raw.c  2010-10-17 22:13:52 +0200
#@@ -53,2 +53,5 @@
# #define d(x)
#+#ifndef CAMEL_HAVE_NSS
#+#define camel_operation_cancel_prfd(cc) NULL
#+#endif
#EOF
# fix missing camel_operation_cancel_prfd when NSS is not available (version >= 2.32.0)
patch -ulbf camel/camel-operation.h << EOF
--- camel/camel-operation.h  2010-09-13 14:16:52 +0200
+++ camel/camel-operation.h  2010-10-18 17:31:44 +0200
@@ -59,2 +59,4 @@
 struct PRFileDesc *camel_operation_cancel_prfd(CamelOperation *cc);
+#else
+#define camel_operation_cancel_prfd(cc) NULL
 #endif
EOF
# fix missing network stuff in camel/camel-sasl-gssapi.c
patch -ulbf camel/camel-sasl-gssapi.c << EOF
--- camel/camel-sasl-gssapi.c  2011-01-20 02:54:06 +0100
+++ camel/camel-sasl-gssapi.c  2011-02-09 22:19:18 +0100
@@ -30,5 +30,7 @@

-#include <netdb.h>
 #include <string.h>
+#ifdef G_OS_WIN32
+#include <netdb.h>
 #include <sys/socket.h>
+#endif
 #include <sys/types.h>
EOF
# avoid g_atexit in libedataserver/e-categories.c
mv libedataserver/e-categories.c libedataserver/e-categories.c.bak
sed -e "s/g_atexit/atexit/" libedataserver/e-categories.c.bak > libedataserver/e-categories.c
# fix missing G_UNICODE_COMBINING_MARK in libedataserver/e-data-server-util.c
patch -ulbf libedataserver/e-data-server-util.c << EOF
--- libedataserver/e-data-server-util.c  2011-04-21 21:35:38 +0200
+++ libedataserver/e-data-server-util.c  2012-01-11 11:23:08 +0100
@@ -257,2 +257,3 @@
        case G_UNICODE_UNASSIGNED:
+#ifdef G_UNICODE_COMBINING_MARK
        case G_UNICODE_COMBINING_MARK:
@@ -260,2 +261,3 @@
                return 0;
+#endif
        default:
EOF
## fix camel/camel-tcp-stream.h (version >= 2.32.3)
#patch -ulbf camel/camel-tcp-stream.h << EOF
#--- camel/camel-tcp-stream.h  2011-04-21 21:35:36 +0200
#+++ camel/camel-tcp-stream.h  2012-09-05 11:55:12 +0200
#@@ -140,3 +140,3 @@
#
#-       PRFileDesc *    (*get_file_desc)        (CamelTcpStream *stream);
#+       struct PRFileDesc *    (*get_file_desc)        (CamelTcpStream *stream);
# };
#@@ -151,3 +151,3 @@
#                                                 const CamelSockOptData *data);
#-PRFileDesc  *   camel_tcp_stream_get_file_desc  (CamelTcpStream *stream);
#+struct PRFileDesc  *   camel_tcp_stream_get_file_desc  (CamelTcpStream *stream);
#
#EOF
## fix camel/camel-tcp-stream-raw.h (version >= 2.32.3)
#patch -ulbf camel/camel-tcp-stream-raw.h << EOF
#--- camel/camel-tcp-stream-raw.h  2011-04-21 21:35:36 +0200
#+++ camel/camel-tcp-stream-raw.h  2012-09-05 11:56:04 +0200
#@@ -89,3 +89,3 @@
#
#-void _camel_tcp_stream_raw_replace_file_desc (CamelTcpStreamRaw *raw, PRFileDesc *new_file_desc);
#+void _camel_tcp_stream_raw_replace_file_desc (CamelTcpStreamRaw *raw, struct PRFileDesc *new_file_desc);
#
#EOF
# fix missing in6_addr in libedataserver/e-proxy.c (version >= 2.32.3)
mv libedataserver/e-proxy.c libedataserver/e-proxy.c.bak
echo "#include <ws2tcpip.h>" > libedataserver/e-proxy.c
cat libedataserver/e-proxy.c.bak >> libedataserver/e-proxy.c
# avoid redefinition of imapx_tokenise_struct in camel/providers/imapx/camel-imapx-tokens.txt (version >= 2.32.3)
mv camel/providers/imapx/camel-imapx-tokens.txt camel/providers/imapx/camel-imapx-tokens.txt.bak &&
sed -e "s?^.*imapx_tokenise_struct *(?//&?" camel/providers/imapx/camel-imapx-tokens.txt.bak > camel/providers/imapx/camel-imapx-tokens.txt
# fix problem detecting GNU gettext tools on 64-bit
if ( echo $RUNPLATFORM | grep -q x86_64 ); then
 mv configure configure.bak
 sed -e "s/as_fn_error\(.*GNU gettext tools not found; required for intltool\)/as_echo\1/" configure.bak > configure
fi
# fix proble detecting Python 2.6 (version >= 3.6.0)
mv configure configure.bak2
sed -e "s/\(python3\.0\) \(python2\.5\)/\1 python2.6 \2/" configure.bak2 > configure
## fix problem detecting libdb (version >= 3.8.0)
#mv configure configure.bak3
#sed -e "s/\(-ldb\)/\1-5.3/" configure.bak3 > configure
wl-showstatus configure &&
#INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --without-weather LDFLAGS="-Wl,--allow-multiple-definition" && make install
#INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --without-weather --with-nspr-includes=$MINGWPREFIX/include --disable-ssl --disable-smime --disable-gnome-keyring LDFLAGS="-Wl,--allow-multiple-definition" && make install
#INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --without-weather LDFLAGS="-Wl,-no-undefined" &&
#INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --without-weather CFLAGS="`pkg-config --cflags gconf-2.0` `pkg-config --cflags libbonobo-2.0` `pkg-config --cflags libglade-2.0`" LDFLAGS="-Wl,-no-undefined" &&
#INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --without-weather --disable-ssl --with-nspr-includes=$MINGWPREFIX/include CFLAGS="`pkg-config --cflags gconf-2.0` `pkg-config --cflags libbonobo-2.0` `pkg-config --cflags libglade-2.0`" LDFLAGS="-Wl,-no-undefined -static-libstdc++" &&
#INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --without-weather --disable-ssl --with-nspr-includes=$MINGWPREFIX/include CFLAGS="`pkg-config --cflags gconf-2.0` `pkg-config --cflags libbonobo-2.0` `pkg-config --cflags libglade-2.0`" LDFLAGS="-Wl,-no-undefined" &&
#INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --without-weather --disable-ssl --with-nspr-includes=$MINGWPREFIX/include CFLAGS="`pkg-config --cflags gconf-2.0 && pkg-config --cflags libbonobo-2.0 && pkg-config --cflags libglade-2.0`" LDFLAGS="-Wl,-no-undefined" &&
#INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --without-weather --disable-ssl --with-nspr-includes=$MINGWPREFIX/include CFLAGS="`pkg-config --cflags gconf-2.0 && pkg-config --cflags libbonobo-2.0`"" ""`pkg-config --cflags libglade-2.0`" LDFLAGS="-Wl,-no-undefined -Wl,--enable-auto-import" &&
#INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --without-weather --disable-ssl --with-openldap --with-nspr-includes=$MINGWPREFIX/include LDFLAGS="-Wl,-no-undefined -Wl,--enable-auto-import" &&
#INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --disable-weather --without-weather --disable-ssl --with-openldap --with-nspr-includes=$MINGWPREFIX/include LDFLAGS="-Wl,-no-undefined -Wl,--enable-auto-import" &&
#INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --disable-weather --without-weather --disable-goa --disable-ssl --with-openldap --with-nspr-includes=$MINGWPREFIX/include LDFLAGS="-Wl,-no-undefined -Wl,--enable-auto-import" &&
#INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --disable-weather --without-weather --disable-goa --disable-ssl --with-openldap --with-nspr-includes=$MINGWPREFIX/include --enable-introspection=no LDFLAGS="-Wl,-no-undefined -Wl,--enable-auto-import" &&
#PATH=$PYDIR:$PATH:$PERLDIR/../c/bin INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --disable-weather --disable-goa --with-openldap --with-nspr-includes=$MINGWPREFIX/include/nspr --enable-introspection=no CFLAGS="-I$MINGWPREFIX/include/nspr" LDFLAGS="-Wl,-no-undefined -Wl,--enable-auto-import" &&
#PATH=$PYDIR:$PATH:$PERLDIR/../c/bin INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --disable-weather --without-weather --disable-goa --disable-ssl --with-openldap --with-nspr-includes=$MINGWPREFIX/include/nspr --enable-introspection=no CFLAGS="-I$MINGWPREFIX/include/nspr" LDFLAGS="-Wl,-no-undefined -Wl,--enable-auto-import" &&
PATH=$PYDIR:$PATH:$PERLDIR/../c/bin INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --disable-weather --without-weather --disable-goa --disable-ssl --with-openldap --with-nspr-includes=$MINGWPREFIX/include/nspr --enable-introspection=no CFLAGS="-I$MINGWPREFIX/include/nspr" LDFLAGS="-Wl,-no-undefined -Wl,--enable-auto-import" &&
#PATH=$PYDIR:$PATH:$PERLDIR/../c/bin INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --disable-weather --without-weather --disable-goa --disable-ssl --with-openldap --with-nspr-includes=$MINGWPREFIX/include/nspr --enable-introspection=no --disable-ipv6 --disable-uoa --disable-examples CFLAGS="-I$MINGWPREFIX/include/nspr" LDFLAGS="-Wl,-no-undefined -Wl,--enable-auto-import" &&
#PATH=$PYDIR:$PATH:$PERLDIR/../c/bin INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --disable-weather --without-weather --disable-goa --disable-ssl --with-openldap --with-nspr-includes=$MINGWPREFIX/include/nspr --disable-gtk --disable-google-auth --with-nss-includes=$MINGWPREFIX/include/nss --enable-introspection=no --disable-ipv6 --disable-uoa --disable-examples CFLAGS="-I$MINGWPREFIX/include/nspr" LDFLAGS="-Wl,-no-undefined -Wl,--enable-auto-import" &&
 wl-showstatus build-install &&
 # fix deprecated symbols in glib2
 mv libedataserver/Makefile libedataserver/Makefile.bak &&
 sed -e "s/-DG_DISABLE_DEPRECATED//" libedataserver/Makefile.bak > libedataserver/Makefile &&
 mv servers/groupwise/Makefile servers/groupwise/Makefile.bak &&
 sed -e "s/-DG_DISABLE_DEPRECATED//" servers/groupwise/Makefile.bak > servers/groupwise/Makefile &&
 mv camel/Makefile camel/Makefile.bak &&
 sed -e "s/-DG_DISABLE_DEPRECATED//" camel/Makefile.bak > camel/Makefile &&
 mv camel/providers/imap/Makefile camel/providers/imap/Makefile.bak &&
 sed -e "s/-DG_DISABLE_DEPRECATED//" camel/providers/imap/Makefile.bak > camel/providers/imap/Makefile &&
 mv camel/providers/imapx/Makefile camel/providers/imapx/Makefile.bak &&
 sed -e "s/-DG_DISABLE_DEPRECATED//" camel/providers/imapx/Makefile.bak > camel/providers/imapx/Makefile &&
 mv camel/providers/nntp/Makefile camel/providers/nntp/Makefile.bak &&
 sed -e "s/-DG_DISABLE_DEPRECATED//" camel/providers/nntp/Makefile.bak > camel/providers/nntp/Makefile &&
 mv camel/providers/local/Makefile camel/providers/local/Makefile.bak &&
 sed -e "s/-DG_DISABLE_DEPRECATED//" camel/providers/local/Makefile.bak > camel/providers/local/Makefile &&
 mv camel/providers/groupwise/Makefile camel/providers/groupwise/Makefile.bak &&
 sed -e "s/-DG_DISABLE_DEPRECATED//" camel/providers/groupwise/Makefile.bak > camel/providers/groupwise/Makefile &&
 ( make install-strip || ( make -C camel LIBS="-Wl,--as-needed -lnspr4" && make install-strip ) || ( make -C libedataserver install-strip && make -C servers install-strip && make -C camel install-strip ) ) &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION
####make -C camel LIBS="-Wl,--as-needed -lnspr4"
# to do: fix camel_operation_cancel_prfd in .h file
# mkdir -p sys ; touch netdb.h sys/socket.h
# echo "#include <nspr/prio.h>" > camel/prio.h
# to do: fix .pc files
# to do: remove ASCII 1 characters



#sed -i.bak -e "s/FATAL_ERROR/WARNING/" cmake/modules/FindSMIME.cmake
#PATH=$PYDIR:$PATH cmake.exe -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DGLIB_COMPILE_SCHEMAS:FILEPATH=$(which glib-compile-schemas.exe) -DGETTEXT_MSGMERGE_EXECUTABLE:FILEPATH=$(which msgmerge.exe) -DGETTEXT_MSGFMT_EXECUTABLE:FILEPATH=$(which msgfmt.exe) -DGETTEXT_VERSION_STRING:STRING=$(msgmerge.exe --version|sed -n -e "s/msgmerge.* \([0-9.]*\)$/\1/p") -DWITH_KRB5:BOOL=OFF -DWITH_OPENLDAP:BOOL=OFF -DWITH_NSPR_INCLUDES:PATH=$MINGWPREFIX/include/nspr -DWITH_NSPR_LIBS:PATH=$MINGWPREFIX/lib -DWITH_NSS_INCLUDES:PATH=$MINGWPREFIX/include/nss -DWITH_NSS_LIBS:PATH=$MINGWPREFIX/lib -DENABLE_INTROSPECTION:BOOL=OFF -DENABLE_INSTALLED_TESTS:BOOL=OFF . -LH && echo OK
#-DENABLE_SMIME:BOOL=OFF
#PKG_CONFIG= C_INCLUDE_PATH=$C_INCLUDE_PATH:$MINGWPREFIX/include/nspr:$MINGWPREFIX/include/nss CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:$MINGWPREFIX/include/nspr:$MINGWPREFIX/include/nss cmake.exe -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DGLIB_COMPILE_SCHEMAS:FILEPATH=$(which glib-compile-schemas.exe) -DGETTEXT_MSGMERGE_EXECUTABLE:FILEPATH=$(which msgmerge.exe) -DGETTEXT_MSGFMT_EXECUTABLE:FILEPATH=$(which msgfmt.exe) -DGETTEXT_VERSION_STRING:STRING=$(msgmerge.exe --version|sed -n -e "s/msgmerge.* \([0-9.]*\)$/\1/p") -DWITH_NSPR_INCLUDES:PATH=$MINGWPREFIX/include/nspr -DWITH_NSPR_LIBS:PATH=$MINGWPREFIX/lib -DWITH_NSS_INCLUDES:PATH=$MINGWPREFIX/include/nss -DWITH_NSS_LIBS:PATH=$MINGWPREFIX/lib -DWITH_KRB5:BOOL=OFF -DWITH_OPENLDAP:BOOL=OFF -DENABLE_INTROSPECTION:BOOL=OFF -DENABLE_INSTALLED_TESTS:BOOL=OFF . -LH && echo OK



#export BUILDDEPENDANCIES=cmake,ninja
## fix CMakeLists.txt (version >= 3.38.2)
#patch -ulbf CMakeLists.txt << EOF
#@@ -530,3 +530,3 @@
# set(CMAKE_REQUIRED_LIBRARIES \${ICONV_LIBS})
#-file(TO_NATIVE_PATH "\${CMAKE_BINARY_DIR}/" _binary_dir_with_separator)
#+file(REAL_PATH "\${CMAKE_BINARY_DIR}/" _binary_dir_with_separator)
# CHECK_C_SOURCE_RUNS("#define ICONV_DETECT_BUILD_DIR \\"\${_binary_dir_with_separator}\\"
#EOF
## fix missing src/camel/iconv-detect.h
#gcc -o iconv-detect.exe iconv-detect.c -DICONV_DETECT_BUILD_DIR=\"src/camel/\" -liconv && ./iconv-detect
#mkdir -p build_static build_shared &&
# wl-showstatus configure &&
# #PKG_CONFIG= cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=OFF -DGLIB_COMPILE_SCHEMAS:FILEPATH=$(which glib-compile-schemas.exe) -DGETTEXT_MSGMERGE_EXECUTABLE:FILEPATH=$(which msgmerge.exe) -DGETTEXT_MSGFMT_EXECUTABLE:FILEPATH=$(which msgfmt.exe) -DGETTEXT_VERSION_STRING:STRING=$(msgmerge.exe --version|sed -n -e "s/msgmerge.* \([0-9.]*\)$/\1/p") -DWITH_KRB5:BOOL=OFF -DWITH_OPENLDAP:BOOL=OFF -DWITH_NSPR_INCLUDES:PATH=$MINGWPREFIX/include/nspr -DWITH_NSPR_LIBS:PATH=$MINGWPREFIX/lib -DWITH_NSS_INCLUDES:PATH=$MINGWPREFIX/include/nss -DWITH_NSS_LIBS:PATH=$MINGWPREFIX/lib -DENABLE_INTROSPECTION:BOOL=OFF -DENABLE_INSTALLED_TESTS:BOOL=OFF -S. -Bbuild_static &&
# PKG_CONFIG= cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=OFF -DGLIB_COMPILE_SCHEMAS:FILEPATH=$(which glib-compile-schemas.exe) -DGETTEXT_MSGMERGE_EXECUTABLE:FILEPATH=$(which msgmerge.exe) -DGETTEXT_MSGFMT_EXECUTABLE:FILEPATH=$(which msgfmt.exe) -DGETTEXT_VERSION_STRING:STRING=$(msgmerge.exe --version|sed -n -e "s/msgmerge.* \([0-9.]*\)$/\1/p") -DWITH_KRB5:BOOL=OFF -DWITH_OPENLDAP:BOOL=OFF -DENABLE_OAUTH2=OFF -DENABLE_GOA=OFF -DENABLE_IPV6=OFF -DENABLE_GOOGLE=OFF -DENABLE_INTROSPECTION:BOOL=OFF -DENABLE_INSTALLED_TESTS:BOOL=OFF -S. -Bbuild_static &&
# wl-showstatus configure &&
# #PKG_CONFIG= cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=ON -DGLIB_COMPILE_SCHEMAS:FILEPATH=$(which glib-compile-schemas.exe) -DGETTEXT_MSGMERGE_EXECUTABLE:FILEPATH=$(which msgmerge.exe) -DGETTEXT_MSGFMT_EXECUTABLE:FILEPATH=$(which msgfmt.exe) -DGETTEXT_VERSION_STRING:STRING=$(msgmerge.exe --version|sed -n -e "s/msgmerge.* \([0-9.]*\)$/\1/p") -DWITH_KRB5:BOOL=OFF -DWITH_OPENLDAP:BOOL=OFF -DWITH_NSPR_INCLUDES:PATH=$MINGWPREFIX/include/nspr -DWITH_NSPR_LIBS:PATH=$MINGWPREFIX/lib -DWITH_NSS_INCLUDES:PATH=$MINGWPREFIX/include/nss -DWITH_NSS_LIBS:PATH=$MINGWPREFIX/lib -DENABLE_INTROSPECTION:BOOL=OFF -DENABLE_INSTALLED_TESTS:BOOL=OFF -S. -Bbuild_shared &&
# PKG_CONFIG= cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=ON -DGLIB_COMPILE_SCHEMAS:FILEPATH=$(which glib-compile-schemas.exe) -DGETTEXT_MSGMERGE_EXECUTABLE:FILEPATH=$(which msgmerge.exe) -DGETTEXT_MSGFMT_EXECUTABLE:FILEPATH=$(which msgfmt.exe) -DGETTEXT_VERSION_STRING:STRING=$(msgmerge.exe --version|sed -n -e "s/msgmerge.* \([0-9.]*\)$/\1/p") -DWITH_KRB5:BOOL=OFF -DWITH_OPENLDAP:BOOL=OFF -DENABLE_OAUTH2=OFF -DENABLE_GOA=OFF -DENABLE_IPV6=OFF -DENABLE_GOOGLE=OFF -DENABLE_INTROSPECTION:BOOL=OFF -DENABLE_INSTALLED_TESTS:BOOL=OFF -S. -Bbuild_shared &&
# ## fix execution of Perl and Python scripts
# sed -i.bak -e "s?[^ ]*\\\\bin\\\\intltool-[a-z]* ?$(cygpath -w $PERLDIR/bin/perl.exe|sed -e 's/\\/&&/g') &?; s?[^ ]*\\\\bin\\\\\(gdbus-codegen\|glib-mkenums\) ?$(cygpath -w $PYDIR/python.exe|sed -e 's/\\/&&/g') &?" build_*/build.ninja &&
# #sed -i.bak -e "s?\(COMMAND\|POST_BUILD\)\( *=.*\&\& *\)\([^ ]*\)\(\.py\|glib-mkenums\|g-ir-scanner\)\( \)?\1\2$(echo $PYDIR/python.exe|sed -e "s?^/\([a-zA-Z]\)/?\1:\\\\\\\\?; s?/?\\\\\\\\?g") \3\4\5?" build_*/build.ninja &&
# #wl-showstatus build &&
# #ninja -Cbuild_static &&
# #wl-showstatus build &&
# #ninja -Cbuild_shared &&
# wl-showstatus build-install &&
# windres src/services/evolution-alarm-notify/evolution-alarm-notify-icon.rc -O coff -o build_static/src/services/evolution-alarm-notify/evolution-alarm-notify-icon.o &&
# ninja -Cbuild_static install/strip &&
# wl-showstatus build-install &&
# windres src/services/evolution-alarm-notify/evolution-alarm-notify-icon.rc -O coff -o build_shared/src/services/evolution-alarm-notify/evolution-alarm-notify-icon.o &&
# ninja -Cbuild_shared install/strip &&
#    echo OK
