#export NAME="gtkmm3"
#export STATUS=
#export URL=http://www.gtkmm.org/
#export BASENAME=gtkmm3
#export DESCRIPTION="gtkmm is the official C++ interface for the popular GUI library GTK+."
#export CATEGORY=gui
#export TYPE=library
##export VERSION=3.1.6
##export VERSIONDATE=20110615
##export VERSION=3.1.8
##export VERSIONDATE=20110713
##export VERSION=3.1.10
##export VERSIONDATE=20110727
##export VERSION=3.1.16
##export VERSIONDATE=20110831
##export VERSION=3.1.18
##export VERSIONDATE=20110906
#####Requested 'gtk+-3.0 >= 3.1.10' but version of GTK+ is 3.0.11
##export VERSION=3.2.0
##export VERSIONDATE=20110927
##export VERSION=3.3.2
##export VERSIONDATE=20111026
##export VERSION=3.3.14
##export VERSIONDATE=20120207
##export VERSION=3.3.16
##export VERSIONDATE=20120228
##export VERSION=3.3.18
##export VERSIONDATE=20120306
##export VERSION=3.3.20
##export VERSIONDATE=20120328
#####Requested 'giomm-2.4 >= 2.32.0' but version of giomm is 2.31.20
##export VERSION=3.4.0
##export VERSIONDATE=20120410
##export VERSION=3.4.1
##export VERSIONDATE=20120901
##export VERSION=3.4.2
##export VERSIONDATE=20120929
##export VERSION=3.5.4
##export VERSIONDATE=20120612
##export VERSION=3.5.6
##export VERSIONDATE=20120711
##export VERSION=3.5.12
##export VERSIONDATE=20120831
##export VERSION=3.5.13
##export VERSIONDATE=20120929
##export VERSION=3.6.0
##export VERSIONDATE=20121022
##export VERSION=3.7.10
##export VERSIONDATE=20130225
##export VERSION=3.7.12
##export VERSIONDATE=20130308
#####Requested 'giomm-2.4 >= 2.33.1' but version of giomm is 2.32.0
#####Requested 'gtk+-3.0 >= 3.5.6' but version of GTK+ is 3.4.3
##export VERSION=3.8.0
##export VERSIONDATE=20130417
#export VERSION=3.8.1
#export VERSIONDATE=20130502
##export VERSION=3.9.8
##export VERSIONDATE=20130717
##export VERSION=3.9.10
##export VERSIONDATE=20130805
##export VERSION=3.9.14
##export VERSIONDATE=20130911
##export VERSION=3.9.16
##export VERSIONDATE=20130921
##export VERSION=3.10.0
##export VERSIONDATE=20131011
#####Requested 'giomm-2.4 >= 2.38.0' but version of giomm is 2.36.2
#####Requested 'gtk+-3.0 >= 3.10.0' but version of GTK+ is 3.8.4
##export VERSION=3.10.1
##export VERSIONDATE=20131029
##export VERSION=3.11.4
##export VERSIONDATE=20140118
##export VERSION=3.11.5
##export VERSIONDATE=20140217
##export VERSION=3.11.7
##export VERSIONDATE=20140219
##export VERSION=3.11.8
##export VERSIONDATE=20140304
#####Requested 'gtk+-3.0 >= 3.10.0' but version of GTK+ is 3.8.6
##export VERSION=3.11.9
##export VERSIONDATE=20140318
#####Requested 'gtk+-3.0 >= 3.11.9' but version of GTK+ is 3.8.8
##export VERSION=3.11.10
##export VERSIONDATE=20140406
##export VERSION=3.12.0
##export VERSIONDATE=20140414
##export VERSION=3.13.2
##export VERSIONDATE=20140530
#####Requested 'gtk+-3.0 >= 3.12.0' but version of GTK+ is 3.8.8
##export VERSION=3.13.3
##export VERSIONDATE=20140626
#####Requested 'gtk+-3.0 >= 3.13.3' but version of GTK+ is 3.8.9
##export VERSION=3.13.5
##export VERSIONDATE=20140729
#####Requested 'giomm-2.4 >= 2.41.2' but version of giomm is 2.41.1
##export VERSION=3.13.7
##export VERSIONDATE=20140823
#####Requested 'gtk+-3.0 >= 3.13.7' but version of GTK+ is 3.13.5
##export VERSION=3.13.8
##export VERSIONDATE=20140916
#####Requested 'gtk+-3.0 >= 3.13.8' but version of GTK+ is 3.13.5
##export VERSION=3.14.0
##export VERSIONDATE=20140924
##export VERSION=3.15.2
##export VERSIONDATE=20141205
##export VERSION=3.15.3
##export VERSIONDATE=20141216
##export VERSION=3.15.4
##export VERSIONDATE=20150121
#####Requested 'gtk+-3.0 >= 3.15.3' but version of GTK+ is 3.14.7
##export VERSION=3.15.9
##export VERSIONDATE=20150227
##export VERSION=3.15.10
##export VERSIONDATE=20150306
#####Requested 'giomm-2.4 >= 2.43.90' but version of giomm is 2.42.0
#####Requested 'gtk+-3.0 >= 3.15.9' but version of GTK+ is 3.14.9
##export VERSION=3.16.0
##export VERSIONDATE=20150325
##export VERSION=3.17.3
##export VERSIONDATE=20150608
##export VERSION=3.17.4
##export VERSIONDATE=20150630
##export VERSION=3.17.41
##export VERSIONDATE=20150630
##export VERSION=3.17.50
##export VERSIONDATE=20150722
##export VERSION=3.17.70
##export VERSIONDATE=20150820
##export VERSION=3.17.80
##export VERSIONDATE=20150906
#####Requested 'giomm-2.4 >= 2.45.52' but version of giomm is 2.44.0
#####Requested 'pangomm-1.4 >= 2.37.2' but version of pangomm is 2.36.0
#####Requested 'gtk+-3.0 >= 3.17.8' but version of GTK+ is 3.16.6
##export VERSION=3.18.0
##export VERSIONDATE=20150922
##export VERSION=3.18.1
##export VERSIONDATE=20160415
##export VERSION=3.19.3
##export VERSIONDATE=20151130
##export VERSION=3.19.5
##export VERSIONDATE=20151223
##export VERSION=3.19.6
##export VERSIONDATE=20160114
##export VERSION=3.19.11
##export VERSIONDATE=20160308
##export VERSION=3.19.12
##export VERSIONDATE=20160318
#####Requested 'gtk+-3.0 >= 3.18.0' but version of GTK+ is 3.16.7
##export VERSION=3.20.0
##export VERSIONDATE=20160328
##export VERSION=3.20.1
##export VERSIONDATE=20160415
##export VERSION=3.21.2
##export VERSIONDATE=20160530
##export VERSION=3.21.3
##export VERSIONDATE=20160627
##export VERSION=3.21.4
##export VERSIONDATE=20160721
##export VERSION=3.21.6
##export VERSIONDATE=20160914
##export VERSION=3.22.0
##export VERSIONDATE=20160920
##export VERSION=3.22.1
##export VERSIONDATE=20170623
#####Requested 'giomm-2.4 >= 2.48.0' but version of giomm is 2.46.2
#####Requested 'pangomm-1.4 >= 2.38.2' but version of pangomm is 2.38.1
#####Requested 'gtk+-3.0 >= 3.20.0' but version of GTK+ is 3.16.7
##export VERSION=3.22.2
##export VERSIONDATE=20170913
#####Requested 'pangomm-1.4 >= 2.38.2' but version of pangomm is 2.38.1
##export VERSION=3.22.3
##export VERSIONDATE=20181107
##export VERSION=3.24.0
##export VERSIONDATE=20181109
##export VERSION=3.24.1
##export VERSIONDATE=20190321
#export VERSION=3.24.2
#export VERSIONDATE=20191025
#wl-showstatus --package-version
#export DEPENDENCIES=gtk3,glibmm-2.4,cairomm-1.0,pangomm-1.4,atkmm-1.6
#export OPTIONALDEPENDENCIES=
#export BUILDDEPENDENCIES=
#export OPTIONALBUILDDEPENDENCIES=
#export LICENSEFILE=COPYING
#export LICENSETYPE=LGPL2
#export DOWNLOADURL="http://ftp.gnome.org/pub/GNOME/sources/gtkmm/ gtkmm-"
#export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
##export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/GNOME/sources/gtkmm/`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/gtkmm-$VERSION.tar.bz2
#export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/GNOME/sources/gtkmm/`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/gtkmm-$VERSION.tar.xz
#wl-showstatus download
#wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
#wl-wait4deps
##tar xfj $TARBALLDIR/$BASENAME/gtkmm-$VERSION.tar.bz2
#tar xfJ $TARBALLDIR/$BASENAME/gtkmm-$VERSION.tar.xz
#cd gtkmm-$VERSION
### fix math issues (version >= 3.16.0)
######error: '_hypot' was not declared in this scope
##for F in gdk/gdkmm/*.cc gtk/gtkmm/*.cc; do
## mv $F $F.bak &&
## echo "#undef __STRICT_ANSI__" > $F &&
## cat $F.bak >> $F
##done
### skip making tests
##cat > tests/Makefile.in << EOF
##all:
##depend:
##links:
##generate:
##install:
##install-strip:
##EOF
### remove dependancy on dynamic libstdc++ (GCC 4)
##mv libtool libtool.bak && 
##sed -e "s/-lstdc++/-lstdc++_s -lsupc++/" libtool.bak > libtool &&
### fix detection of newer glibmm version (version >= 3.24.2)
##sed -i.bak -e "s/glibmm-[0-9]\.[0-9]*/$(basename $(ls -1 $MINGWPREFIX/lib/pkgconfig/glibmm-[0-9].*.pc|sort -r)|sed -e "s/\.pc$//")/; s/giomm-[0-9].[0-9]*/$(basename $(ls -1 $MINGWPREFIX/lib/pkgconfig/giomm-[0-9].*.pc|sort -r)|sed -e "s/\.pc$//")/; s/pangomm-[0-9]*.[0-9]*/$(basename $(ls -1 $MINGWPREFIX/lib/pkgconfig/pangomm-[0-9].*.pc|sort -r)|sed -e "s/\.pc$//")/; s/cairomm-[0-9].[0-9]*/$(basename $(ls -1 $MINGWPREFIX/lib/pkgconfig/cairomm-[0-9].*.pc|sort -r)|sed -e "s/\.pc$//")/; s/atkmm-[0-9].[0-9]*/$(basename $(ls -1 $MINGWPREFIX/lib/pkgconfig/atkmm-2.*.pc|sort -r)|sed -e "s/\.pc$//")/" configure
##sed -i.bak -e "s/-lglibmm_generate_extra_defs-[0-9].[0-9]*/$(basename $(ls -1 $MINGWPREFIX/lib/libglibmm_generate_extra_defs-[0-9].*.dll.a|sort -r)|sed -e "s/^lib\(.*\)\.dll\.a$/-l\1/")/" tools/Makefile.in
### fix detection of newer atkmm version (version >= 3.24.2)
##sed -i.bak2 -e "s/atkmm-[0-9]\.[0-9]*/$(basename $(ls -1 $MINGWPREFIX/lib/pkgconfig/atkmm-[0-9].*.pc|sort -r)|sed -e "s/\.pc$//")/; s/giomm-[0-9].[0-9]*/$(basename $(ls -1 $MINGWPREFIX/lib/pkgconfig/giomm-[0-9].*.pc|sort -r)|sed -e "s/\.pc$//")/; s/pangomm-[0-9]*.[0-9]*/$(basename $(ls -1 $MINGWPREFIX/lib/pkgconfig/pangomm-[0-9].*.pc|sort -r)|sed -e "s/\.pc$//")/; s/cairomm-[0-9].[0-9]*/$(basename $(ls -1 $MINGWPREFIX/lib/pkgconfig/cairomm-[0-9].*.pc|sort -r)|sed -e "s/\.pc$//")/; s/atkmm-[0-9].[0-9]*/$(basename $(ls -1 $MINGWPREFIX/lib/pkgconfig/atkmm-2.*.pc|sort -r)|sed -e "s/\.pc$//")/" configure
#wl-showstatus configure &&
##./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --disable-docs --disable-demos LDFLAGS="-static-libstdc++" &&
##./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --disable-docs --disable-examples --disable-demos &&
##./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM &&
##./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --disable-documentation &&
##./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM &&
#./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared &&
# wl-showstatus build-install &&
# #( make install-strip || make -j1 install-strip || make install-strip CXX="${CXX:-g++} -std=c++0x" ) &&
# ( make install-strip || make -j1 install-strip || make install-strip CXX="${CXX:-g++} -std=c++0x" || make install-strip CXX="${CXX:-g++} -std=c++14" ) &&
# #( make install-strip || make -j1 install-strip || make install-strip CXX="${CXX:-g++} -std=c++0x" || make install-strip CXX="${CXX:-g++} -std=c++17" ) &&
# wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf gtkmm-$VERSION



export NAME="gtkmm3"
export STATUS=
export URL=http://www.gtkmm.org/
export BASENAME=gtkmm3
export DESCRIPTION="gtkmm is the official C++ interface for the popular GUI library GTK+."
export CATEGORY=gui
export TYPE=library
#export VERSION=3.24.3
#export VERSIONDATE=20201214
####untracked\gdk/gdkmm/window.h:2714:76: error: 'Cairo::Format' has not been declared
export VERSION=3.24.4
export VERSIONDATE=20210224
wl-showstatus --package-version
export DEPENDENCIES=glib2,gtk3,glibmm-2.4,cairomm-1.0,pangomm-1.4,atkmm-1.6,gdk-pixbuf,libsigcplusplus2,gettext
export OPTIONALDEPENDENCIES=
export BUILDDEPENDENCIES=meson,ninja
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=COPYING
export LICENSETYPE=LGPL2
export DOWNLOADURL="http://ftp.gnome.org/pub/GNOME/sources/gtkmm/ gtkmm-"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
#export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/GNOME/sources/gtkmm/`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/gtkmm-$VERSION.tar.bz2
export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/GNOME/sources/gtkmm/`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/gtkmm-$VERSION.tar.xz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
#tar xfj $TARBALLDIR/$BASENAME/gtkmm-$VERSION.tar.bz2
tar xfJ $TARBALLDIR/$BASENAME/gtkmm-$VERSION.tar.xz
cd gtkmm-$VERSION
-Dc_args=$CFLAGS -Dcpp_args=$CXXFLAGS -Dc_link_args=$LDFLAGS
# fix location of Perl
sed -i.bak -e "s?'perl'?'$(cygpath -w $PERLDIR/bin/perl.exe|sed -e 's/\\/&&&&/g')'?" meson.build
# fix missing gio-unix
sed -i.bak -e "s/gio-unix-/gio-windows-/" meson.build
# fix detection of python3
sed -i.bak -e "s?'python3'?'$(cygpath -w $PYDIR/python.exe|sed -e 's/\\/&&&&/g')'?" meson.build
# fix detection of libraries with newer versions
#sed -i.bak5 -e "s?'glibmm-[0-9.]*'?'$(basename $(ls -1 $MINGWPREFIX/lib/pkgconfig/glibmm-[0-9].*.pc|sort -V|tail -n1)|sed -e "s/\.pc$//")'?; s?\(glibmm_req_minor_ver = '\)[0-9]?\1$(ls -1 $MINGWPREFIX/lib/pkgconfig/glibmm-[0-9].*.pc|sort -V|tail -n1|sed -ne "s/^.*glibmm-2\.\([0-9]*\)\.pc$/\1/p")?" meson.build
#sed -i.bak3 -e "s?'atkmm-[0-9.]*'?'$(basename $(ls -1 $MINGWPREFIX/lib/pkgconfig/atkmm-[0-9].*.pc|sort -V|tail -n1)|sed -e "s/\.pc$//")'?" meson.build
#sed -i.bak2 -e "s?'cairomm-[0-9.]*'?'$(basename $(ls -1 $MINGWPREFIX/lib/pkgconfig/cairomm-[0-9].*.pc|sort -V|tail -n1)|sed -e "s/\.pc$//")'?" meson.build
#sed -i.bak4 -e "s?'pangomm-[0-9.]*'?'$(basename $(ls -1 $MINGWPREFIX/lib/pkgconfig/pangomm-[0-9].*.pc|sort -V|tail -n1)|sed -e "s/\.pc$//")'?" meson.build
#sed -i.bak -e "s?\(glibmm_generate_extra_defs.*-\)2\.4?\1$(ls -1 $MINGWPREFIX/lib/libglibmm_generate_extra_defs-*|sort -V|tail -n1|sed -ne "s/^.*libglibmm_generate_extra_defs-\([0-9.]*\)\(\.dll\)*\.a$/\1/p")?" tools/extra_defs_gen/meson.build
mkdir -p build_both &&
 wl-showstatus configure &&
 PKG_CONFIG= PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library both -Dmaintainer-mode=false -Dbuild-x11-api=false -Dbuild-documentation=false -Dbuild-demos=false -Dbuild-tests=false . build_both &&
 #PKG_CONFIG= PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library both -Dmaintainer-mode=false -Dbuild-x11-api=false -Dbuild-documentation=true -Dbuild-demos=false -Dbuild-tests=false . build_both &&
 ## fix slash/backslash path issue when calling Python from Ninja
 #sed -i.bak -e "s/join_paths/os.path.join/g; /COMMAND =.*python\.exe/ s?\"/\([a-zA-Z]\)/?\"\1:/?; /COMMAND =.*python\.exe/ s?/?\\\\?g" build_*/build.ninja &&
 ## fix Python path issues in meson_exe
 #sed -i.bak -e "s?$PYDIR?$(echo $PYDIR|sed -e "s?^/\([a-zA-Z]\)/?\1:/?")?" build_both/meson-private/meson_exe_python.exe_*.dat &&
 ## fix execution of Python scripts
 #sed -i.bak -e "s?\(COMMAND\|POST_BUILD\)\( *= *\| *=.*\&\& *\)\(\"\{0,1\}[^ ]*\)\(\.py\|glib-mkenums\|g-ir-scanner\|asciidoc\)\(\"\{0,1\} \)?\1\2$(echo $PYDIR/python.exe|sed -e "s?^/\([a-zA-Z]\)/?\1:\\\\\\\\?; s?/?\\\\\\\\?g") \3\4\5?" build_both/build.ninja &&
 ## fix executing shell scripts
 #sed -i.bak -e "s?^\(\s*COMMAND\s*=\s*\)\(\"[^\"]*\.sh\"\)?\1\"$(cygpath -m $(which sh.exe))\" \2?" build_both/build.ninja &&
 wl-showstatus build-install &&
 PATH=$PATH:$PYDIR PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib ninja -Cbuild_both install &&
 #PATH=$PERLDIR/../c/bin:$PERLDIR/bin:$PATH:$PYDIR PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib ninja -Cbuild_both install &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf gtkmm-$VERSION



