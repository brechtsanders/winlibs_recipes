export NAME="GZDoom"
export STATUS=
export URL=https://zdoom.org/about
export BASENAME=gzdoom
export DESCRIPTION="ZDoom is a family of enhanced ports of the Doom engine for running on modern operating systems. It runs on Windows, Linux, and OS X, and adds new features not found in the games as originally published by id Software. GZDoom is the latest version targeting current systems with modern graphics hardware."
export CATEGORY=games
export TYPE=application
export VERSION=4.5.0
export VERSIONDATE=20201203
#export VERSION=4.8.0
#export VERSIONDATE=20220607
wl-showstatus --package-version
export DEPENDANCIES=zlib,libbz2,libjpeg,zmusic
export OPTIONALDEPENDANCIES=
export BUILDDEPENDANCIES=cmake,ninja
export LICENSEFILE=LICENSE
export LICENSETYPE=GPL
export DOWNLOADURL="https://github.com/coelckers/gzdoom/releases/ g"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
export DOWNLOADSOURCEURL=https://github.com/coelckers/gzdoom/archive/g$VERSION.tar.gz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
wl-showstatus extract
tar xfz $TARBALLDIR/$BASENAME/g$VERSION.tar.gz
cd gzdoom-g$VERSION
mkdir -p build_win &&
 wl-showstatus configure &&
 cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX/share/gzdoom -DCMAKE_BUILD_TYPE:STRING=Release -DPKG_CONFIG_EXECUTABLE:FILEPATH=$(which pkg-config.exe) -S. -Bbuild_win &&
 sed -i.bak -e "s/^\s*LINK_LIBRARIES\s*=.*-ladvapi32/& -ldxguid/" build_win/build.ninja &&
 wl-showstatus build-install &&
 ninja -Cbuild_win install/strip &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf gzdoom-g$VERSION



