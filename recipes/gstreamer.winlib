#export NAME="GStreamer"
#export STATUS=
#export URL=http://gstreamer.freedesktop.org/
#export BASENAME=gstreamer
#export DESCRIPTION="GStreamer is a library for constructing graphs of media-handling components. The applications it supports range from simple Ogg/Vorbis playback, audio/video streaming to complex audio (mixing) and video (non-linear editing) processing."
#export CATEGORY=audio,video
#export TYPE=library
##export VERSION=0.10.22
##export VERSION=0.10.23
##export VERSION=0.10.24
##export VERSION=0.10.25
##export VERSION=0.10.26
##export VERSIONDATE=20100211
##export VERSION=0.10.27
##export VERSIONDATE=20100307
##export VERSION=0.10.28
##export VERSIONDATE=20100309
##export VERSION=0.10.29
##export VERSIONDATE=20100428
##export VERSION=0.10.30
##export VERSIONDATE=20100715
##export VERSION=0.10.31
##export VERSIONDATE=20101101
##export VERSION=0.10.32
##export VERSIONDATE=20110122
##export VERSION=0.10.33
##export VERSIONDATE=20110510
##export VERSION=0.10.34
##export VERSIONDATE=20110514
##export VERSION=0.10.35
##export VERSIONDATE=20110616
##export VERSION=0.10.36
##export VERSIONDATE=20120221
##export VERSION=0.11.0
##export VERSIONDATE=20110803
#####.libs/libgstreamer_0.11_la-gstmemory.o: In function `default_mem_new_block':gst/gstmemory.c:151: undefined reference to `gst_memory_alignment'
##export VERSION=0.11.1
##export VERSIONDATE=20110930
##export VERSION=0.11.2
##export VERSIONDATE=20120217
##export VERSION=0.11.3
##export VERSIONDATE=20120322
##export VERSION=0.11.90
##export VERSIONDATE=20120412
##export VERSION=0.11.91
##export VERSIONDATE=20120513
##export VERSION=0.11.92
##export VERSIONDATE=20120607
##export VERSION=0.11.93
##export VERSIONDATE=20120810
##export VERSION=0.11.94
##export VERSIONDATE=20120911
##export VERSION=0.11.99
##export VERSIONDATE=20120918
##export VERSION=1.0.0
##export VERSIONDATE=20120924
##export VERSION=1.0.1
##export VERSIONDATE=20121008
##export VERSION=1.0.2
##export VERSIONDATE=20121025
##export VERSION=1.0.3
##export VERSIONDATE=20121121
##export VERSION=1.0.4
##export VERSIONDATE=20121219
##export VERSION=1.0.5
##export VERSIONDATE=20130108
##export VERSION=1.0.6
##export VERSIONDATE=20130322
##export VERSION=1.0.7
##export VERSIONDATE=20130426
##export VERSION=1.0.8
##export VERSIONDATE=20130715
##export VERSION=1.0.9
##export VERSIONDATE=20130731
##export VERSION=1.0.10
##export VERSIONDATE=20130829
##export VERSION=1.1.1
##export VERSIONDATE=20130606
##export VERSION=1.1.2
##export VERSIONDATE=20130712
##export VERSION=1.1.3
##export VERSIONDATE=20130729
##export VERSION=1.1.4
##export VERSIONDATE=20130828
##export VERSION=1.2.0
##export VERSIONDATE=20130924
##export VERSION=1.2.1
##export VERSIONDATE=20131110
##export VERSION=1.2.2
##export VERSIONDATE=20131228
##export VERSION=1.2.3
##export VERSIONDATE=20140209
##export VERSION=1.2.4
##export VERSIONDATE=20140418
##export VERSION=1.3.1
##export VERSIONDATE=20140504
##export VERSION=1.3.2
##export VERSIONDATE=20140521
##export VERSION=1.3.3
##export VERSIONDATE=20140623
##export VERSION=1.4.0
##export VERSIONDATE=20140721
##export VERSION=1.4.1
##export VERSIONDATE=20140828
##export VERSION=1.4.2
##export VERSIONDATE=20140919
##export VERSION=1.4.3
##export VERSIONDATE=20140924
##export VERSION=1.4.4
##export VERSIONDATE=20141106
##export VERSION=1.4.5
##export VERSIONDATE=20141220
##export VERSION=1.5.1
##export VERSIONDATE=20150606
##export VERSION=1.5.2
##export VERSIONDATE=20150625
##export VERSION=1.6.0
##export VERSIONDATE=20150926
##export VERSION=1.6.1
##export VERSIONDATE=20151101
##export VERSION=1.6.2
##export VERSIONDATE=20151215
##export VERSION=1.6.3
##export VERSIONDATE=20160120
##export VERSION=1.6.4
##export VERSIONDATE=20160415
##export VERSION=1.7.1
##export VERSIONDATE=20151225
##export VERSION=1.7.2
##export VERSIONDATE=20160220
##export VERSION=1.8.0
##export VERSIONDATE=20160324
##export VERSION=1.8.1
##export VERSIONDATE=20160420
##export VERSION=1.8.2
##export VERSIONDATE=20160609
##export VERSION=1.8.3
##export VERSIONDATE=20160819
##export VERSION=1.9.1
##export VERSIONDATE=20160706
##export VERSION=1.9.2
##export VERSIONDATE=201609011
##export VERSION=1.9.90
##export VERSIONDATE=20160930
#####gst/gstcaps.c:131:10: error: redundant redeclaration of '_gst_caps_any' [-Werror=redundant-decls]
##export VERSION=1.10.0
##export VERSIONDATE=20161102
##export VERSION=1.10.1
##export VERSIONDATE=20161118
##export VERSION=1.10.2
##export VERSIONDATE=20161130
##export VERSION=1.10.3
##export VERSIONDATE=20170131
##export VERSION=1.10.4
##export VERSIONDATE=20170224
##export VERSION=1.10.5
##export VERSIONDATE=20170615
##export VERSION=1.11.1
##export VERSIONDATE=20170113
##export VERSION=1.11.2
##export VERSIONDATE=20170225
##export VERSION=1.11.90
##export VERSIONDATE=20170408
##export VERSION=1.11.91
##export VERSIONDATE=20170428
##export VERSION=1.12.0
##export VERSIONDATE=20170505
##export VERSION=1.12.1
##export VERSIONDATE=20170620
##export VERSION=1.12.2
##export VERSIONDATE=20170714
##export VERSION=1.12.3
##export VERSIONDATE=20170919
##export VERSION=1.12.4
##export VERSIONDATE=20171208
##export VERSION=1.12.5
##export VERSIONDATE=20180329
##export VERSION=1.13.1
##export VERSIONDATE=20180216
##export VERSION=1.14.0
##export VERSIONDATE=20180320
##export VERSION=1.14.1
##export VERSIONDATE=20180518
##export VERSION=1.14.2
##export VERSIONDATE=20180720
##export VERSION=1.14.3
##export VERSIONDATE=20180917
##export VERSION=1.14.4
##export VERSIONDATE=20181003
##export VERSION=1.14.5
##export VERSIONDATE=20190530
##export VERSION=1.15.1
##export VERSIONDATE=20190117
#####tests/misc/netclock-replay.c:98:23: error: too many arguments for format [-Werror=format-extra-args]
##export VERSION=1.15.2
##export VERSIONDATE=20190227
##export VERSION=1.16.0
##export VERSIONDATE=20190419
##export VERSION=1.16.1
##export VERSIONDATE=20190924
##export VERSION=1.16.2
##export VERSIONDATE=20191204
#export VERSION=1.16.3
#export VERSIONDATE=20201022
#wl-showstatus --package-version
#export DEPENDENCIES=glib2,libxml2,gettext,libiconv,zlib
#export OPTIONALDEPENDENCIES=
#export BUILDDEPENDENCIES=
#export OPTIONALBUILDDEPENDENCIES=
#export LICENSEFILE=COPYING
#export LICENSETYPE=GPL2
#export DOWNLOADURL="http://gstreamer.freedesktop.org/src/gstreamer/ gstreamer-"
#export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
##export DOWNLOADSOURCEURL=http://gstreamer.freedesktop.org/src/$BASENAME/$BASENAME-$VERSION.tar.bz2
#export DOWNLOADSOURCEURL=http://gstreamer.freedesktop.org/src/$BASENAME/$BASENAME-$VERSION.tar.xz
#wl-showstatus download
#wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
#wl-wait4deps
##tar xj --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.bz2
#tar xJ --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.xz
#cd $BASENAME-$VERSION
### fix plugins/elements/gstfilesrc.c (version 0.10.22)
##patch -ulbf plugins/elements/gstfilesrc.c << EOF
##--- plugins/elements/gstfilesrc.c  Tue Jan  6 00:10:33 2009
##+++ plugins/elements/gstfilesrc.c  Sat Mar  7 14:34:57 2009
##@@ -939,3 +939,3 @@
## {
##-  struct stat stat_results;
##+  struct _stat stat_results;
##   GstFileSrc *src;
##@@ -950,3 +950,3 @@
## 
##-  if (fstat (src->fd, &stat_results) < 0)
##+  if (_fstat (src->fd, &stat_results) < 0)
##     goto could_not_stat;
##@@ -969,3 +969,3 @@
##   GstFileSrc *src = GST_FILE_SRC (basesrc);
##-  struct stat stat_results;
##+  struct _stat stat_results;
## 
##@@ -983,3 +983,3 @@
##   /* check if it is a regular file, otherwise bail out */
##-  if (fstat (src->fd, &stat_results) < 0)
##+  if (_fstat (src->fd, &stat_results) < 0)
##     goto no_stat;
##EOF
## fix gst/gstutils.c (version >= 1.0.5)
#patch -ulbf gst/gstutils.c << EOF
#--- gst/gstutils.c  2012-10-31 00:33:12 +0100
#+++ gst/gstutils.c  2013-02-14 15:57:40 +0100
#@@ -3098,3 +3098,3 @@
# {
#-#if defined (HAVE_POSIX_TIMERS) && defined(HAVE_MONOTONIC_CLOCK)
#+#if defined (HAVE_POSIX_TIMERS) && defined(HAVE_MONOTONIC_CLOCK) && defined(HAVE_CLOCK_GETTIME)
#   struct timespec now;
#EOF
## fix gst/gstsystemclock.c (version >= 1.0.5)
#patch -ulbf gst/gstsystemclock.c << EOF
#--- gst/gstsystemclock.c  2012-10-25 12:54:58 +0200
#+++ gst/gstsystemclock.c  2013-02-14 16:45:46 +0100
#@@ -523,3 +523,3 @@
# #endif /* G_OS_WIN32 */
#-#if !defined HAVE_POSIX_TIMERS
#+#if !defined HAVE_POSIX_TIMERS || !defined HAVE_CLOCK_GETTIME
#   {
#@@ -557,3 +557,3 @@
# #endif /* G_OS_WIN32 */
#-#ifdef HAVE_POSIX_TIMERS
#+#if defined HAVE_POSIX_TIMERS && defined HAVE_CLOCK_GETTIME
#   {
#EOF
## fix  conflicting types for _chsize in plugins/elements/gstfilesink.c (version >= 1.2.0)
#mv plugins/elements/gstfilesink.c plugins/elements/gstfilesink.c.bak
#cat > plugins/elements/gstfilesink.c << EOF
##include <io.h>
##include <unistd.h>
#EOF
#cat plugins/elements/gstfilesink.c.bak >> plugins/elements/gstfilesink.c
### fix DllMain in gst/gst.c (version >= 1.3.1)
##patch -ulbf gst/gst.c << EOF
##--- gst/gst.c  2014-05-04 07:44:50 +0200
##+++ gst/gst.c  2014-05-04 07:45:44 +0200
##@@ -193,5 +193,4 @@
##
## #ifdef G_OS_WIN32
##-BOOL WINAPI DllMain (HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpvReserved);
## BOOL WINAPI
## DllMain (HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpvReserved)
##EOF
### fix missing g_memmove in plugins/elements/gstfilesrc.c (version >= 1.3.1)
##mv plugins/elements/gstfilesrc.c plugins/elements/gstfilesrc.c.bak
##sed -e "s/g_memmove/memmove/" plugins/elements/gstfilesrc.c.bak > plugins/elements/gstfilesrc.c
## fix missing localtime_r in libs/gst/check/libcheck/check_log.c (version >= 1.5.1)
#mv libs/gst/check/libcheck/check_log.c libs/gst/check/libcheck/check_log.c.bak
#cat > libs/gst/check/libcheck/check_log.c << EOF
##define localtime_r(clock,result) (*(result) = *localtime(clock),result)
#EOF
#cat libs/gst/check/libcheck/check_log.c.bak >> libs/gst/check/libcheck/check_log.c
## fix assignment used as condition in gst/gstpoll.c (version >= 1.9.1)
#patch -ulbf gst/gstpoll.c << EOF
#--- gst/gstpoll.c  2016-07-05 16:52:23.000000000 +0200
#+++ gst/gstpoll.c  2016-07-06 16:47:16.938649700 +0200
#@@ -238,3 +238,3 @@
#   errno = 0;
#-  if (status = WaitForSingleObject (set->wakeup_event, INFINITE)) {
#+  if ((status = WaitForSingleObject (set->wakeup_event, INFINITE))) {
#     const gchar *reason = "unknown";
#EOF
### fix type issue in gst/parse/grammar.y (version >= 1.13.1 <= 1.14.3)
##patch -ulbf gst/parse/grammar.y << EOF
##@@ -408,3 +408,3 @@
##     if (pspec != NULL) {
##-      target = g_object_ref (element);
##+      target = (GObject*)g_object_ref (element);
##       GST_CAT_LOG_OBJECT (GST_CAT_PIPELINE, target, "found %s property", value);
##EOF
## fix type issue in gst/gstchildproxy.c (version >= 1.13.1)
#patch -ulbf gst/gstchildproxy.c << EOF
#@@ -212 +212 @@
#-  obj = g_object_ref (object);
#+  obj = (GObject*)g_object_ref (object);
#EOF
## fix unknown %zu format in libs/gst/check/gstharness.c
#patch -ulbf libs/gst/check/gstharness.c << EOF
#@@ -1545,2 +1545,2 @@
#-          "use fallback, pool is configured with a different size (%zu != %zu)",
#-          size, gst_buffer_get_size (ret));
#+          "use fallback, pool is configured with a different size (%lu != %lu)",
#+          (unsigned long)size, (unsigned long)gst_buffer_get_size (ret));
#EOF
## skip making tests (version >= 1.15.1)
#cat > tests/Makefile.in << EOF
#clean:
#all:
#install:
#install-strip:
#EOF
## remove -Wredundant-decls from configure (version >= 1.9.1)
#mv configure configure.bak &&
#sed -e "s/-Wredundant-decls//" configure.bak > configure
#wl-showstatus configure &&
### fix building DLLs on 64-bit
## note: worked with m4-1.4.7-MSYS.tar.bz2 (moved /usr/bin/m4.exe to /bin/m4.exe)
##if ( echo $RUNPLATFORM | grep -q x86_64 ); then
## autoreconf -f -i -I m4 -I $MINGWPREFIX/share/aclocal
##fi
##./autogen.sh
##make check
##./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM && make install
##PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM LDFLAGS="-Wl,--allow-multiple-definition" &&
## make install-strip &&
##PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM CFLAGS="-I$MINGWPREFIX/include/glib-2.0 -I$MINGWPREFIX/lib/glib-2.0/include" LDFLAGS="-Wl,--allow-multiple-definition -Wl,--enable-auto-import" &&
##PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM LDFLAGS="-Wl,--allow-multiple-definition -Wl,--enable-auto-import" &&
##PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --disable-examples --disable-tests --enable-introspection=no LDFLAGS="-Wl,--allow-multiple-definition -Wl,--enable-auto-import" &&
##PERL="$PERLDIR/bin/perl.exe" PYTHON=$PYDIR/python.exe ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --disable-debug --disable-examples --disable-tests --enable-introspection=no LDFLAGS="-Wl,--allow-multiple-definition -Wl,--enable-auto-import" &&
##PERL="$PERLDIR/bin/perl.exe" PYTHON=$PYDIR/python.exe ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --enable-check --disable-debug --disable-examples --disable-tests --enable-introspection=no LDFLAGS="-Wl,--allow-multiple-definition -Wl,--enable-auto-import" &&
##PERL="$PERLDIR/bin/perl.exe" PYTHON=$PYDIR/python.exe ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --enable-check --disable-debug --disable-examples --disable-tests --disable-check --enable-introspection=no LDFLAGS="-Wl,--allow-multiple-definition -Wl,--enable-auto-import" &&
##PERL="$PERLDIR/bin/perl.exe" PYTHON=$PYDIR/python.exe ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --enable-check --disable-debug --disable-examples --disable-tests --disable-introspection LDFLAGS="-Wl,--allow-multiple-definition -Wl,--enable-auto-import" &&
#PERL="$PERLDIR/bin/perl.exe" PYTHON=$PYDIR/python.exe ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --disable-parse --disable-option-parsing --enable-check --disable-debug --disable-examples --disable-tests --disable-introspection LDFLAGS="-Wl,--allow-multiple-definition -Wl,--enable-auto-import" &&
##PERL="$PERLDIR/bin/perl.exe" PYTHON=$PYDIR/python.exe ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --disable-parse --disable-option-parsing --enable-check --disable-debug --disable-examples --disable-failing-tests --disable-tests --disable-introspection LDFLAGS="-Wl,--allow-multiple-definition -Wl,--enable-auto-import" &&
# wl-showstatus build-install &&
# # remove redefinition of __MSVCRT_VERSION__ in config.h (version >= 1.3.2)
# mv config.h config.h.bak &&
# grep -v __MSVCRT_VERSION__ config.h.bak > config.h &&
# # fix error: stray '\' in program
# make -Clibs/gst/controller controller-enumtypes.c && sed -i.bak -e "s/^\\\\#/#/g" libs/gst/controller/controller-enumtypes.c &&
# make -j1 all install-strip C_INCLUDE_PATH=$MINGWPREFIX/include/glib-2.0:$MINGWPREFIX/lib/glib-2.0/include${C_INCLUDE_PATH:+:$C_INCLUDE_PATH} &&
# wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION



export NAME="GStreamer"
export STATUS=
export URL=http://gstreamer.freedesktop.org/
export BASENAME=gstreamer
export DESCRIPTION="GStreamer is a library for constructing graphs of media-handling components. The applications it supports range from simple Ogg/Vorbis playback, audio/video streaming to complex audio (mixing) and video (non-linear editing) processing."
export CATEGORY=audio,video
export TYPE=library
#export VERSION=1.17.1
#export VERSIONDATE=20200620
#export VERSION=1.17.2
#export VERSIONDATE=20200703
#export VERSION=1.18.0
#export VERSIONDATE=20200908
#export VERSION=1.18.1
#export VERSIONDATE=20201027
#export VERSION=1.18.2
#export VERSIONDATE=20201207
#export VERSION=1.18.3
#export VERSIONDATE=20210114
#export VERSION=1.18.4
#export VERSIONDATE=20210316
#export VERSION=1.18.5
#export VERSIONDATE=20210909
#export VERSION=1.18.6
#export VERSIONDATE=20220203
#export VERSION=1.19.1
#export VERSIONDATE=20210601
#export VERSION=1.19.2
#export VERSIONDATE=20210923
#export VERSION=1.19.3
#export VERSIONDATE=20211104
#export VERSION=1.20.0
#export VERSIONDATE=20220204
#export VERSION=1.20.1
#export VERSIONDATE=20220314
#export VERSION=1.20.2
#export VERSIONDATE=20220503
#export VERSION=1.20.3
#export VERSIONDATE=20220616
#export VERSION=1.20.4
#export VERSIONDATE=20221013
#export VERSION=1.20.5
#export VERSIONDATE=20221220
#export VERSION=1.20.6
#export VERSIONDATE=20230224
#export VERSION=1.20.7
#export VERSIONDATE=20230727
#export VERSION=1.21.1
#export VERSIONDATE=20221004
#export VERSION=1.21.2
#export VERSIONDATE=20221108
#export VERSION=1.21.3
#export VERSIONDATE=20221205
#export VERSION=1.22.0
#export VERSIONDATE=20230124
#export VERSION=1.22.1
#export VERSIONDATE=20230305
#export VERSION=1.22.2
#export VERSIONDATE=20230412
#export VERSION=1.22.3
#export VERSIONDATE=20230519
#export VERSION=1.22.4
#export VERSIONDATE=20230621
#export VERSION=1.22.5
#export VERSIONDATE=20230721
#export VERSION=1.22.6
#export VERSIONDATE=20230921
#export VERSION=1.22.7
#export VERSIONDATE=20231114
#export VERSION=1.22.8
#export VERSIONDATE=20231218
#export VERSION=1.22.9
#export VERSIONDATE=20240125
#export VERSION=1.22.10
#export VERSIONDATE=20240214
#export VERSION=1.22.11
#export VERSIONDATE=20240320
#export VERSION=1.22.12
#export VERSIONDATE=20240430
#export VERSION=1.23.1
#export VERSIONDATE=20240207
#export VERSION=1.23.2
#export VERSIONDATE=20240216
#export VERSION=1.24.0
#export VERSIONDATE=20240305
#export VERSION=1.24.1
#export VERSIONDATE=20240322
#export VERSION=1.24.2
#export VERSIONDATE=20240410
#export VERSION=1.24.3
#export VERSIONDATE=20240430
#export VERSION=1.24.4
#export VERSIONDATE=20240529
#export VERSION=1.24.5
#export VERSIONDATE=20240621
#export VERSION=1.24.6
#export VERSIONDATE=20240730
#export VERSION=1.24.7
#export VERSIONDATE=20240821
#export VERSION=1.24.8
#export VERSIONDATE=20240919
#export VERSION=1.24.9
#export VERSIONDATE=20241031
#export VERSION=1.24.10
#export VERSIONDATE=20241204
#export VERSION=1.24.11
#export VERSIONDATE=20250107
#export VERSION=1.24.12
#export VERSIONDATE=20250130
#export VERSION=1.25.1
#export VERSIONDATE=20250115
#export VERSION=1.25.50
#export VERSIONDATE=20250210
#export VERSION=1.26.0
#export VERSIONDATE=20250312
#export VERSION=1.26.1
#export VERSIONDATE=20250425
export VERSION=1.26.2
export VERSIONDATE=20250530
wl-showstatus --package-version
#export DEPENDENCIES=glib2,libxml2,gettext,libiconv,zlib
export DEPENDENCIES=glib2,libxml2,gettext,libiconv,zlib,gobject-introspection
export OPTIONALDEPENDENCIES=
export BUILDDEPENDENCIES=meson,ninja
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=COPYING
export LICENSETYPE=GPL2
export DOWNLOADURL="http://gstreamer.freedesktop.org/src/gstreamer/ gstreamer-"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
export DOWNLOADSOURCEURL=http://gstreamer.freedesktop.org/src/$BASENAME/$BASENAME-$VERSION.tar.xz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
tar xJ --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.xz
cd $BASENAME-$VERSION
# fix MSVC issue
mkdir -p winfix
cp -rf $PYDIR/lib/distutils winfix/
patch -ulbf winfix/distutils/cygwinccompiler.py << EOF
@@ -85,3 +85,3 @@
         else:
-            raise ValueError("Unknown MS Compiler version %s " % msc_ver)
+            return None

EOF
# fix invalid -mdll flag when building with LLVM
if ${CC:-gcc} --version|grep -q "^clang"; then 
 mkdir -p winfix/setuptools
 cp -rf $PYDIR/Lib/site-packages/setuptools/* winfix/setuptools/
 sed -i.bak2 -e "s/-mdll //" winfix/setuptools/_distutils/cygwinccompiler.py
fi
# fix missing FILE_STANDARD_INFO in plugins/elements/gstfilesrc.c (version >= 1.19.1)
mv plugins/elements/gstfilesrc.c plugins/elements/gstfilesrc.c.bak
cat > plugins/elements/gstfilesrc.c << EOF
#if !defined(_WIN32_WINNT) || _WIN32_WINNT < 0x0600
#undef _WIN32_WINNT
#define _WIN32_WINNT 0x0600
#endif
EOF
cat plugins/elements/gstfilesrc.c.bak >> plugins/elements/gstfilesrc.c
mkdir -p build_both &&
 wl-showstatus configure &&
 #PKG_CONFIG= PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library both -Dgst_debug=false -Dextra-checks=enabled -Dintrospection=disabled -Dptp-helper-permissions=none -Dregistry=false -Dbash-completion=disabled -Ddoc=disabled -Dgtk_doc=disabled -Dcheck=disabled -Dexamples=disabled -Dbenchmarks=disabled -Dtests=disabled . build_both &&
 #PKG_CONFIG= PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library both -Dgst_debug=false -Dextra-checks=enabled -Dintrospection=enabled -Dptp-helper-permissions=none -Dregistry=false -Dbash-completion=disabled -Ddoc=disabled -Dgtk_doc=disabled -Dcheck=disabled -Dexamples=disabled -Dbenchmarks=disabled -Dtests=disabled . build_both &&
 #PKG_CONFIG= PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library both -Dgst_debug=false -Dextra-checks=enabled -Dintrospection=enabled -Dptp-helper-permissions=none -Dregistry=false -Dcheck=enabled -Dbash-completion=disabled -Ddoc=disabled -Dgtk_doc=disabled -Dlibunwind=disabled -Dlibdw=disabled -Dexamples=disabled -Dbenchmarks=disabled -Dtests=disabled . build_both &&
 #PKG_CONFIG= PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library both -Dgst_debug=false -Dextra-checks=enabled -Dintrospection=enabled -Dptp-helper-permissions=none -Dregistry=false -Dcheck=enabled -Dbash-completion=disabled -Ddoc=disabled -Dlibunwind=disabled -Dlibdw=disabled -Dexamples=disabled -Dbenchmarks=disabled -Dtests=disabled . build_both &&
 #PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library both -Dgst_debug=false -Dextra-checks=enabled -Dintrospection=enabled -Dptp-helper-permissions=none -Dregistry=false -Dcheck=enabled -Dbash-completion=disabled -Ddoc=disabled -Dlibunwind=disabled -Dlibdw=disabled -Dexamples=disabled -Dbenchmarks=disabled -Dtests=disabled . build_both &&
 PYTHONPATH=$MINGWPREFIX/python/Lib/site-packages${PYTHONPATH:+:$PYTHONPATH} $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library both -Dgst_debug=false -Dextra-checks=enabled -Dintrospection=enabled -Dptp-helper-permissions=none -Dregistry=false -Dcheck=enabled -Dbash-completion=disabled -Ddoc=disabled -Dlibunwind=disabled -Dlibdw=disabled -Dexamples=disabled -Dbenchmarks=disabled -Dtests=disabled . build_both &&
 #-Dpackage-name="" -Dpackage-origin=""
 # fix slash/backslash path issue when calling Python from Ninja
 sed -i.bak -e "s/^\(\s*\)\(COMMAND\)\(\s*=\s*\"\{0,1\}\)[^\"]*\(python\.exe\)\(\"\{0,1\}\)/\1\2\3\4\5/" build_both/build.ninja &&
 #sed -i.bak -e "s?^\(\s*\)\(COMMAND\)\(\s*=\s*\"\{0,1\}\)[^\"]*\(python\.exe\)\(\"\{0,1\}\)?\1\2\3$(cygpath -m $PYDIR/python.exe)\5?" build_both/build.ninja &&
 # fix execution of g-ir-scanner
 sed -i.bak2 -e "s?^\(\s*COMMAND\s*=\s*\)\(\"[^\"]*\/\)\(g-ir-scanner\)\(\"\)?\1\"python.exe\" \2\3\4?" build_both/build.ninja &&
 #sed -i.bak2 -e "s?^\(\s*COMMAND\s*=\s*\)\(\"[^\"]*\/\)\(g-ir-scanner\)\(\"\)?\1\"$(cygpath -m python.exe)\" \2\3\4?" build_both/build.ninja &&
 wl-showstatus build-install &&
 #PKG_CONFIG= PATH=$PYDIR:$PATH PYTHONPATH=$(pwd)/winfix:$MINGWPREFIX/lib${PYTHONPATH:+:$PYTHONPATH} ninja -Cbuild_both install &&
 #PATH=$PYDIR:$PATH PYTHONPATH=$(pwd)/winfix:$MINGWPREFIX/lib${PYTHONPATH:+:$PYTHONPATH} ninja -Cbuild_both install &&
 PATH=$PYDIR:$PATH PYTHONPATH=$MINGWPREFIX/python/Lib/site-packages${PYTHONPATH:+:$PYTHONPATH} ninja -Cbuild_both install &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION



