export NAME="sxmlc"
export STATUS=
export URL=http://sxmlc.sourceforge.net/
export BASENAME=sxmlc
export DESCRIPTION="Simple XML parser written in C, with limited XPath and Unicode support and customizable tags. 'Simple' means that it does not implement all XML specifications, only the most widely used ones."
export CATEGORY=fileformat
export TYPE=library
export VERSION=4.5.1
export VERSIONDATE=20211021
wl-showstatus --package-version
export DEPENDANCIES=
export OPTIONALDEPENDANCIES=
export BUILDDEPENDANCIES=
export LICENSEFILE=LICENSE
export LICENSETYPE=BSD
export DOWNLOADURL="https://sourceforge.net/projects/sxmlc/files/ sxmlc_v"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
export DOWNLOADSOURCEURL=https://downloads.sourceforge.net/project/sxmlc/sxmlc_v$VERSION.zip
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
wl-showstatus extract
mkdir -p $BASENAME-$VERSION
unzip -oq $TARBALLDIR/$BASENAME/sxmlc_v$VERSION.zip -d$BASENAME-$VERSION
cd $BASENAME-$VERSION/sxmlc
wl-showstatus build &&
 gcc -c -o sxmlc.o src/sxmlc.c -I. -O3 &&
 gcc -c -o sxmlsearch.o src/sxmlsearch.c -I. -O3 &&
 ar cru libsxmlc.a sxmlc.o sxmlsearch.o &&
 ( echo "EXPORTS" && nm -f posix --defined-only -p libsxmlc.a | sed -n -e "s/^\([^ ]*\) T .*$/\1/p" ) > sxmlc.def &&
 gcc -shared -s -mwindows -def sxmlc.def -o sxmlc.dll libsxmlc.a -Wl,--out-implib,libsxmlc.dll.a &&
 wl-showstatus install &&
 mkdir -p $INSTALLPREFIX/include $INSTALLPREFIX/lib $INSTALLPREFIX/bin &&
 cp -f src/*.h $INSTALLPREFIX/include/ &&
 cp -f *.a *.def $INSTALLPREFIX/lib/ &&
 cp -f *.dll $INSTALLPREFIX/bin/ &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd ../.. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION



