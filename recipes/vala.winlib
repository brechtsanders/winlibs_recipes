export NAME="vala"
export STATUS=
export URL=http://live.gnome.org/Vala
export BASENAME=vala
export DESCRIPTION="Vala is a new programming language that aims to bring modern programming language features to GNOME developers without imposing any additional runtime requirements and without using a different ABI compared to applications and libraries written in C."
export CATEGORY=development
export TYPE=library
#export VERSION=0.10.2
#export VERSIONDATE=20110101
#export VERSION=0.11.0
#export VERSIONDATE=20101008
#export VERSION=0.10.3
#export VERSIONDATE=20110122
#export VERSION=0.10.4
#export VERSIONDATE=20110312
#export VERSION=0.11.1
#export VERSIONDATE=20101026
#export VERSION=0.11.2
#export VERSIONDATE=20101109
#export VERSION=0.11.3
#export VERSIONDATE=20110105
#export VERSION=0.11.4
#export VERSIONDATE=20110117
#export VERSION=0.11.5
#export VERSIONDATE=20110122
#export VERSION=0.11.6
#export VERSIONDATE=20110216
#export VERSION=0.11.7
#export VERSIONDATE=20110317
#export VERSION=0.12.0
#export VERSIONDATE=20110404
#export VERSION=0.12.1
#export VERSIONDATE=20110601
#export VERSION=0.13.0
#export VERSIONDATE=20110617
#export VERSION=0.13.1
#export VERSIONDATE=20110713
#export VERSION=0.13.2
#export VERSIONDATE=20110817
#export VERSION=0.13.3
#export VERSIONDATE=20110822
#export VERSION=0.13.4
#export VERSIONDATE=20110907
#export VERSION=0.14.0
#export VERSIONDATE=20110918
#export VERSION=0.14.2
#export VERSIONDATE=20120131
#export VERSION=0.15.0
#export VERSIONDATE=20111206
#export VERSION=0.15.1
#export VERSIONDATE=20120127
#export VERSION=0.15.2
#export VERSIONDATE=20120226
#export VERSION=0.16.0
#export VERSIONDATE=20120327
#export VERSION=0.16.1
#export VERSIONDATE=20120624
#export VERSION=0.17.0
#export VERSIONDATE=20120428
#export VERSION=0.17.1
#export VERSIONDATE=20120603
#export VERSION=0.17.2
#export VERSIONDATE=20120624
#export VERSION=0.17.3
#export VERSIONDATE=20120717
#export VERSION=0.17.4
#export VERSIONDATE=20120806
#export VERSION=0.17.5
#export VERSIONDATE=20120824
#export VERSION=0.17.6
#export VERSIONDATE=20120904
#export VERSION=0.17.7
#export VERSIONDATE=20120917
#export VERSION=0.18.0
#export VERSIONDATE=20120925
#export VERSION=0.18.1
#export VERSIONDATE=20121114
#export VERSION=0.19.0
#export VERSIONDATE=20130221
#export VERSION=0.20.0
#export VERSIONDATE=20130327
#export VERSION=0.20.1
#export VERSIONDATE=20130408
#export VERSION=0.21.1
#export VERSIONDATE=20130803
#export VERSION=0.21.2
#export VERSIONDATE=20130914
#export VERSION=0.22.0
#export VERSIONDATE=20130924
#export VERSION=0.22.1
#export VERSIONDATE=20131113
#export VERSION=0.23.1
#export VERSIONDATE=20131223
#export VERSION=0.23.2
#export VERSIONDATE=20140205
#export VERSION=0.23.3
#export VERSIONDATE=20140219
#export VERSION=0.24.0
#export VERSIONDATE=20140325
#export VERSION=0.25.1
#export VERSIONDATE=20140724
#export VERSION=0.25.2
#export VERSIONDATE=20140825
#export VERSION=0.25.3
#export VERSIONDATE=20140901
#export VERSION=0.25.4
#export VERSIONDATE=20140916
#export VERSION=0.26.0
#export VERSIONDATE=20140923
#export VERSION=0.26.1
#export VERSIONDATE=20141013
#export VERSION=0.26.2
#export VERSIONDATE=20150113
#export VERSION=0.27.1
#export VERSIONDATE=20150113
#export VERSION=0.27.2
#export VERSIONDATE=20150319
#export VERSION=0.28.0
#export VERSIONDATE=20150323
#export VERSION=0.28.1
#export VERSIONDATE=20150812
#export VERSION=0.29.1
#export VERSIONDATE=20150528
#export VERSION=0.29.2
#export VERSIONDATE=20150623
#export VERSION=0.29.3
#export VERSIONDATE=20150812
#export VERSION=0.30.0
#export VERSIONDATE=20150918
#export VERSION=0.30.2
#export VERSIONDATE=20160621
#export VERSION=0.32.0
#export VERSIONDATE=20160406
#export VERSION=0.32.1
#export VERSIONDATE=20160621
#export VERSION=0.33.1
#export VERSIONDATE=20160913
#export VERSION=0.34.0
#export VERSIONDATE=20160920
#export VERSION=0.34.1
#export VERSIONDATE=20161010
#export VERSION=0.34.2
#export VERSIONDATE=20161024
#export VERSION=0.34.3
#export VERSIONDATE=20161122
#export VERSION=0.34.4
#export VERSIONDATE=20161205
#export VERSION=0.34.5
#export VERSIONDATE=20170302
#export VERSION=0.34.6
#export VERSIONDATE=20170307
#export VERSION=0.34.7
#export VERSIONDATE=20170321
#export VERSION=0.34.8
#export VERSIONDATE=20170502
#export VERSION=0.34.9
#export VERSIONDATE=20170627
#export VERSION=0.34.10
#export VERSIONDATE=20170907
#export VERSION=0.34.11
#export VERSIONDATE=20171009
#export VERSION=0.34.12
#export VERSIONDATE=20171109
#export VERSION=0.34.13
#export VERSIONDATE=20171211
#export VERSION=0.34.14
#export VERSIONDATE=20180122
#export VERSION=0.34.15
#export VERSIONDATE=20180130
#export VERSION=0.34.16
#export VERSIONDATE=20180204
#export VERSION=0.34.17
#export VERSIONDATE=20180215
#export VERSION=0.34.18
#export VERSIONDATE=20180522
#export VERSION=0.35.1
#export VERSIONDATE=20161122
#export VERSION=0.35.2
#export VERSIONDATE=20161214
#export VERSION=0.35.3
#export VERSIONDATE=20170110
#export VERSION=0.35.5
#export VERSIONDATE=20170214
#export VERSION=0.35.6
#export VERSIONDATE=20170227
#export VERSION=0.35.7
#export VERSIONDATE=20170307
#export VERSION=0.36.0
#export VERSIONDATE=20170318
#export VERSION=0.36.1
#export VERSIONDATE=20170403
#export VERSION=0.36.2
#export VERSIONDATE=20170426
#export VERSION=0.36.3
#export VERSIONDATE=20170503
#export VERSION=0.36.4
#export VERSIONDATE=20170627
#export VERSION=0.36.5
#export VERSIONDATE=20170907
#export VERSION=0.36.6
#export VERSIONDATE=20171009
#export VERSION=0.36.7
#export VERSIONDATE=20171109
#export VERSION=0.36.8
#export VERSIONDATE=20171211
#export VERSION=0.36.9
#export VERSIONDATE=20180122
#export VERSION=0.36.10
#export VERSIONDATE=20180130
#export VERSION=0.36.11
#export VERSIONDATE=20180204
#export VERSION=0.36.12
#export VERSIONDATE=20180215
#export VERSION=0.36.13
#export VERSIONDATE=20180410
#export VERSION=0.36.14
#export VERSIONDATE=20180522
#export VERSION=0.36.15
#export VERSIONDATE=20180716
#export VERSION=0.36.16
#export VERSIONDATE=20180925
#export VERSION=0.36.17
#export VERSIONDATE=20181221
#export VERSION=0.36.18
#export VERSIONDATE=20190304
#export VERSION=0.36.19
#export VERSIONDATE=20190415
#export VERSION=0.36.20
#export VERSIONDATE=20190815
#wl-showstatus --package-version
#export DEPENDENCIES=glib2,gettext
#export OPTIONALDEPENDENCIES=
#export BUILDDEPENDENCIES=
#export OPTIONALBUILDDEPENDENCIES=
#export VERSION=0.37.1
#export VERSIONDATE=20170703
#export VERSION=0.37.2
#export VERSIONDATE=20170815
#export VERSION=0.38.0
#export VERSIONDATE=20170904
#export VERSION=0.38.1
#export VERSIONDATE=20170911
#export VERSION=0.38.2
#export VERSIONDATE=20171009
#export VERSION=0.38.3
#export VERSIONDATE=20171109
#export VERSION=0.38.4
#export VERSIONDATE=20171211
#export VERSION=0.38.5
#export VERSIONDATE=20180122
#export VERSION=0.38.6
#export VERSIONDATE=20180130
#export VERSION=0.38.7
#export VERSIONDATE=20180204
#export VERSION=0.38.8
#export VERSIONDATE=20180215
#export VERSION=0.38.9
#export VERSIONDATE=20180410
#export VERSION=0.38.10
#export VERSIONDATE=20180522
#export VERSION=0.39.1
#export VERSIONDATE=20171127
#export VERSION=0.39.2
#export VERSIONDATE=20171211
#export VERSION=0.39.3
#export VERSIONDATE=20180103
#export VERSION=0.39.4
#export VERSIONDATE=20180109
#export VERSION=0.39.5
#export VERSIONDATE=20180119
#export VERSION=0.39.6
#export VERSIONDATE=20180130
#export VERSION=0.39.7
#export VERSIONDATE=20180204
#export VERSION=0.40.0
#export VERSIONDATE=20180312
#export VERSION=0.40.1
#export VERSIONDATE=20180326
####configure: error: Package requirements (libgvc >= 2.16) were not met: No package 'libgvc' found
####libvaladoc/charts/chartfactory.c:68:11: error: too many arguments to function 'agnode'
#export VERSION=0.40.2
#export VERSIONDATE=20180328
#export VERSION=0.40.3
#export VERSIONDATE=20180409
#export VERSION=0.40.4
#export VERSIONDATE=20180416
#export VERSION=0.40.6
#export VERSIONDATE=20180522
#export VERSION=0.40.7
#export VERSIONDATE=20180620
#export VERSION=0.40.8
#export VERSIONDATE=20180716
#export VERSION=0.40.9
#export VERSIONDATE=20180820
#export VERSION=0.40.10
#export VERSIONDATE=20180825
#export VERSION=0.40.11
#export VERSIONDATE=20181108
#export VERSION=0.40.12
#export VERSIONDATE=20181220
#export VERSION=0.40.13
#export VERSIONDATE=20190122
#export VERSION=0.40.14
#export VERSIONDATE=20190304
#export VERSION=0.40.15
#export VERSIONDATE=20190415
#export VERSION=0.40.16
#export VERSIONDATE=20190806
#export VERSION=0.40.17
#export VERSIONDATE=20191014
#export VERSION=0.40.18
#export VERSIONDATE=20191118
#export VERSION=0.40.19
#export VERSIONDATE=20200209
#export VERSION=0.40.20
#export VERSIONDATE=20200326
#export VERSION=0.40.22
#export VERSIONDATE=20200423
#export VERSION=0.40.23
#export VERSIONDATE=20200520
#export VERSION=0.40.24
#export VERSIONDATE=20201007
#export VERSION=0.40.25
#export VERSIONDATE=20210112
#export VERSION=0.41.90
#export VERSIONDATE=20180726
#export VERSION=0.41.91
#export VERSIONDATE=20180811
#export VERSION=0.41.92
#export VERSIONDATE=20180819
#export VERSION=0.42.0
#export VERSIONDATE=20180901
#export VERSION=0.42.1
#export VERSIONDATE=20180917
#export VERSION=0.42.2
#export VERSIONDATE=20180925
#export VERSION=0.42.3
#export VERSIONDATE=20181107
#export VERSION=0.42.4
#export VERSIONDATE=20181220
#export VERSION=0.42.5
#export VERSIONDATE=20190122
#export VERSION=0.42.6
#export VERSIONDATE=20190304
#export VERSION=0.42.7
#export VERSIONDATE=20190415
####libvaladoc/api/enum.c:93: undefined reference to `vala_get_ccode_type_id'
#export VERSION=0.43.1
#export VERSIONDATE=20181206
#export VERSION=0.43.2
#export VERSIONDATE=20181214
#export VERSION=0.43.4
#export VERSIONDATE=20190107
#export VERSION=0.43.5
#export VERSIONDATE=20190120
#export VERSION=0.43.6
#export VERSIONDATE=20190122
#export VERSION=0.43.90
#export VERSIONDATE=20190203
#export VERSION=0.43.91
#export VERSIONDATE=20190221
#export VERSION=0.43.92
#export VERSIONDATE=20190303
#export VERSION=0.44.0
#export VERSIONDATE=20190309
#export VERSION=0.44.1
#export VERSIONDATE=20190317
#export VERSION=0.44.2
#export VERSIONDATE=20190401
#export VERSION=0.44.3
#export VERSIONDATE=20190412
#export VERSION=0.44.4
#export VERSIONDATE=20190605
#export VERSION=0.44.5
#export VERSIONDATE=20190617
#export VERSION=0.44.6
#export VERSIONDATE=20190716
#export VERSION=0.44.7
#export VERSIONDATE=20190805
#export VERSION=0.44.8
#export VERSIONDATE=20190920
#export VERSION=0.44.9
#export VERSIONDATE=20191009
#export VERSION=0.44.10
#export VERSIONDATE=201911111
#export VERSION=0.44.11
#export VERSIONDATE=20191118
#export VERSION=0.45.1
#export VERSIONDATE=20190521
#export VERSION=0.45.2
#export VERSIONDATE=20190618
#export VERSION=0.45.3
#export VERSIONDATE=20190716
#export VERSION=0.46.0
#export VERSIONDATE=20190905
#export VERSION=0.46.1
#export VERSIONDATE=20190916
#export VERSION=0.46.2
#export VERSIONDATE=20190930
#export VERSION=0.46.3
#export VERSIONDATE=20191009
#export VERSION=0.46.4
#export VERSIONDATE=20191111
#export VERSION=0.46.5
#export VERSIONDATE=20191118
#export VERSION=0.46.6
#export VERSIONDATE=20200209
#export VERSION=0.46.7
#export VERSIONDATE=20200326
#export VERSION=0.46.9
#export VERSIONDATE=20200423
#export VERSION=0.46.10
#export VERSIONDATE=20200520
#export VERSION=0.46.11
#export VERSIONDATE=20200701
#export VERSION=0.46.12
#export VERSIONDATE=20200730
#export VERSION=0.46.13
#export VERSIONDATE=20200810
#export VERSION=0.47.1
#export VERSIONDATE=20191111
#export VERSION=0.47.2
#export VERSIONDATE=20200107
#export VERSION=0.47.3
#export VERSIONDATE=20200122
#export VERSION=0.47.4
#export VERSIONDATE=20200205
#export VERSION=0.48.0
#export VERSIONDATE=20200303
#export VERSION=0.48.1
#export VERSIONDATE=20200311
#export VERSION=0.48.2
#export VERSIONDATE=20200325
#export VERSION=0.48.3
#export VERSIONDATE=20200406
#export VERSION=0.48.4
#export VERSIONDATE=20200422
#export VERSION=0.48.5
#export VERSIONDATE=20200423
#export VERSION=0.48.6
#export VERSIONDATE=20200518
#export VERSION=0.48.7
#export VERSIONDATE=20200630
#export VERSION=0.48.8
#export VERSIONDATE=20200729
#export VERSION=0.48.9
#export VERSIONDATE=20200810
#export VERSION=0.48.10
#export VERSIONDATE=20200906
#export VERSION=0.48.11
#export VERSIONDATE=20200929
#export VERSION=0.48.12
#export VERSIONDATE=20201120
#export VERSION=0.48.13
#export VERSIONDATE=20210111
#export VERSION=0.48.14
#export VERSIONDATE=20210301
#export VERSION=0.48.15
#export VERSIONDATE=20210319
#export VERSION=0.48.16
#export VERSIONDATE=20210409
#export VERSION=0.48.17
#export VERSIONDATE=20210413
#export VERSION=0.49.1
#export VERSIONDATE=20200803
#export VERSION=0.49.2
#export VERSIONDATE=20200810
#export VERSION=0.50.0
#export VERSIONDATE=20200911
#export VERSION=0.50.1
#export VERSIONDATE=20200929
#export VERSION=0.50.2
#export VERSIONDATE=20201120
#export VERSION=0.50.3
#export VERSIONDATE=20210111
#export VERSION=0.50.4
#export VERSIONDATE=20210228
#export VERSION=0.50.5
#export VERSIONDATE=20210319
#export VERSION=0.50.6
#export VERSIONDATE=20210409
#export VERSION=0.50.7
#export VERSIONDATE=20210413
#export VERSION=0.50.8
#export VERSIONDATE=20210502
#export VERSION=0.51.1
#export VERSIONDATE=20210213
#export VERSION=0.51.2
#export VERSIONDATE=20210218
#export VERSION=0.51.3
#export VERSIONDATE=20210228
#export VERSION=0.52.0
#export VERSIONDATE=20210318
#export VERSION=0.52.1
#export VERSIONDATE=20210408
#export VERSION=0.52.2
#export VERSIONDATE=20210412
#export VERSION=0.52.3
#export VERSIONDATE=20210502
#export VERSION=0.52.4
#export VERSIONDATE=20210604
#export VERSION=0.52.5
#export VERSIONDATE=20210816
#export VERSION=0.53.1
#export VERSIONDATE=20210820
#export VERSION=0.53.2
#export VERSIONDATE=20210905
#export VERSION=0.54.0
#export VERSIONDATE=20210917
#export VERSION=0.54.1
#export VERSIONDATE=20210921
#export VERSION=0.54.2
#export VERSIONDATE=20211004
#export VERSION=0.54.3
#export VERSIONDATE=20211030
#export VERSION=0.54.4
#export VERSIONDATE=20211129
#export VERSION=0.54.5
#export VERSIONDATE=20211216
#export VERSION=0.54.6
#export VERSIONDATE=20220109
#export VERSION=0.54.7
#export VERSIONDATE=20220215
#export VERSION=0.55.1
#export VERSIONDATE=20220115
#export VERSION=0.55.2
#export VERSIONDATE=20220128
#export VERSION=0.55.3
#export VERSIONDATE=20220210
#export VERSION=0.56.0
#export VERSIONDATE=20220317
#export VERSION=0.56.1
#export VERSIONDATE=20220423
#export VERSION=0.56.2
#export VERSIONDATE=20220715
#export VERSION=0.56.3
#export VERSIONDATE=20220903
#export VERSION=0.56.4
#export VERSIONDATE=20230212
#export VERSION=0.56.5
#export VERSIONDATE=20230326
#export VERSION=0.56.6
#export VERSIONDATE=20230404
#export VERSION=0.56.7
#export VERSIONDATE=20230418
export VERSION=0.56.8
export VERSIONDATE=20230525
wl-showstatus --package-version
export DEPENDENCIES=glib2,gettext,graphviz
export OPTIONALDEPENDENCIES=
export BUILDDEPENDENCIES=
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=COPYING
export LICENSETYPE=LGPL
export DOWNLOADURL="http://ftp.gnome.org/pub/GNOME/sources/vala/"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
#export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/gnome/sources/$BASENAME/`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/$BASENAME-$VERSION.tar.bz2
export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/gnome/sources/$BASENAME/`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/$BASENAME-$VERSION.tar.xz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
#tar xj --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.bz2
tar xJ --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.xz
cd $BASENAME-$VERSION
# fix missing file
mkdir -p sys
cat > sys/wait.h << EOF
#define SIGKILL 9
#define waitpid(p,s,o) 0       //to do: find proper waitpid() for Windows
EOF
## fix missing strnlen in codegen/valaccodebasemodule.c (except for 64-bit) (version >= 0.11.6)
#if ( echo $RUNPLATFORM | grep -qv x86_64 ) && ( ! gcc --version | grep -q "MinGW-W64" ); then
#mv codegen/valaccodebasemodule.c codegen/valaccodebasemodule.c.bak
#cat > codegen/valaccodebasemodule.c << EOF
#int strnlen (const char* s, int maxlen) 
#{
#  int i;
#  for (i = 0; i < maxlen; i++)
#    if (s[i] == '\0')
#      return i;
#  return -1;
#}
#EOF
#cat codegen/valaccodebasemodule.c.bak >> codegen/valaccodebasemodule.c
#fi
# fix invalid number of parameters to agedge in libvaladoc/charts/simplechartfactory.c (version >= 0.40.2)
patch -ulbf libvaladoc/charts/simplechartfactory.c << EOF
@@ -305 +305 @@
-       _tmp0_ = agedge (graph, parent, child, NULL, 1);
+       _tmp0_ = agedge (graph, parent, child);
EOF
## skip making doc/vala (version <= 0.36.12)
#cat > doc/vala/Makefile.in << EOF
#clean:
#all:
#install:
#install-strip:
#EOF
#cp -f doc/vala/Makefile.in doc/vala/Makefile.am
# fix installation of vala-gen-introspect (without .exe suffix)
sed -i.bak -e "s/\(vala-gen-introspect[^ ]*\)\$(EXEEXT)/\1/g" vapigen/vala-gen-introspect/Makefile.in
wl-showstatus configure &&
 #./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --enable-vapigen --disable-valadoc &&
 ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --enable-vapigen &&
 # fix building DLLs (version >= 0.42.4)
 sed -i.bak -e "s/\(allow_undefined=\)yes/\1no/" libtool &&
 wl-showstatus build-install &&
 echo "#define BUILD_VERSION \"$VERSION\"" >> config.h &&
 ( make all || make -j1 all ) && make install-strip &&
 mv -f $INSTALLPREFIX/lib/bin/* $INSTALLPREFIX/bin/ &&
 rmdir $INSTALLPREFIX/lib/bin &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION



