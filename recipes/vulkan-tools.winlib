export NAME="Vulkan-Tools"
export STATUS=
export URL=https://github.com/KhronosGroup/Vulkan-Tools
export BASENAME=vulkan-tools
export DESCRIPTION="Vulkan Utilities and Tools "
export CATEGORY=graphics,hardware
export TYPE=library
#export VERSION=1.3.207
#export VERSIONDATE=20220309
####vulkaninfo/vulkaninfo.cpp:1050:23: error: '_CRT_ASSERT' was not declared in this scope
#export VERSION=1.3.208
#export VERSIONDATE=20220316
#export VERSION=1.3.209
#export VERSIONDATE=20220324
#export VERSION=1.3.210
#export VERSIONDATE=20220402
#export VERSION=1.3.211
#export VERSIONDATE=20220406
#export VERSION=1.3.212
#export VERSIONDATE=20220422
#export VERSION=1.3.213
#export VERSIONDATE=20220512
#export VERSION=1.3.214
#export VERSIONDATE=20220518
#export VERSION=1.3.215
#export VERSIONDATE=20220525
#export VERSION=1.3.216
#export VERSIONDATE=20220525
#export VERSION=1.3.217
#export VERSIONDATE=20220614
#export VERSION=1.3.218
#export VERSIONDATE=20220617
#export VERSION=1.3.219
#export VERSIONDATE=20220701
#export VERSION=1.3.220
#export VERSIONDATE=20220708
#export VERSION=1.3.221
#export VERSIONDATE=20220715
#export VERSION=1.3.222
#export VERSIONDATE=20220722
#export VERSION=1.3.223
#export VERSIONDATE=20220728
#export VERSION=1.3.224
#export VERSIONDATE=20220805
#export VERSION=1.3.225
#export VERSIONDATE=20220819
#export VERSION=1.3.226
#export VERSIONDATE=20220902
#export VERSION=1.3.227
#export VERSIONDATE=20220909
#export VERSION=1.3.228
#export VERSIONDATE=20220916
#export VERSION=1.3.229
#export VERSIONDATE=20220923
#export VERSION=1.3.230
#export VERSIONDATE=20220930
#export VERSION=1.3.231
#export VERSIONDATE=20221014
#export VERSION=1.3.232
#export VERSIONDATE=20221028
#export VERSION=1.3.233
#export VERSIONDATE=20221104
#export VERSION=1.3.234
#export VERSIONDATE=20221111
#export VERSION=1.3.235
#export VERSIONDATE=20221118
#export VERSION=1.3.236
#export VERSIONDATE=20221202
export VERSION=1.3.237
export VERSIONDATE=20221209
wl-showstatus --package-version
export DEPENDENCIES=vulkan-loader,glslang
export OPTIONALDEPENDENCIES=
export BUILDDEPENDENCIES=cmake,ninja
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=LICENSE.txt
export LICENSETYPE=Apache
export DOWNLOADURL="https://github.com/KhronosGroup/Vulkan-Tools/tags"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
export DOWNLOADSOURCEURL=https://github.com/KhronosGroup/Vulkan-Tools/archive/refs/tags/v$VERSION.tar.gz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
wl-showstatus extract
tar xfz $TARBALLDIR/$BASENAME/v$VERSION.tar.gz
cd Vulkan-Tools-$VERSION
# fix undefined _CRT_ASSERT in vulkaninfo/vulkaninfo.cpp (version >= 1.3.207)
patch -ulbf vulkaninfo/vulkaninfo.cpp << EOF
@@ -1046,3 +1046,3 @@

-#ifdef _WIN32
+#ifdef _MSC_VER
     _set_abort_behavior(0, _WRITE_ABORT_MSG | _CALL_REPORTFAULT);
EOF
mkdir -p build_win &&
 wl-showstatus configure &&
 #cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DVULKAN_HEADERS_INSTALL_DIR:PATH=:PATH=$MINGWPREFIX -DVULKAN_LOADER_INSTALL_DIR:PATH=$MINGWPREFIX -DBUILD_WERROR:BOOL=OFF -S. -Bbuild_win &&
 cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DVULKAN_HEADERS_INSTALL_DIR:PATH=:PATH=$MINGWPREFIX -DVULKAN_LOADER_INSTALL_DIR:PATH=$MINGWPREFIX -DBUILD_WERROR:BOOL=OFF -DVulkanHeaders_INCLUDE_DIR:PATH=$MINGWPREFIX/include -DVulkanRegistry_DIR:PATH=$MINGWPREFIX/include -S. -Bbuild_win &&
 wl-showstatus build-install &&
 ninja -Cbuild_win install/strip &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf Vulkan-Tools-$VERSION



