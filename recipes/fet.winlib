export NAME="FET"
export STATUS=
export URL=https://lalescu.ro/liviu/fet/
export BASENAME=fet
export DESCRIPTION="FET is free software for automatically scheduling the timetable of a school, high-school or university. It uses a fast and efficient timetabling algorithm."
export CATEGORY=school
export TYPE=application
#export VERSION=6.9.5
#export VERSIONDATE=20230820
#export VERSION=6.9.6
#export VERSIONDATE=20230929
#export VERSION=6.9.7
#export VERSIONDATE=20231011
export VERSION=6.10.0
export VERSIONDATE=20231021
wl-showstatus --package-version
#export DEPENDENCIES=qt
export DEPENDENCIES=qt6
export OPTIONALDEPENDENCIES=
export BUILDDEPENDENCIES=
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=COPYING
export LICENSETYPE=
export DOWNLOADURL="https://lalescu.ro/liviu/fet/download.html"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
export DOWNLOADSOURCEURL=https://lalescu.ro/liviu/fet/download/$BASENAME-$VERSION.tar.bz2
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
wl-showstatus extract
tar xj --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.bz2
cd $BASENAME-$VERSION
wl-showstatus configure &&
 #$MINGWPREFIX/qt/bin/qmake -makefile *.pro -spec $MINGWPREFIX/qt/mkspecs/win32-g++ &&
 $MINGWPREFIX/qt6/bin/qmake -makefile *.pro -spec $MINGWPREFIX/qt6/mkspecs/win32-g++ &&
 wl-showstatus build &&
 mingw32-make &&
 wl-showstatus install &&
 mkdir -p $INSTALLPREFIX/share/fet/translations &&
 cp -f *.exe $INSTALLPREFIX/share/fet/ &&
 cp -f *.bat $INSTALLPREFIX/share/fet/ &&
 cp -f [A-Z]* $INSTALLPREFIX/share/fet/ &&
 cp -f translations/*.qm $INSTALLPREFIX/share/fet/translations/ &&
 cp -rf examples $INSTALLPREFIX/share/fet/ &&
 cp -rf doc $INSTALLPREFIX/share/fet/ &&
 wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION
####PATH=$MINGWPREFIX/qt6/bin:$PATH $MINGWPREFIX/share/fet/fet.exe
####PATH=$MINGWPREFIX/qt6/bin:$PATH $MINGWPREFIX/share/fet/fet-cl.exe



# create standalone package
mkdir -p fet/platforms fet/styles fet/tls &&
 PATH=$MINGWPREFIX/qt6/bin:$PATH copypedeps -r $MINGWPREFIX/share/fet/* $MINGWPREFIX/qt6/plugins/platforms/qwindows.dll $MINGWPREFIX/qt6/plugins/styles/q*style.dll $MINGWPREFIX/qt6/plugins/tls/q*backend.dll fet/ &&
 mv -f fet/qwindows.dll fet/platforms &&
 mv -f fet/q*style.dll fet/styles &&
 mv -f fet/q*backend.dll fet/tls &&
 cp -rf $MINGWPREFIX/share/fet/{translations,examples,doc} fet/ &&
    echo OK
