#export NAME="gnome-chess"
#export STATUS=
#export URL=http://www.gnome.org/projects/gnome-chess
#export BASENAME=gnome-chess
#export DESCRIPTION="GNOME Chess is a 2D chess game, where games can be played between a combination of human and computer players."
#export CATEGORY=games
#export TYPE=application
##export VERSION=3.8.0
##export VERSIONDATE=20130327
#####No package 'gl' found
#####Package 'gl', required by 'glu', not found
##export VERSION=3.8.1
##export VERSIONDATE=20130416
##export VERSION=3.8.2
##export VERSIONDATE=20130513
##export VERSION=3.8.2.1
##export VERSIONDATE=20130516
##export VERSION=3.8.3
##export VERSIONDATE=20130610
##export VERSION=3.8.4
##export VERSIONDATE=20130820
##export VERSION=3.8.5
##export VERSIONDATE=20140121
##export VERSION=3.9.1
##export VERSIONDATE=20130429
##export VERSION=3.9.2
##export VERSIONDATE=20130528
##export VERSION=3.9.4
##export VERSIONDATE=20130709
##export VERSION=3.9.5
##export VERSIONDATE=20130730
#####src/gnome-chess.c:5357:51: error: expected ')' before '(' token
#####src/chess-view-3d.c:8:20: fatal error: GL/glx.h: No such file or directory
##export VERSION=3.10.0
##export VERSIONDATE=20130923
##export VERSION=3.10.1
##export VERSIONDATE=20131012
##export VERSION=3.10.1.1
##export VERSIONDATE=20131014
##export VERSION=3.10.2
##export VERSIONDATE=20131111
##export VERSION=3.10.3
##export VERSIONDATE=20140121
##export VERSION=3.10.4
##export VERSIONDATE=20140623
#####src/gnome-chess.c:6609:51: error: expected ')' before '(' token
#####G_MODULE_EXPORT preferences_response_cb (_tmp0_, (gint) GTK_RESPONSE_CANCEL, self);
##export VERSION=3.11.1
##export VERSIONDATE=20131028
##export VERSION=3.11.2
##export VERSIONDATE=20131117
##export VERSION=3.11.3
##export VERSIONDATE=20131217
#####src/chess-view-3d.c:17:20: fatal error: GL/glx.h: No such file or directory
##export VERSION=3.11.4
##export VERSIONDATE=20140113
##export VERSION=3.12.0
##export VERSIONDATE=20140324
#####Requested 'gtk+-3.0 >= 3.10' but version of GTK+ is 3.8.8
##export VERSION=3.12.1
##export VERSIONDATE=20140418
##export VERSION=3.12.2
##export VERSIONDATE=20140512
##export VERSION=3.12.3
##export VERSIONDATE=20140627
#####Requested 'gtk+-3.0 >= 3.10' but version of GTK+ is 3.8.9
##export VERSION=3.13.1
##export VERSIONDATE=20140427
##export VERSION=3.13.4
##export VERSIONDATE=20140721
#####Requested 'gtk+-3.0 >= 3.12' but version of GTK+ is 3.8.9
##export VERSION=3.14.0
##export VERSIONDATE=20140922
#####src/gnome-chess.c:6403:51: error: expected ')' before '(' token
##export VERSION=3.14.1
##export VERSIONDATE=20141110
##export VERSION=3.14.2
##export VERSIONDATE=20141217
##export VERSION=3.14.3
##export VERSIONDATE=20150222
##export VERSION=3.15.3
##export VERSIONDATE=20141217
#####/home/mcatanzaro/jhbuild/checkout/gnome-chess/src/gnome-chess.vala: In function 'preferences_delete_event_cb':
#####/home/mcatanzaro/jhbuild/checkout/gnome-chess/src/gnome-chess.vala:1933:51: error: expected ')' before '(' token
##export VERSION=3.15.4
##export VERSIONDATE=20150119
#####ImportError: No module named libxml2
##export VERSION=3.16.0
##export VERSIONDATE=20150320
#####Requested 'gtk+-3.0 >= 3.15.0' but version of GTK+ is 3.14.8
##export VERSION=3.16.1
##export VERSIONDATE=20150413
##export VERSION=3.16.2
##export VERSIONDATE=20150509
##export VERSION=3.17.1
##export VERSIONDATE=20150428
##export VERSION=3.17.2
##export VERSIONDATE=20150525
##export VERSION=3.17.3
##export VERSIONDATE=20150622
##export VERSION=3.17.4
##export VERSIONDATE=20150720
##export VERSION=3.18.0
##export VERSIONDATE=20150922
##export VERSION=3.19.2
##export VERSIONDATE=20151122
##export VERSION=3.19.2
##export VERSIONDATE=20151218
##export VERSION=3.19.4
##export VERSIONDATE=20160121
#####src/gnome-chess.c:6315:18: error: conflicting types for 'clock_type_changed_cb'
##export VERSION=3.20.0
##export VERSIONDATE=20160321
#export VERSION=3.20.1
#export VERSIONDATE=20160507
##export VERSION=3.21.3
##export VERSIONDATE=20160621
#####Requested 'gtk+-3.0 >= 3.19.0' but version of GTK+ is 3.16.7
##export VERSION=3.22.0
##export VERSIONDATE=20160921
##export VERSION=3.22.2
##export VERSIONDATE=20161107
#####msgfmt.exe: cannot locate ITS rules for gnome-chess.appdata.xml.in
##export VERSION=3.24.0
##export VERSIONDATE=20170322
##export VERSION=3.24.1
##export VERSIONDATE=20170413
##export VERSION=3.25.4
##export VERSIONDATE=20170717
##export VERSION=3.26.0
##export VERSIONDATE=20170909
#export DEPENDENCIES=glib2,gtk3,librsvg,sqlite3,libx11,vala
#export OPTIONALDEPENDENCIES=
#export BUILDDEPENDENCIES=itstool
#export OPTIONALBUILDDEPENDENCIES=
#####src/gnome-chess.vala:1871:18: error: conflicting types for 'clock_type_changed_cb'
#####src/gnome-chess.c:423:22: note: previous declaration of 'clock_type_changed_cb' was here
##export VERSION=3.27.2
##export VERSIONDATE=20171116
##export VERSION=3.28.0
##export VERSIONDATE=20180311
##export VERSION=3.28.1
##export VERSIONDATE=20180410
##export VERSION=3.29.1
##export VERSIONDATE=20180425
##export VERSION=3.29.90
##export VERSIONDATE=20180728
##export VERSION=3.30.0
##export VERSIONDATE=20180903
##export VERSION=3.30.1
##export VERSIONDATE=20190205
##export VERSION=3.31.3
##export VERSIONDATE=20181211
##export VERSION=3.32.0
##export VERSIONDATE=20190312
##export VERSION=3.33.90
##export VERSIONDATE=20190801
##export VERSION=3.34.0
##export VERSIONDATE=20190909
##export VERSION=3.35.3
##export VERSIONDATE=20200104
##export VERSION=3.36.0
##export VERSIONDATE=20200306
##export VERSION=3.36.1
##export VERSIONDATE=20200531
##export VERSION=3.36.2
##export VERSIONDATE=20201207
######meson.build:31:0: ERROR: Native dependency 'gio-unix-2.0' not found
##export VERSION=3.37.1.1
##export VERSIONDATE=20200426
##export VERSION=3.37.2
##export VERSIONDATE=20200529
##export VERSION=3.37.3
##export VERSIONDATE=20200703
##export VERSION=3.38.0
##export VERSIONDATE=20200912
##export VERSION=3.38.1
##export VERSIONDATE=20201207
##export VERSION=40.0
##export VERSIONDATE=20210323
##export VERSION=40.1
##export VERSIONDATE=20210415
##export VERSION=41.0
##export VERSIONDATE=20210917
######msgfmt: cannot locate ITS rules for ../data/org.gnome.Chess.appdata.xml.in
##export VERSION=41.1
##export VERSIONDATE=20211030
#####meson.build:36:0: ERROR: Invalid version of dependency, need 'librsvg-2.0' ['>= 2.46.0'] found '2.40.21'.
##export DEPENDENCIES=glib2,gtk4,librsvg,sqlite3,libx11,vala
##export OPTIONALDEPENDENCIES=
##export BUILDDEPENDENCIES=meson,itstool
##export OPTIONALBUILDDEPENDENCIES=
##export VERSION=42.0
##export VERSIONDATE=20220318
#####meson.build:37:0: ERROR: Invalid version of dependency, need 'librsvg-2.0' ['>= 2.46.0'] found '2.40.21'.
#wl-showstatus --package-version
##export DEPENDENCIES=glib2,gtk4,librsvg,sqlite3,libx11,vala,libadwaita
##export OPTIONALDEPENDENCIES=
##export BUILDDEPENDENCIES=meson,itstool
##export OPTIONALBUILDDEPENDENCIES=
#export LICENSEFILE=COPYING
#export LICENSETYPE=GPL
#export DOWNLOADURL="http://ftp.gnome.org/pub/GNOME/sources/gnome-chess/"
#export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
##export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/gnome/sources/$BASENAME/`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/$BASENAME-$VERSION.tar.bz2
#export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/gnome/sources/$BASENAME/$(echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/')/$BASENAME-$VERSION.tar.xz
##export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/gnome/sources/$BASENAME/$(echo $VERSION|sed 's/^\([0-9]*\)\..*$/\1/')/$BASENAME-$VERSION.tar.xz
#wl-showstatus download
#wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
#wl-wait4deps
##tar xj --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.bz2
#tar xJ --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.xz
#cd $BASENAME-$VERSION
## fix src/gnome-chess.c
#patch -ulbf src/gnome-chess.c << EOF
#--- src/gnome-chess.c  2015-02-21 18:54:04 +0100
#+++ src/gnome-chess.c  2015-02-22 09:11:36 +0100
#@@ -6460,3 +6460,3 @@
#        _tmp0_ = widget;
#-       G_MODULE_EXPORT preferences_response_cb (_tmp0_, (gint) GTK_RESPONSE_CANCEL, self);
#+       preferences_response_cb (_tmp0_, (gint) GTK_RESPONSE_CANCEL, self);
#        result = TRUE;
#EOF
## fix missing kill in src/chess-engine.c (version >= 3.14.3)
#mv src/chess-engine.c src/chess-engine.c.bak
#cat > src/chess-engine.c << EOF
##include <windows.h>
#static int kill (DWORD pid, int sig)
#{
# BOOL status;
# HANDLE hProcess;
# if ((hProcess = OpenProcess(PROCESS_TERMINATE, FALSE, pid)) == NULL || hProcess == INVALID_HANDLE_VALUE)
#  return -1;
# status = TerminateProcess(hProcess, ~0);
# CloseHandle(hProcess);
# return (status ? 0 : -1);
#}
#EOF
#cat src/chess-engine.c.bak >> src/chess-engine.c
## fix detection of OpenGL libary
#mv configure configure.bak &&
#grep -v "^ *glu* *$" configure.bak > configure
#wl-showstatus configure &&
# #mkdir -p m4 &&
# #autoreconf -f -i -I m4 -I $MINGWPREFIX/share/aclocal &&
# #./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM LDFLAGS="-Wl,--as-needed -lopengl32 -lglu32 -Wl,-no-undefined" &&
# PATH=$PATH:$PERLDIR/../c/bin INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM LDFLAGS="-Wl,--as-needed -lopengl32 -lglu32 -Wl,-no-undefined" &&
# wl-showstatus build-install &&
# PYTHONPATH=$MINGWPREFIX/python/Lib/site-packages${PYTHONPATH:+:$PYTHONPATH} GETTEXTDATADIR=$MINGWPREFIX/share/gettext make install-strip ITSTOOL="$PYDIR/python.exe $(which itstool)" &&
#    echo OK
## wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && rm -rf $BASENAME-$VERSION



export NAME="GNOME Chess"
export STATUS=
export URL=https://wiki.gnome.org/Apps/Chess
export BASENAME=gnome-chess
export DESCRIPTION="GNOME Chess is a 2D chess game, where games can be played between a combination of human and computer players."
export CATEGORY=games
export TYPE=application
#export VERSION=42.0
#export VERSIONDATE=20220318
#export VERSION=42.1
#export VERSIONDATE=20220810
#export VERSION=43.0
#export VERSIONDATE=20220916
#export VERSION=43.1
#export VERSIONDATE=20230106
#export VERSION=43.2
#export VERSIONDATE=20230318
#export VERSION=46.0
#export VERSIONDATE=20240316
#export VERSION=47.0
#export VERSIONDATE=20240913
export VERSION=48.0
export VERSIONDATE=20250314
####meson.build:37:0: ERROR: Invalid version of dependency, need 'librsvg-2.0' ['>= 2.46.0'] found '2.40.21'.
wl-showstatus --package-version
export DEPENDENCIES=glib2,gtk4,librsvg,sqlite3,libx11,vala,libadwaita
export OPTIONALDEPENDENCIES=
export BUILDDEPENDENCIES=meson,itstool
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=COPYING
export LICENSETYPE=GPL
export DOWNLOADURL="http://ftp.gnome.org/pub/GNOME/sources/gnome-chess/"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/gnome/sources/$BASENAME/$(echo $VERSION|sed 's/^\([0-9]*\)\..*$/\1/')/$BASENAME-$VERSION.tar.xz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
tar xJ --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.xz
cd $BASENAME-$VERSION
# fix gio-unix dependancy
sed -i.bak -e "s/gio-unix/gio-windows/" meson.build
mkdir -p build_both &&
 wl-showstatus configure &&
 PKG_CONFIG= PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library both . build_both &&
 wl-showstatus build-install &&
 PATH=$PATH:$PYDIR PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib ninja -Cbuild_both install &&
    echo OK && find . -name '*.a'
# wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION






