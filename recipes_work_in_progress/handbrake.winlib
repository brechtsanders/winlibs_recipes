export NAME="HandBrake"
export STATUS=
export URL=https://handbrake.fr/
export BASENAME=handbrake
export DESCRIPTION="HandBrake is a tool for converting video from nearly any format to a selection of modern, widely supported codecs."
export CATEGORY=multimedia,fileformat
export TYPE=application
#export VERSION=1.4.1
#export VERSIONDATE=20210826
#export VERSION=1.4.2
#export VERSIONDATE=20211004
#export VERSION=1.5.0
#export VERSIONDATE=20220110
#export VERSION=1.5.1
#export VERSIONDATE=20220111
export VERSION=1.6.0
export VERSIONDATE=20221229
wl-showstatus --package-version
export DEPENDENCIES=
export OPTIONALDEPENDENCIES=
export BUILDDEPENDENCIES=
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=LICENSE
export LICENSETYPE=GPL
export DOWNLOADURL="https://github.com/HandBrake/HandBrake/releases"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
export DOWNLOADSOURCEURL=https://github.com/HandBrake/HandBrake/archive/refs/tags/$VERSION.tar.gz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
wl-showstatus extract
tar xfz $TARBALLDIR/$BASENAME/$VERSION.tar.gz
cd HandBrake-$VERSION
# fix make/configure.py (version >= 1.4.2)
patch -ulbf make/configure.py << EOF
@@ -506,3 +506,3 @@
     def __init__( self ):
-        super( BuildTupleProbe, self ).__init__( 'build tuple', '%s/config.guess' % (cfg.dir), abort=True, head=True )
+        super( BuildTupleProbe, self ).__init__( 'build tuple', 'sh %s/config.guess' % (cfg.dir), abort=True, head=True )

EOF
wl-showstatus configure &&
 #PATH=$PYDIR:$PATH ./configure &&
 $PYDIR/python.exe make/configure.py &&
    echo OK
# wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf HandBrake-$VERSION



