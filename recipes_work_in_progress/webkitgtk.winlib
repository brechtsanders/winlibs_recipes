#export NAME="WebKitGTK+"
#export STATUS=
#export URL=http://www.webkitgtk.org/
#export BASENAME=webkitgtk
#export DESCRIPTION="WebKitGTK+ is the port of the portable web rendering engine WebKit to the GTK+ platform."
#export CATEGORY=graphics
#export TYPE=library
##export VERSION=1.2.7
##export VERSIONDATE=20110216
##export VERSION=1.3.11
##export VERSIONDATE=20110217
##export VERSION=1.3.12
##export VERSIONDATE=20110223
##export VERSION=1.3.13
##export VERSIONDATE=20110322
##export VERSION=1.4.0
##export VERSIONDATE=20110428
##export VERSION=1.4.1
##export VERSIONDATE=20110606
#####Failed to read names from file: ./WebCore/xml/xmlattrs.in at WebCore/dom/make_names.pl line 223.
#####The system cannot find the path specified.SRuleList.h
#####Can't call method "fileName" without a package or object reference at Source/WebCore/bindings/scripts/IDLParser.pm line 122.
#####Failed to read names from file: ./WebCore/html/HTMLTagNames.in at WebCore/dom/make_names.pl line 223.
#####  GEN    DerivedSources/webkit/WebKitDOMCSSRuleList.h
#####The system cannot find the path specified.
##export VERSION=1.4.2
##export VERSIONDATE=20110701
##export VERSION=1.4.3
##export VERSIONDATE=20110830
##export VERSION=1.5.1
##export VERSIONDATE=20110614
##export VERSION=1.5.2
##export VERSIONDATE=20110813
##export VERSION=1.6.0
##export VERSIONDATE=20110927
##export VERSION=1.6.1
##export VERSIONDATE=20110927
##export VERSION=1.6.2
##export VERSIONDATE=20120131
##export VERSION=1.6.3
##export VERSIONDATE=20120202
#####Source/JavaScriptCore/wtf/CurrentTime.cpp:333: error: 'g_get_monotonic_time' was not declared in this scope
##export VERSION=1.7.1
##export VERSIONDATE=20111027
#####Can't call method "fileName" without a package or object reference at Source/WebCore/bindings/scripts/IDLParser.pm line 100.
##export VERSION=1.7.2
##export VERSIONDATE=20111126
##export VERSION=1.7.3
##export VERSIONDATE=20111217
#####Requested 'libsoup-2.4 >= 2.37.2.1' but version of libsoup is 2.37.2
##export VERSION=1.7.4
##export VERSIONDATE=20120116
##export VERSION=1.7.5
##export VERSIONDATE=20120206
##export VERSION=1.7.90
##export VERSIONDATE=20120223
#####The system cannot find the path specified.
#####Can't call method "fileName" without a package or object reference at Source/WebCore/bindings/scripts/IDLParser.pm line 112.
##export VERSION=1.7.91
##export VERSIONDATE=20120308
##export DEPENDENCIES=libsoup-2.4,freetype2,sqlite3,libxslt,gstreamer,librsvg,libidl
##export VERSION=1.7.92
##export VERSIONDATE=20120320
##export VERSION=1.8.0
##export VERSIONDATE=20120328
##export VERSION=1.8.1
##export VERSIONDATE=20120426
##export VERSION=1.8.2
##export VERSIONDATE=20120803
##export VERSION=1.8.3
##export VERSIONDATE=20120824
#####Source/WebCore/platform/text/TextCodecUTF8.h:50:31: error: 'U8_MAX_LENGTH' was not declared in this scope
##export VERSION=1.9.1
##export VERSIONDATE=20120430
##export VERSION=1.9.2
##export VERSIONDATE=20120507
##export VERSION=1.9.3
##export VERSIONDATE=20120604
#####Source/WebKit/gtk/WebCoreSupport/TextCheckerClientGtk.cpp:59:78: error: invalid const_cast from type 'const UChar* {aka const wchar_t*}' to type 'const gunichar2* {aka const short unsigned int*}'
##export DEPENDENCIES=libsoup-2.4,freetype2,sqlite3,libxslt,gstreamer,gst-plugins-base,librsvg,libidl,geoclue,gperf
##export VERSION=1.9.4
##export VERSIONDATE=20120625
#####Requested 'libsoup-2.4 >= 2.39.2' but version of libsoup is 2.38.1
##export VERSION=1.9.5
##export VERSIONDATE=20120716
##export VERSION=1.9.6
##export VERSIONDATE=20120806
##export DEPENDENCIES=libsoup-2.4,freetype2,sqlite3,libxslt,gstreamer,gst-plugins-base,librsvg,libidl,geoclue,gperf,ruby
##export VERSION=1.10.2
##export VERSIONDATE=20130223
##export VERSION=1.11.5
##export VERSIONDATE=20130223
##export VERSION=2.0.0
##export VERSIONDATE=20130327
##export VERSION=2.0.1
##export VERSIONDATE=20130417
##export VERSION=2.0.2
##export VERSIONDATE=20130513
##export VERSION=2.0.3
##export VERSIONDATE=20130612
##export VERSION=2.0.4
##export VERSIONDATE=20130720
##export VERSION=2.1.1
##export VERSIONDATE=20130529
##export VERSION=2.1.2
##export VERSIONDATE=20130618
#####cat: WebKitFeatures.txt: No such file or directory
#####./autotoolsconfig.h:242:28: fatal error: WebKitFeatures.h: No such file or directory
##export VERSION=2.1.3
##export VERSIONDATE=20130709
##export VERSION=2.1.4
##export VERSIONDATE=20130812
##export VERSION=2.1.90
##export VERSIONDATE=20130828
##export VERSION=2.1.90.1
##export VERSIONDATE=20130830
##export VERSION=2.1.91
##export VERSIONDATE=20130911
##export VERSION=2.2.0
##export VERSIONDATE=20130927
##export VERSION=2.2.1
##export VERSIONDATE=20131016
##export VERSION=2.2.2
##export VERSIONDATE=20131111
##export VERSION=2.2.3
##export VERSIONDATE=20131204
##export VERSION=2.2.4
##export VERSIONDATE=20140121
##export VERSION=2.2.5
##export VERSIONDATE=20140219
#####Source/WTF/wtf/Platform.h:630:36: fatal error: WTF/WTFHeaderDetection.h: No such file or directory
##export VERSION=2.2.6
##export VERSIONDATE=20140319
##export VERSION=2.2.7
##export VERSIONDATE=20140501
##export VERSION=2.2.8
##export VERSIONDATE=20141001
#####Source/WTF/wtf/threads/BinarySemaphore.cpp:34:7: error: class 'WTF::BinarySemaphore' does not have any field named 'm_isSet'
##export VERSION=2.3.1
##export VERSIONDATE=20131029
##export VERSION=2.3.2
##export VERSIONDATE=20131118
##export VERSION=2.3.3
##export VERSIONDATE=20131218
##export VERSION=2.3.4
##export VERSIONDATE=20140113
##export VERSION=2.3.5
##export VERSIONDATE=20140205
##export VERSION=2.4.0
##export VERSIONDATE=20140324
#####No package 'gtk+-x11-3.0' found
#####No package 'pangoft2' found
##export VERSION=2.4.1
##export VERSIONDATE=20140418
##export VERSION=2.4.2
##export VERSIONDATE=20140513
##export VERSION=2.4.3
##export VERSIONDATE=20140526
#####Source/WTF/wtf/Atomics.h:236:19: error: expected primary-expression before ')' token  MemoryBarrier();
#####Source/JavaScriptCore/heap/BlockAllocator.h:108:5: error: 'mutex' in namespace 'std' does not name a type
##export VERSION=2.4.4
##export VERSIONDATE=20140708
#####Source/JavaScriptCore/heap/BlockAllocator.h:108:5: error: 'mutex' in namespace 'std' does not name a type
##export VERSION=2.4.5
##export VERSIONDATE=20140827
##export VERSION=2.4.6
##export VERSIONDATE=20140929
##export VERSION=2.4.7
##export VERSIONDATE=20141022
##export VERSION=2.4.8
##export VERSIONDATE=20150107
##export VERSION=2.4.9
##export VERSIONDATE=20150520
#export VERSION=2.4.11
#export VERSIONDATE=20160410
#####Source/WTF/wtf/Platform.h:611:36: fatal error: WTF/WTFHeaderDetection.h: No such file or directory
##export VERSION=2.5.1
##export VERSIONDATE=20140801
#####Could NOT find PythonInterp (missing: PYTHON_EXECUTABLE) (Required is at least version "2.6.0")
##export VERSION=2.5.2
##export VERSIONDATE=20140811
##export VERSION=2.5.3
##export VERSIONDATE=20140816
##export VERSION=2.6.0
##export VERSIONDATE=20140924
##export VERSION=2.6.1
##export VERSIONDATE=20141013
##export VERSION=2.6.2
##export VERSIONDATE=20141022
##export VERSION=2.6.3
##export VERSIONDATE=20141112
##export VERSION=2.6.4
##export VERSIONDATE=20141121
##export VERSION=2.6.5
##export VERSIONDATE=20150115
##export VERSION=2.6.6
##export VERSIONDATE=20150411
##export VERSION=2.7.1
##export VERSIONDATE=20141028
#####Could NOT find Perl: Found unsuitable version "5.8.8", but required is at least "5.10.0"
##export VERSION=2.7.2
##export VERSIONDATE=20141124
##export VERSION=2.7.3
##export VERSIONDATE=20141216
##export VERSION=2.7.4
##export VERSIONDATE=20150121
##export VERSION=2.8.0
##export VERSIONDATE=20150323
##export VERSION=2.8.1
##export VERSIONDATE=20150414
##export VERSION=2.8.2
##export VERSIONDATE=20150512
##export VERSION=2.8.3
##export VERSIONDATE=20150515
##export VERSION=2.8.4
##export VERSIONDATE=20150708
##export VERSION=2.8.5
##export VERSIONDATE=20150811
##export VERSION=2.9.1
##export VERSIONDATE=20150507
##export VERSION=2.9.2
##export VERSIONDATE=20150527
##export VERSION=2.9.3
##export VERSIONDATE=20150623
##export VERSION=2.9.4
##export VERSIONDATE=20150722
##export VERSION=2.9.5
##export VERSIONDATE=20150811
##export VERSION=2.9.90
##export VERSIONDATE=20150815
##export VERSION=2.9.91
##export VERSIONDATE=20150826
##export VERSION=2.9.92
##export VERSIONDATE=20150916
##export VERSION=2.10.0
##export VERSIONDATE=20150921
##export VERSION=2.10.1
##export VERSIONDATE=20151014
##export VERSION=2.10.2
##export VERSIONDATE=20151015
##export VERSION=2.10.3
##export VERSIONDATE=20151030
##export VERSION=2.10.4
##export VERSIONDATE=20151111
##export VERSION=2.11.1
##export VERSIONDATE=20151103
##export VERSION=2.11.2
##export VERSIONDATE=20151127
##export VERSION=2.12.0
##export VERSIONDATE=20160406
##export VERSION=2.12.1
##export VERSIONDATE=20160415
##export VERSION=2.12.2
##export VERSIONDATE=20160428
##export VERSION=2.12.3
##export VERSIONDATE=20160524
##export VERSION=2.12.4
##export VERSIONDATE=20160824
##export VERSION=2.12.5
##export VERSIONDATE=20160905
##export VERSION=2.13.1
##export VERSIONDATE=20160531
##export VERSION=2.13.2
##export VERSIONDATE=20160624
##export VERSION=2.13.3
##export VERSIONDATE=20160718
##export VERSION=2.13.4
##export VERSIONDATE=20160728
##export VERSION=2.14.0
##export VERSIONDATE=20160920
##export VERSION=2.14.1
##export VERSIONDATE=20161012
##export VERSION=2.14.2
##export VERSIONDATE=20161103
##export VERSION=2.14.3
##export VERSIONDATE=20170117
##export VERSION=2.14.4
##export VERSIONDATE=20170210
##export VERSION=2.14.5
##export VERSIONDATE=20170215
##export VERSION=2.14.6
##export VERSIONDATE=20170407
##export VERSION=2.14.7
##export VERSIONDATE=20170509
##export VERSION=2.15.1
##export VERSIONDATE=20161026
##export VERSION=2.15.2
##export VERSIONDATE=20161121
##export VERSION=2.15.3
##export VERSIONDATE=20170121
##export VERSION=2.15.4
##export VERSIONDATE=20170131
##export VERSION=2.15.90
##export VERSIONDATE=20170222
##export VERSION=2.15.91
##export VERSIONDATE=20170301
##export VERSION=2.15.92
##export VERSIONDATE=20170314
##export VERSION=2.16.0
##export VERSIONDATE=20170320
##export VERSION=2.16.1
##export VERSIONDATE=20170405
##export VERSION=2.16.2
##export VERSIONDATE=20170509
##export VERSION=2.16.3
##export VERSIONDATE=20170524
##export VERSION=2.16.4
##export VERSIONDATE=20170620
##export VERSION=2.16.5
##export VERSIONDATE=20170627
##export VERSION=2.16.6
##export VERSIONDATE=20170724
##export VERSION=2.17.1
##export VERSIONDATE=20170503
##export VERSION=2.17.2
##export VERSIONDATE=20170511
##export VERSION=2.17.3
##export VERSIONDATE=20170522
##export VERSION=2.17.4
##export VERSIONDATE=20170619
##export VERSION=2.17.5
##export VERSIONDATE=20170726
##export VERSION=2.17.90
##export VERSIONDATE=20170815
##export VERSION=2.17.91
##export VERSIONDATE=20170819
##export VERSION=2.18.0
##export VERSIONDATE=20170911
##export VERSION=2.18.1
##export VERSIONDATE=20171019
##export VERSION=2.18.2
##export VERSIONDATE=20171027
##export VERSION=2.18.3
##export VERSIONDATE=20171111
##export VERSION=2.18.4
##export VERSIONDATE=20171111
##export VERSION=2.18.5
##export VERSIONDATE=20180110
##export VERSION=2.18.6
##export VERSIONDATE=20180124
##export DEPENDENCIES=libsoup-2.4,freetype2,sqlite3,libxml2,libxslt,gstreamer,gst-plugins-base,librsvg,libidl,gperf,libjpeg,libpng,zlib,pango,cairo,gtk2,gail,enchant,libsecret,freetype2,libxdamage,libxcomposite,harfbuzz,icu,at-spi2-core,geoclue
#####GCC 4.9.0 is required to build WebKitGTK+, use a newer GCC version or clang
#####include could not find load file: OptionsEfl
##export VERSION=2.19.1
##export VERSIONDATE=20171031
##export VERSION=2.19.3
##export VERSIONDATE=20171213
##export VERSION=2.19.4
##export VERSIONDATE=20180109
##export VERSION=2.19.6
##export VERSIONDATE=20180117
##export VERSION=2.19.90
##export VERSIONDATE=20180205
##export VERSION=2.19.91
##export VERSIONDATE=20180221
#####Python 2 is required, but Python 3 was found.
##export VERSION=2.19.92
##export VERSIONDATE=20180306
##export VERSION=2.20.0
##export VERSIONDATE=20180312
##export VERSION=2.20.1
##export VERSIONDATE=20180410
##export VERSION=2.20.2
##export VERSIONDATE=20180507
##export VERSION=2.20.3
##export VERSIONDATE=20180611
##export VERSION=2.20.4
##export VERSIONDATE=20180806
##export VERSION=2.20.5
##export VERSIONDATE=20180813
##export VERSION=2.21.2
##export VERSIONDATE=20180521
##export VERSION=2.21.3
##export VERSIONDATE=20180528
##export VERSION=2.21.4
##export VERSIONDATE=20180612
##export VERSION=2.21.5
##export VERSIONDATE=20180721
##export VERSION=2.21.91
##export VERSIONDATE=20180816
##export VERSION=2.21.92
##export VERSIONDATE=20180824
##export VERSION=2.22.0
##export VERSIONDATE=20180904
##export VERSION=2.22.1
##export VERSIONDATE=20180920
##export VERSION=2.22.2
##export VERSIONDATE=20180922
##export VERSION=2.22.3
##export VERSIONDATE=20181029
##export VERSION=2.22.4
##export VERSIONDATE=20181122
##export VERSION=2.22.5
##export VERSIONDATE=20181213
##export VERSION=2.23.2
##export VERSIONDATE=20190108
##export VERSION=2.23.3
##export VERSIONDATE=20190114
#####GStreamerGL is needed for USE_GSTREAMER_GL.
#wl-showstatus --package-version
#export DEPENDENCIES=libsoup-2.4,freetype2,sqlite3,libxml2,libxslt,gstreamer,gst-plugins-base,librsvg,libidl,gperf,libjpeg,libpng,zlib,pango,cairo,gtk2,gail,enchant,libsecret,freetype2,libxdamage,libxcomposite,harfbuzz,icu,at-spi2-core,woff2
#export OPTIONALDEPENDENCIES=
#export BUILDDEPENDENCIES=ruby
#export OPTIONALBUILDDEPENDENCIES=
#export LICENSEFILE=
#export LICENSETYPE=
##export DOWNLOADURL="http://builds.nightly.webkit.org/files/trunk/src/ WebKit- "
##export DOWNLOADURL="http://www.webkitgtk.org/?page=download webkit-"
#export DOWNLOADURL="http://www.webkitgtk.org/releases/ webkitgtk-"
#export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
##export DOWNLOADSOURCEURL=http://builds.nightly.webkit.org/files/trunk/src/WebKit-$VERSION.tar.bz2
##export DOWNLOADSOURCEURL=http://www.webkitgtk.org/webkit-$VERSION.tar.gz
##export DOWNLOADSOURCEURL=http://www.webkitgtk.org/releases/webkit-$VERSION.tar.xz
##export DOWNLOADSOURCEURL=http://www.webkitgtk.org/releases/webkitgtk-$VERSION.tar.xz
#export DOWNLOADSOURCEURL=https://www.webkitgtk.org/releases/webkitgtk-$VERSION.tar.xz
#wl-showstatus download
#wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
#wl-wait4deps
##tar xj --force-local -f $TARBALLDIR/$BASENAME/WebKit-$VERSION.tar.bz2
##tar xz --force-local -f $TARBALLDIR/$BASENAME/webkit-$VERSION.tar.gz
##tar xJ --force-local -f $TARBALLDIR/$BASENAME/webkit-$VERSION.tar.xz
#tar xJ --force-local -f $TARBALLDIR/$BASENAME/webkitgtk-$VERSION.tar.xz
##cd webkit-$VERSION
#cd webkitgtk-$VERSION
### fix Source/WebKit/gtk/WebCoreSupport/TextCheckerClientGtk.cpp (version >= 1.7.91 <= 1.7.92)
##patch -ulbf Source/WebKit/gtk/WebCoreSupport/TextCheckerClientGtk.cpp << EOF
##--- Source/WebKit/gtk/WebCoreSupport/TextCheckerClientGtk.cpp  2012-02-22 20:51:16 +0100
##+++ Source/WebKit/gtk/WebCoreSupport/TextCheckerClientGtk.cpp  2012-03-08 23:22:26 +0100
##@@ -58,3 +58,3 @@
## {
##-    GOwnPtr<gchar> utf8Text(g_utf16_to_utf8(const_cast<gunichar2*>(text), length, 0, 0, 0));
##+    GOwnPtr<gchar> utf8Text(g_utf16_to_utf8(const_cast<const gunichar2*>(text), length, 0, 0, 0));
##     webkit_spell_checker_check_spelling_of_string(m_spellChecker.get(), utf8Text.get(), misspellingLocation, misspellingLength);
##EOF
## fix Source/WebKit/gtk/WebCoreSupport/TextCheckerClientGtk.cpp (version >= 1.8.0)
#patch -ulbf Source/WebKit/gtk/WebCoreSupport/TextCheckerClientGtk.cpp << EOF
#--- Source/WebKit/gtk/WebCoreSupport/TextCheckerClientGtk.cpp  2012-08-01 09:55:08 +0200
#+++ Source/WebKit/gtk/WebCoreSupport/TextCheckerClientGtk.cpp  2012-08-04 22:49:38 +0200
#@@ -58,3 +58,3 @@
# {
#-    GOwnPtr<gchar> utf8Text(g_utf16_to_utf8(const_cast<gunichar2*>(text), length, 0, 0, 0));
#+    GOwnPtr<gchar> utf8Text(g_utf16_to_utf8((gunichar2*)text, length, 0, 0, 0));
#     webkit_spell_checker_check_spelling_of_string(m_spellChecker.get(), utf8Text.get(), misspellingLocation, misspellingLength);
#EOF
## fix already define interface in Source/WebKit/gtk/webkit/webkitspellcheckerenchant.cpp
#mv Source/WebKit/gtk/webkit/webkitspellcheckerenchant.cpp Source/WebKit/gtk/webkit/webkitspellcheckerenchant.cpp.bak
#sed -e "s/ interface/ iface/g" Source/WebKit/gtk/webkit/webkitspellcheckerenchant.cpp.bak > Source/WebKit/gtk/webkit/webkitspellcheckerenchant.cpp
### fix missing WKBaseWin.h (version >= 1.9.6)
###touch Source/WebKit2/WKBaseWin.h
##mv Source/WebKit2/Shared/API/c/WKBase.h Source/WebKit2/Shared/API/c/WKBase.h.bak
##grep -v WebKit2/WKBaseWin.h Source/WebKit2/Shared/API/c/WKBase.h.bak > Source/WebKit2/Shared/API/c/WKBase.h
### fix missing DIBPixelData.h (version >= 1.9.6)
##echo "#include <windows.h>" > Source/WebCore/platform/graphics/win/DIBPixelData.h
### remove dependancy on dynamic libstdc++ (GCC 4)
## fix missing sys/socket.h in Source/WebKit2/Platform/CoreIPC/unix/ConnectionUnix.cpp (version >= 1.10.2)
#mkdir -p win32fix/sys
#cat > win32fix/sys/socket.h << EOF
##include <winsock2.h>
#EOF
## fix missing WTF/WTFHeaderDetection.h in Source/WTF/wtf/Platform.h
#patch -ulbf Source/WTF/wtf/Platform.h << EOF
#--- Source/WTF/wtf/Platform.h  2013-11-11 10:21:52 +0100
#+++ Source/WTF/wtf/Platform.h  2013-11-11 22:04:54 +0100
#@@ -631,3 +631,3 @@
# #if !PLATFORM(QT)
#-#include <WTF/WTFHeaderDetection.h>
#+//#include <WTF/WTFHeaderDetection.h>
# #endif
#@@ -976,4 +976,8 @@
# #if !defined(ENABLE_COMPARE_AND_SWAP) && (OS(WINDOWS) || (COMPILER(GCC) && (CPU(X86) || CPU(X86_64) || CPU(ARM_THUMB2))))
#+#ifdef __MINGW32__
#+#define ENABLE_COMPARE_AND_SWAP 0
#+#else
# #define ENABLE_COMPARE_AND_SWAP 1
# #endif
#+#endif
#
#EOF
### disable ENABLE_COMPARE_AND_SWAP to avoid missing atomic functions (version <= 2.2.5)
##cat >> Source/WTF/wtf/Platform.h << EOF
###undef ENABLE_COMPARE_AND_SWAP
###define ENABLE_COMPARE_AND_SWAP 0
##EOF
##patch -ulbf Source/WTF/wtf/Atomics.h << EOF
##--- Source/WTF/wtf/Atomics.h  2013-11-11 09:32:32 +0100
##+++ Source/WTF/wtf/Atomics.h  2013-11-11 22:43:10 +0100
##@@ -88,4 +88,4 @@
##
##-inline int64_t atomicIncrement(int64_t* addend) { return InterlockedIncrement64(reinterpret_cast<long long*>(addend)); }
##-inline int64_t atomicDecrement(int64_t* addend) { return InterlockedDecrement64(reinterpret_cast<long long*>(addend)); }
##+//inline int64_t atomicIncrement(int64_t* addend) { return InterlockedIncrement64(reinterpret_cast<long long*>(addend)); }
##+//inline int64_t atomicDecrement(int64_t* addend) { return InterlockedDecrement64(reinterpret_cast<long long*>(addend)); }
## #else
##@@ -253,3 +253,7 @@
##     // investigate if that is actually better.
##+#ifdef __MINGW32__
##+    __sync_synchronize();
##+#else
##     MemoryBarrier();
##+#endif
## #else
##EOF
## fix Source/WTF/wtf/Atomics.h (version >= 2.2.6)
#patch -ulbf Source/WTF/wtf/Atomics.h << EOF
#--- Source/WTF/wtf/Atomics.h  2014-03-19 08:53:02 +0100
#+++ Source/WTF/wtf/Atomics.h  2014-03-19 22:43:20 +0100
#@@ -67,3 +67,3 @@
# #include <cmnintrin.h>
#-#else
#+#elif !defined(__MINGW32__)
# extern "C" void _ReadWriteBarrier(void);
#EOF
### fix missing strcasecmp in Source/WTF/wtf/Assertions.cpp
##mv Source/WTF/wtf/Assertions.cpp Source/WTF/wtf/Assertions.cpp.bak
##sed -e "s/strcasecmp/stricmp/g" Source/WTF/wtf/Assertions.cpp.bak > Source/WTF/wtf/Assertions.cpp
### fix missing strcasecmp in Source/WTF/wtf/DateMath.cpp
##mv Source/WTF/wtf/DateMath.cpp Source/WTF/wtf/DateMath.cpp.bak
##sed -e "s/strcasecmp/stricmp/g" Source/WTF/wtf/DateMath.cpp.bak > Source/WTF/wtf/DateMath.cpp
## fix Python issue in Tools/gtk/generate-inspector-gresource-manifest.py
#mv Tools/gtk/generate-inspector-gresource-manifest.py Tools/gtk/generate-inspector-gresource-manifest.py.bak
#echo '#!/bin/env '$PYDIR/python.exe > Tools/gtk/generate-inspector-gresource-manifest.py
#cat Tools/gtk/generate-inspector-gresource-manifest.py.bak >> Tools/gtk/generate-inspector-gresource-manifest.py
## fix configure for Windows
#mv configure configure.bak
#sed -e "s/gtk+-x11/gtk+-win32/g" configure.bak > configure
## fix configure for missing strcasecmp
#mv configure configure.bak2
#sed -e "s/-std=c++11//g" configure.bak2 > configure
##mv libtool libtool.bak &&
##sed -e "s/-lstdc++/-lstdc++_s -lsupc++/" libtool.bak > libtool &&
#wl-showstatus configure &&
##./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM LDFLAGS="-no-undefined -Wl,-no-undefined -Wl,--enable-stdcall-fixup" &&
##PERL="$PERLDIR/bin/perl.exe" PYTHON=$PYDIR/python.exe ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM &&
##PERL="$PERLDIR/bin/perl.exe" PYTHON=$PYDIR/python.exe ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --with-target=win32 --disable-introspection CFLAGS="-DWIN32" CXXFLAGS="-DWIN32" &&
##PERL="$PERLDIR/bin/perl.exe" PYTHON=$PYDIR/python.exe ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --with-target=win32 --disable-geolocation --disable-introspection CFLAGS="-DWIN32" CXXFLAGS="-DWIN32 -I`pwd`/win32fix" LDFLAGS="-Wl,--as-needed -lws2_32" &&
##PERL="$PERLDIR/bin/perl.exe" PYTHON=$PYDIR/python.exe PATH=$PATH:$PYDIR ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --with-target=win32 --disable-geolocation --disable-introspection CFLAGS="-DWIN32" CXXFLAGS="-DWIN32 -I`pwd`/win32fix" LDFLAGS="-Wl,--as-needed -lws2_32" &&
##PERL="$PERLDIR/bin/perl.exe" PYTHON=$PYDIR/python.exe PATH=$PATH:$PYDIR ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --with-target=win32 --enable-optimizations --enable-debug-symbols=no --disable-geolocation --disable-introspection CFLAGS="-DWIN32" CXXFLAGS="-DWIN32 -I`pwd`/win32fix" LDFLAGS="-Wl,--as-needed -lws2_32" &&
#PERL="$PERLDIR/bin/perl.exe" PYTHON=$PYDIR/python.exe PATH=$PATH:$PYDIR ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --enable-static --enable-shared --enable-win32-target --disable-x11-target --enable-optimizations --disable-debug --disable-geolocation --disable-introspection CFLAGS="-DWIN32" CXXFLAGS="-DWIN32 -I`pwd`/win32fix" LDFLAGS="-Wl,--as-needed -lws2_32" &&
# wl-showstatus build-install &&
# #PATH=$PATH:$PYDIR make -j1 all install-strip CC=${CC:-gcc} &&
# PATH=$PATH:$PYDIR make -j1 all install-strip CC="${CC:-gcc} -std=c++11" CXX="${CXX:-g++} -std=c++11" &&
#    ls -l $INSTALLPREFIX/lib/pkgconfig $INSTALLPREFIX/share/pkgconfig
#    make install-pkgconfigDATA
## wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && rm -rf webkitgtk-$VERSION



export NAME="WebKitGTK+"
export STATUS=
export URL=http://www.webkitgtk.org/
export BASENAME=webkitgtk
export DESCRIPTION="WebKitGTK+ is the port of the portable web rendering engine WebKit to the GTK+ platform."
export CATEGORY=graphics
export TYPE=library
#export VERSION=2.22.7
#export VERSIONDATE=20190302
#export VERSION=2.23.3
#export VERSIONDATE=20190114
#export VERSION=2.23.90
#export VERSIONDATE=20190214
#export VERSION=2.23.91
#export VERSIONDATE=20190220
#export VERSION=2.24.0
#export VERSIONDATE=20190313
#export VERSION=2.24.1
#export VERSIONDATE=20190412
#export VERSION=2.24.2
#export VERSIONDATE=20190518
#export VERSION=2.24.3
#export VERSIONDATE=20190702
#export VERSION=2.24.4
#export VERSIONDATE=20190828
#export VERSION=2.25.1
#export VERSIONDATE=20190527
#export VERSION=2.25.2
#export VERSIONDATE=20190617
#export VERSION=2.25.3
#export VERSIONDATE=20190724
#export VERSION=2.25.4
#export VERSIONDATE=20190803
#export VERSION=2.26.0
#export VERSIONDATE=20190909
#export VERSION=2.26.1
#export VERSIONDATE=20190923
#export VERSION=2.26.2
#export VERSIONDATE=20191106
#export VERSION=2.26.3
#export VERSIONDATE=20200122
#export VERSION=2.26.4
#export VERSIONDATE=20200214
#export VERSION=2.27.1
#export VERSIONDATE=20191004
#export VERSION=2.27.2
#export VERSIONDATE=20191022
#export VERSION=2.27.3
#export VERSIONDATE=20191126
#export VERSION=2.27.4
#export VERSIONDATE=20200111
#export VERSION=2.28.0
#export VERSIONDATE=20200310
#export VERSION=2.28.1
#export VERSIONDATE=20200414
#export VERSION=2.28.2
#export VERSIONDATE=20200425
#export VERSION=2.28.3
#export VERSIONDATE=20200709
#export VERSION=2.28.4
#export VERSIONDATE=20200729
#export VERSION=2.29.1
#export VERSIONDATE=20200518
#export VERSION=2.29.2
#export VERSIONDATE=20200624
#export VERSION=2.29.3
#export VERSIONDATE=20200708
#export VERSION=2.29.4
#export VERSIONDATE=20200729
#export VERSION=2.30.0
#export VERSIONDATE=20200912
#export VERSION=2.30.1
#export VERSIONDATE=20200921
#export VERSION=2.30.2
#export VERSIONDATE=20201024
#export VERSION=2.30.3
#export VERSIONDATE=20201120
#export VERSION=2.30.4
#export VERSIONDATE=20201215
#export VERSION=2.30.5
#export VERSIONDATE=20210211
#export VERSION=2.30.6
#export VERSIONDATE=20210318
#export VERSION=2.31.1
#export VERSIONDATE=20210112
#export VERSION=2.32.0
#export VERSIONDATE=20210326
#export VERSION=2.32.1
#export VERSIONDATE=20210510
#export VERSION=2.32.2
#export VERSIONDATE=20210709
#export VERSION=2.32.3
#export VERSIONDATE=20210723
#export VERSION=2.32.4
#export VERSIONDATE=20210917
#export VERSION=2.33.1
#export VERSIONDATE=20210514
#export VERSION=2.33.2
#export VERSIONDATE=20210608
#export VERSION=2.33.3
#export VERSIONDATE=20210816
#export VERSION=2.33.90
#export VERSIONDATE=20210902
#export VERSION=2.34.0
#export VERSIONDATE=20210922
#export VERSION=2.34.1
#export VERSIONDATE=20211021
#export VERSION=2.34.2
#export VERSIONDATE=20211124
#export VERSION=2.34.3
#export VERSIONDATE=20211220
#export VERSION=2.34.4
#export VERSIONDATE=20220121
#export VERSION=2.34.5
#export VERSIONDATE=20220209
#export VERSION=2.35.1
#export VERSIONDATE=20211125
#export VERSION=2.35.2
#export VERSIONDATE=20220203
#export VERSION=2.35.3
#export VERSIONDATE=20220209
#export VERSION=2.34.6
#export VERSIONDATE=20220217
#export VERSION=2.36.0
#export VERSIONDATE=20220321
#export VERSION=2.36.1
#export VERSIONDATE=20220421
#export VERSION=2.36.2
#export VERSIONDATE=20220518
#export VERSION=2.36.3
#export VERSIONDATE=20220528
#export VERSION=2.36.4
#export VERSIONDATE=20220704
#export VERSION=2.36.5
#export VERSIONDATE=20220729
#export VERSION=2.36.6
#export VERSIONDATE=20220807
#export VERSION=2.36.7
#export VERSIONDATE=20220825
#export VERSION=2.36.8
#export VERSIONDATE=20220917
#export VERSION=2.37.1
#export VERSIONDATE=20220712
#export VERSION=2.38.0
#export VERSIONDATE=20220916
#export VERSION=2.38.1
#export VERSIONDATE=20221020
#export VERSION=2.38.2
#export VERSIONDATE=20221104
#export VERSION=2.38.3
#export VERSIONDATE=20221222
#export VERSION=2.38.4
#export VERSIONDATE=20230202
#export VERSION=2.38.5
#export VERSIONDATE=20230215
#export VERSION=2.39.1
#export VERSIONDATE=20221111
#export VERSION=2.39.2
#export VERSIONDATE=20221128
#export VERSION=2.39.3
#export VERSIONDATE=20221214
#export VERSION=2.39.4
#export VERSIONDATE=20230116
#export VERSION=2.39.5
#export VERSIONDATE=20230119
#export VERSION=2.39.6
#export VERSIONDATE=20230130
export VERSION=2.39.7
export VERSIONDATE=20230131
wl-showstatus --package-version
export DEPENDENCIES=,libsoup-2.4,freetype2,sqlite3,libxml2,libxslt,gstreamer,gst-plugins-base,librsvg,libidl,gperf,libjpeg,libpng,zlib,pango,cairo,gtk2,gail,enchant,libsecret,freetype2,libxdamage,libxcomposite,harfbuzz,icu,at-spi2-core,woff2
export OPTIONALDEPENDENCIES=
export BUILDDEPENDENCIES=ruby
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=
export LICENSETYPE=
export DOWNLOADURL="https://www.webkitgtk.org/releases/ webkitgtk-"
#export DOWNLOADURL="https://trac.webkit.org/browser/webkit/releases/WebKitGTK webkit-"
#export DOWNLOADURL="https://svn.webkit.org/repository/webkit/releases/WebKitGTK/"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
export DOWNLOADSOURCEURL=https://www.webkitgtk.org/releases/webkitgtk-$VERSION.tar.xz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
tar xJ --force-local -f $TARBALLDIR/$BASENAME/webkitgtk-$VERSION.tar.xz
cd webkitgtk-$VERSION
# fix Source/WTF/wtf/DateMath.cpp
mv Source/WTF/wtf/DateMath.cpp Source/WTF/wtf/DateMath.cpp.bak &&
sed -e "s/COMPILER(MSVC)/OS(WINDOWS)/" Source/WTF/wtf/DateMath.cpp.bak > Source/WTF/wtf/DateMath.cpp
# Source/WTF/wtf/UniStdExtras.cpp
patch -ulbf Source/WTF/wtf/UniStdExtras.cpp << EOF
@@ -35,2 +35,3 @@
     int returnValue = -1;
+#ifdef F_GETFD
     do {
@@ -40,2 +41,3 @@
     } while (returnValue == -1 && errno == EINTR);
+#endif

EOF
# fix Tools/CMakeLists.txt
patch -ulbf Tools/CMakeLists.txt << EOF
@@ -40,5 +39,0 @@
-if (WIN32)
-    add_subdirectory(DumpRenderTree)
-    add_subdirectory(TestWebKitAPI)
-    add_subdirectory(MiniBrowser/win)
-endif ()
EOF
# fix Source/WTF/wtf/Platform.h
mv Source/WTF/wtf/Platform.h Source/WTF/wtf/Platform.h.bak
cat > Source/WTF/wtf/Platform.h << EOF
#ifdef _WIN32_WINNT
#if _WIN32_WINNT < 0x0600
#undef _WIN32_WINNT
#define _WIN32_WINNT 0x0600
#endif
#endif
EOF
cat Source/WTF/wtf/Platform.h.bak >> Source/WTF/wtf/Platform.h
# fix Source/WTF/wtf/ASCIICType.cpp (version >= 2.24.0)
patch -ulbf Source/WTF/wtf/ASCIICType.cpp << EOF
@@ -30 +30 @@
-WTF_EXPORT_PRIVATE const unsigned char asciiCaseFoldTable[256] = {
+extern WTF_EXPORT_PRIVATE const unsigned char asciiCaseFoldTable[256] = {
EOF
# fix -D{CMAKE_CXX_FLAGS} in Source/cmake/OptionsCommon.cmake (version >= 2.17.5)
mv Source/cmake/OptionsCommon.cmake Source/cmake/OptionsCommon.cmake.bak &&
sed -e "s/\(-D\)\({CMAKE_CXX_FLAGS}\)/\1\$\2/g" Source/cmake/OptionsCommon.cmake.bak > Source/cmake/OptionsCommon.cmake
# fix missing wtf/win/Win32Handle.h (version >= 2.17.5)
mkdir -p Source/WTF/wtf/win &&
echo "#define Win32Handle HANDLE" > Source/WTF/wtf/win/Win32Handle.h
mkdir -p WinLauncher
mkdir -p Tools/MiniBrowser/win && touch Tools/MiniBrowser/win/CMakeLists.txt
mkdir -p Tools/DumpRenderTree && touch Tools/DumpRenderTree/CMakeLists.txt
mkdir -p Tools/TestRunnerShared/Bindings && touch Tools/TestRunnerShared/Bindings/JSWrapper.cpp
mkdir -p Tools/TestRunnerShared/UIScriptContext && touch Tools/TestRunnerShared/UIScriptContext/UIScriptContext.cpp Tools/TestRunnerShared/UIScriptContext/UIScriptController.cpp
mkdir -p Tools/TestRunnerShared/UIScriptContext/Bindings && touch Tools/TestRunnerShared/UIScriptContext/Bindings/UIScriptController.idl
mkdir -p Source/PerformanceTests && touch Source/PerformanceTests/CMakeLists.txt
mkdir -p Tools/TestWebKitAPI/PerformanceTests && touch Tools/TestWebKitAPI/PerformanceTests/CMakeLists.txt
mkdir -p PerformanceTests && touch PerformanceTests/CMakeLists.txt
mkdir -p Source/WebKitLegacy && touch Source/WebKitLegacy/CMakeLists.txt
mkdir -p Tools/ImageDiff && touch Tools/ImageDiff/CMakeLists.txt
cp -u Source/cmake/OptionsWin.cmake Source/cmake/OptionsWinCairo.cmake
# fix missing Source/WTF/wtf/win/DbgHelperWin.h
sed -i "s/OS(WINDOWS)/0/" Source/WTF/wtf/StackTrace.cpp
# fix missing ICU::data/ICU::i18n/ICU::uc
sed -i.bak -e "s/ICU::/icu/g" Source/WTF/wtf/CMakeLists.txt
#mv Source/WTF/wtf/CMakeLists.txt Source/WTF/wtf/CMakeLists.txt.bak &&
#echo "find_package(ICU)" > Source/WTF/wtf/CMakeLists.txt &&
##sed -e "s/ICU::data/ICU::dt/; s/ICU::i18n/ICU::in/" Source/WTF/wtf/CMakeLists.txt.bak >> Source/WTF/wtf/CMakeLists.txt
#cat Source/WTF/wtf/CMakeLists.txt.bak >> Source/WTF/wtf/CMakeLists.txt
# fix missing targets
mv Source/WebCore/CMakeLists.txt Source/WebCore/CMakeLists.txt.bak
cat > Source/WebCore/CMakeLists.txt << EOF
find_package(ZLIB REQUIRED)
find_package(LibXml2 REQUIRED)
find_package(LibXslt REQUIRED)
find_package(SQLite3 REQUIRED)
EOF
cat Source/WebCore/CMakeLists.txt.bak >> Source/WebCore/CMakeLists.txt
wl-showstatus configure &&
 #    cmake.exe . -LH; rm CMakeCache.txt &&
 #cmake.exe -G"MSYS Makefiles" -Wno-dev -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release . &&
 #C_INCLUDE_PATH=$MINGWPREFIX/enlightenment/include${C_INCLUDE_PATH:+:$C_INCLUDE_PATH} LIBRARY_PATH=$MINGWPREFIX/enlightenment/lib${LIBRARY_PATH:+:$LIBRARY_PATH} cmake.exe -G"MSYS Makefiles" -Wno-dev -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DPORT:STRING=Efl -DPERL_EXECUTABLE:FILEPATH=$PERLDIR/bin/perl.exe -DPYTHON_EXECUTABLE:FILEPATH=$PY2DIR/python.exe -DDRUBY_LIBRARY:FILEPATH=$(ls -1 $MINGWPREFIX/lib/lib*msvcrt-ruby*.dll.a|head -n1) . &&
 #C_INCLUDE_PATH=$MINGWPREFIX/enlightenment/include${C_INCLUDE_PATH:+:$C_INCLUDE_PATH} LIBRARY_PATH=$MINGWPREFIX/enlightenment/lib${LIBRARY_PATH:+:$LIBRARY_PATH} cmake.exe -G"MSYS Makefiles" -Wno-dev -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DPORT:STRING=Efl -DPERL_EXECUTABLE:FILEPATH=$PERLDIR/bin/perl.exe -DPYTHON_EXECUTABLE:FILEPATH=$PY2DIR/python.exe -DDRUBY_LIBRARY:FILEPATH=$(ls -1 $MINGWPREFIX/lib/lib*msvcrt-ruby*.dll.a|head -n1) -DPORT:STRING=WinCairo . &&
 #C_INCLUDE_PATH=$MINGWPREFIX/enlightenment/include${C_INCLUDE_PATH:+:$C_INCLUDE_PATH} LIBRARY_PATH=$MINGWPREFIX/enlightenment/lib${LIBRARY_PATH:+:$LIBRARY_PATH} cmake.exe -G"MSYS Makefiles" -Wno-dev -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DPORT:STRING=Efl -DPERL_EXECUTABLE:FILEPATH=$PERLDIR/bin/perl.exe -DPYTHON_EXECUTABLE:FILEPATH=$PY2DIR/python.exe -DDRUBY_LIBRARY:FILEPATH=$(ls -1 $MINGWPREFIX/lib/lib*msvcrt-ruby*.dll.a|head -n1) -DSHARED_CORE:BOOL=ON -DPORT:STRING=GTK -DPC_FREETYPE2_freetype2_INCLUDEDIR:PATH=$MINGWPREFIX/include/freetype2/freetype . &&
 #PKG_CONFIG= C_INCLUDE_PATH=$MINGWPREFIX/enlightenment/include${C_INCLUDE_PATH:+:$C_INCLUDE_PATH} LIBRARY_PATH=$MINGWPREFIX/enlightenment/lib${LIBRARY_PATH:+:$LIBRARY_PATH} cmake.exe -G"MSYS Makefiles" -Wno-dev -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DPORT:STRING=Efl -DPERL_EXECUTABLE:FILEPATH=$PERLDIR/bin/perl.exe -DPYTHON_EXECUTABLE:FILEPATH=$PY2DIR/python.exe -DDRUBY_LIBRARY:FILEPATH=$(ls -1 $MINGWPREFIX/lib/lib*msvcrt-ruby*.dll.a|head -n1) -DSHARED_CORE:BOOL=ON -DPORT:STRING=GTK -DENABLE_INTROSPECTION:BOOL=OFF -DENABLE_OPENGL:BOOL=OFF . &&
 #PKG_CONFIG= C_INCLUDE_PATH=$MINGWPREFIX/enlightenment/include${C_INCLUDE_PATH:+:$C_INCLUDE_PATH} LIBRARY_PATH=$MINGWPREFIX/enlightenment/lib${LIBRARY_PATH:+:$LIBRARY_PATH} cmake.exe -G"MSYS Makefiles" -Wno-dev -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DPORT:STRING=Efl -DPERL_EXECUTABLE:FILEPATH=$PERLDIR/bin/perl.exe -DPYTHON_EXECUTABLE:FILEPATH=$PY2DIR/python.exe -DDRUBY_LIBRARY:FILEPATH=$(ls -1 $MINGWPREFIX/lib/lib*msvcrt-ruby*.dll.a|head -n1) -DSHARED_CORE:BOOL=ON -DPORT:STRING=GTK -DENABLE_INTROSPECTION:BOOL=OFF -DENABLE_OPENGL:BOOL=OFF -DENABLE_MINIBROWSER:BOOL=OFF -DUSE_SYSTEM_MALLOC:BOOL=ON -DENABLE_X11_TARGET:BOOL=OFF -DENABLE_JIT:BOOL=OFF -DENABLE_GEOLOCATION:BOOL=OFF . &&
 #PKG_CONFIG= C_INCLUDE_PATH=$MINGWPREFIX/enlightenment/include${C_INCLUDE_PATH:+:$C_INCLUDE_PATH} LIBRARY_PATH=$MINGWPREFIX/enlightenment/lib${LIBRARY_PATH:+:$LIBRARY_PATH} cmake.exe -G"MSYS Makefiles" -Wno-dev -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DUSE_THIN_ARCHIVES:BOOL=OFF -DPORT:STRING=WinCairo -DPERL_EXECUTABLE:FILEPATH=$PERLDIR/bin/perl.exe -DPYTHON_EXECUTABLE:FILEPATH=$PY2DIR/python.exe -DDRUBY_LIBRARY:FILEPATH=$(ls -1 $MINGWPREFIX/lib/lib*msvcrt-ruby*.dll.a|head -n1) -DSHARED_CORE:BOOL=ON -DENABLE_INTROSPECTION:BOOL=OFF -DENABLE_OPENGL:BOOL=OFF -DENABLE_MINIBROWSER:BOOL=OFF -DUSE_SYSTEM_MALLOC:BOOL=ON -DENABLE_X11_TARGET:BOOL=OFF -DENABLE_JIT:BOOL=OFF -DENABLE_GEOLOCATION:BOOL=OFF -DENABLE_GLES2:BOOL=OFF -DENABLE_WEB_AUDIO:BOOL=OFF -DENABLE_VIDEO:BOOL=OFF -DENABLE_THREADED_COMPOSITOR:BOOL=OFF . &&
 #PKG_CONFIG= C_INCLUDE_PATH=$MINGWPREFIX/enlightenment/include${C_INCLUDE_PATH:+:$C_INCLUDE_PATH} LIBRARY_PATH=$MINGWPREFIX/enlightenment/lib${LIBRARY_PATH:+:$LIBRARY_PATH} cmake.exe -G"MSYS Makefiles" -Wno-dev -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DUSE_THIN_ARCHIVES:BOOL=OFF -DPORT:STRING=GTK -DPERL_EXECUTABLE:FILEPATH=$PERLDIR/bin/perl.exe -DPYTHON_EXECUTABLE:FILEPATH=$PY2DIR/python.exe -DDRUBY_LIBRARY:FILEPATH=$(ls -1 $MINGWPREFIX/lib/lib*msvcrt-ruby*.dll.a|head -n1) -DSHARED_CORE:BOOL=ON -DENABLE_INTROSPECTION:BOOL=OFF -DENABLE_OPENGL:BOOL=OFF -DENABLE_MINIBROWSER:BOOL=OFF -DUSE_SYSTEM_MALLOC:BOOL=ON -DENABLE_X11_TARGET:BOOL=OFF -DENABLE_JIT:BOOL=OFF -DENABLE_GEOLOCATION:BOOL=OFF -DENABLE_GLES2:BOOL=OFF -DENABLE_WEB_AUDIO:BOOL=OFF -DENABLE_VIDEO:BOOL=OFF -DENABLE_THREADED_COMPOSITOR:BOOL=OFF -DENABLE_WEBKIT=OFF -DENABLE_WEBGL=OFF -DENABLE_API_TESTS=OFF -DENABLE_TOOLS=OFF -DUSE_LD_GOLD=OFF . &&
 #PKG_CONFIG= C_INCLUDE_PATH=$MINGWPREFIX/enlightenment/include${C_INCLUDE_PATH:+:$C_INCLUDE_PATH} LIBRARY_PATH=$MINGWPREFIX/enlightenment/lib${LIBRARY_PATH:+:$LIBRARY_PATH} cmake.exe -G"MSYS Makefiles" -Wno-dev -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DUSE_THIN_ARCHIVES:BOOL=OFF -DPORT:STRING=WinCairo -DPERL_EXECUTABLE:FILEPATH=$PERLDIR/bin/perl.exe -DPYTHON_EXECUTABLE:FILEPATH=$PY2DIR/python.exe -DDRUBY_LIBRARY:FILEPATH=$(ls -1 $MINGWPREFIX/lib/lib*msvcrt-ruby*.dll.a|head -n1) -DSHARED_CORE:BOOL=ON -DENABLE_INTROSPECTION:BOOL=OFF -DENABLE_OPENGL:BOOL=OFF -DENABLE_MINIBROWSER:BOOL=OFF -DUSE_SYSTEM_MALLOC:BOOL=ON -DENABLE_X11_TARGET:BOOL=OFF -DENABLE_JIT:BOOL=OFF -DENABLE_GEOLOCATION:BOOL=OFF -DENABLE_GLES2:BOOL=OFF -DENABLE_WEB_AUDIO:BOOL=OFF -DENABLE_VIDEO:BOOL=OFF -DENABLE_THREADED_COMPOSITOR:BOOL=OFF . &&
 #PKG_CONFIG=$(which pkg-config.exe) C_INCLUDE_PATH=$MINGWPREFIX/enlightenment/include${C_INCLUDE_PATH:+:$C_INCLUDE_PATH} LIBRARY_PATH=$MINGWPREFIX/enlightenment/lib${LIBRARY_PATH:+:$LIBRARY_PATH} cmake.exe -G"MSYS Makefiles" -Wno-dev -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DPORT:STRING=WinCairo -DUSE_THIN_ARCHIVES:BOOL=OFF -DPERL_EXECUTABLE:FILEPATH=$PERLDIR/bin/perl.exe -DPYTHON_EXECUTABLE:FILEPATH=$PY2DIR/python.exe -DDRUBY_LIBRARY:FILEPATH=$(ls -1 $MINGWPREFIX/lib/lib*msvcrt-ruby*.dll.a|head -n1) -DSHARED_CORE:BOOL=ON -DENABLE_INTROSPECTION:BOOL=OFF -DENABLE_OPENGL:BOOL=OFF -DENABLE_MINIBROWSER:BOOL=OFF -DUSE_SYSTEM_MALLOC:BOOL=ON -DENABLE_X11_TARGET:BOOL=OFF -DENABLE_JIT:BOOL=OFF -DENABLE_GEOLOCATION:BOOL=OFF -DENABLE_GLES2:BOOL=OFF -DENABLE_WEB_AUDIO:BOOL=OFF -DENABLE_VIDEO:BOOL=OFF -DENABLE_THREADED_COMPOSITOR:BOOL=OFF -DENABLE_API_TESTS:BOOL=OFF . &&
 PKG_CONFIG=$(which pkg-config.exe) C_INCLUDE_PATH=$MINGWPREFIX/enlightenment/include${C_INCLUDE_PATH:+:$C_INCLUDE_PATH} LIBRARY_PATH=$MINGWPREFIX/enlightenment/lib${LIBRARY_PATH:+:$LIBRARY_PATH} cmake.exe -G"MSYS Makefiles" -Wno-dev -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DPORT:STRING=WinCairo -DUSE_THIN_ARCHIVES:BOOL=OFF -DPERL_EXECUTABLE:FILEPATH=$PERLDIR/bin/perl.exe -DPython_EXECUTABLE:FILEPATH=$PYDIR/python.exe -DDRUBY_LIBRARY:FILEPATH=$(ls -1 $MINGWPREFIX/lib/lib*msvcrt-ruby*.dll.a|head -n1) -DSHARED_CORE:BOOL=ON -DENABLE_INTROSPECTION:BOOL=OFF -DENABLE_OPENGL:BOOL=OFF -DENABLE_MINIBROWSER:BOOL=OFF -DUSE_SYSTEM_MALLOC:BOOL=ON -DENABLE_X11_TARGET:BOOL=OFF -DENABLE_JIT:BOOL=OFF -DENABLE_GEOLOCATION:BOOL=OFF -DENABLE_GLES2:BOOL=OFF -DENABLE_WEB_AUDIO:BOOL=OFF -DENABLE_VIDEO:BOOL=OFF -DENABLE_THREADED_COMPOSITOR:BOOL=OFF -DENABLE_API_TESTS:BOOL=OFF . &&
 #-DENABLE_WEBCORE:BOOL=OFF 
 #-DICU_ROOT:PATH=$MINGWPREFIX 
 #PKG_CONFIG= C_INCLUDE_PATH=$MINGWPREFIX/enlightenment/include${C_INCLUDE_PATH:+:$C_INCLUDE_PATH} LIBRARY_PATH=$MINGWPREFIX/enlightenment/lib${LIBRARY_PATH:+:$LIBRARY_PATH} cmake.exe -G"MSYS Makefiles" -Wno-dev -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DPORT:STRING=GTK -DUSE_THIN_ARCHIVES:BOOL=OFF -DPERL_EXECUTABLE:FILEPATH=$PERLDIR/bin/perl.exe -DPYTHON_EXECUTABLE:FILEPATH=$PY2DIR/python.exe -DDRUBY_LIBRARY:FILEPATH=$(ls -1 $MINGWPREFIX/lib/lib*msvcrt-ruby*.dll.a|head -n1) -DSHARED_CORE:BOOL=ON -DENABLE_INTROSPECTION:BOOL=OFF -DENABLE_OPENGL:BOOL=OFF -DENABLE_MINIBROWSER:BOOL=OFF -DUSE_SYSTEM_MALLOC:BOOL=ON -DENABLE_X11_TARGET:BOOL=OFF -DENABLE_JIT:BOOL=OFF -DENABLE_GEOLOCATION:BOOL=OFF -DENABLE_GLES2:BOOL=OFF -DENABLE_WEB_AUDIO:BOOL=OFF -DENABLE_VIDEO:BOOL=OFF -DENABLE_THREADED_COMPOSITOR:BOOL=OFF -DENABLE_API_TESTS:BOOL=OFF . &&
 sed -i.orig -e "s/^#define \(USE_PTHREADS\) 1/#undef \1/" Source/WTF/wtf/Platform.h &&
 for F in $(find . -name config.h); do
  mv $F $F.bak &&
  echo "#undef _WIN32_WINNT" > $F &&
  echo "#define _WIN32_WINNT 0x0600" >> $F &&
  cat $F.bak >> $F
 done &&
 #fix empty -D (version >= 2.17.5)
 ####<command-line>:0:1: error: macro names must be identifiers
 for F in $(grep -l " -D " $(find -name "*.make")); do
  mv $F $F.bak &&
  sed -e "s/ -D / /g" $F.bak > $F
 done &&
 wl-showstatus build-install &&
 make install/strip &&
    echo OK
# wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && rm -rf webkitgtk-$VERSION
####see also: http://lists.macosforge.org/pipermail/webkit-dev/2009-January/006449.html
####see also: https://gist.github.com/baylej/d32be86616104569b29b
####see also: https://webkit.org/webkit-on-windows/#getting-the-code
#mkdir -p Tools/MiniBrowser/win
#touch Tools/MiniBrowser/win/CMakeLists.txt




