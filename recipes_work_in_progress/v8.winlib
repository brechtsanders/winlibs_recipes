export NAME="V8 JavaScript Engine"
export STATUS=
#export URL=https://chromium.googlesource.com/v8/v8.git
#export URL=https://github.com/v8/v8/wiki
export URL=https://github.com/v8/v8
export BASENAME=v8
export DESCRIPTION="V8 is Google's open source JavaScript engine. V8 implements ECMAScript as specified in ECMA-262. V8 is written in C++ and is used in Google Chrome, the open source browser from Google. V8 can run standalone, or can be embedded into any C++ application."
export CATEGORY=
export TYPE=library
#export VERSION=6.7.288.52
#export VERSIONDATE=20180828
#export VERSION=6.8.275.31
#export VERSIONDATE=20180828
#export VERSION=6.9.208
#export VERSIONDATE=20180625
#export VERSION=6.9.215
#export VERSIONDATE=20180625
#export VERSION=6.9.222
#export VERSIONDATE=20180626
#export VERSION=6.9.228
#export VERSIONDATE=20180626
#export VERSION=6.9.229
#export VERSIONDATE=20180627
#export VERSION=6.9.222
#export VERSIONDATE=20180707
#export VERSION=6.9.398
#export VERSIONDATE=20180714
#export VERSION=6.9.427.18
#export VERSIONDATE=20180828
#export VERSION=7.0.55
#export VERSIONDATE=20180725
#export VERSION=7.0.86
#export VERSIONDATE=20180730
#export VERSION=7.0.121
#export VERSIONDATE=20180801
#export VERSION=7.0.215
#export VERSIONDATE=20180810
#export VERSION=7.0.233
#export VERSIONDATE=20180814
#export VERSION=7.0.243
#export VERSIONDATE=20180821
#export VERSION=7.0.258
#export VERSIONDATE=20180824
#export VERSION=7.0.276
#export VERSIONDATE=20180828
#export VERSION=7.1.6
#export VERSIONDATE=20180902
#export VERSION=7.1.9
#export VERSIONDATE=20180903
#export VERSION=7.1.15
#export VERSIONDATE=20180904
#export VERSION=7.1.114
#export VERSIONDATE=20180917
#export VERSION=7.2.376
#export VERSIONDATE=20181117
#export VERSION=7.2.461
#export VERSIONDATE=20181123
#export VERSION=7.3.73
#export VERSIONDATE=20181208
#export VERSION=7.5.168
#export VERSIONDATE=20190403
#export VERSION=7.5.191
#export VERSIONDATE=20190404
#export VERSION=7.5.269
#export VERSIONDATE=20190413
#export VERSION=7.6.1
#export VERSIONDATE=20190420
#export VERSION=7.6.68
#export VERSIONDATE=20190430
#export VERSION=7.6.303.7
#export VERSIONDATE=20190618
#export VERSION=7.7.5
#export VERSIONDATE=20190603
#export VERSION=7.7.50
#export VERSIONDATE=20190612
#export VERSION=7.7.61
#export VERSIONDATE=20190613
#export VERSION=7.7.101
#export VERSIONDATE=20190618
#export VERSION=7.7.191
#export VERSIONDATE=20190706
#export VERSION=7.7.204
#export VERSIONDATE=20190709
#export VERSION=7.7.213
#export VERSIONDATE=20190710
#export VERSION=7.8.6
#export VERSIONDATE=20190729
#export VERSION=7.8.23
#export VERSIONDATE=20190730
#export VERSION=7.8.64
#export VERSIONDATE=20190807
#export VERSION=7.8.188
#export VERSIONDATE=20190824
#export VERSION=7.9.42
#export VERSIONDATE=20190914
#export VERSION=7.9.80
#export VERSIONDATE=20190920
#export VERSION=7.9.294
#export VERSIONDATE=20191012
#export VERSION=8.0.3
#export VERSIONDATE=20191020
#export VERSION=8.0.356
#export VERSIONDATE=20191125
#export VERSION=8.0.383
#export VERSIONDATE=20191127
#export VERSION=8.1.6
#export VERSIONDATE=20191209
#export VERSION=8.1.70
#export VERSIONDATE=20191223
#export VERSION=8.1.259
#export VERSIONDATE=20200123
#export VERSION=8.2.1
#export VERSIONDATE=20200202
#export VERSION=8.3.3
#export VERSIONDATE=20200316
#export VERSION=8.3.4
#export VERSIONDATE=20200406
#export VERSION=8.3.110.4
#export VERSIONDATE=20200408
#export VERSION=8.4.17
#export VERSIONDATE=20200407
#export VERSION=8.4.28
#export VERSIONDATE=20200408
#export VERSION=8.4.134
#export VERSIONDATE=20200419
#export VERSION=8.5.12
#export VERSIONDATE=20200518
#export VERSION=8.5.33
#export VERSIONDATE=20200521
#export VERSION=8.5.35
#export VERSIONDATE=20200526
#export VERSION=8.6.2
#export VERSIONDATE=20200626
#export VERSION=8.6.395.41
#export VERSIONDATE=20210428
#export VERSION=8.6.395.43
#export VERSIONDATE=20210430
#export VERSION=8.6.395.47
#export VERSIONDATE=20210520
#export VERSION=8.7.1
#export VERSIONDATE=20200822
#export VERSION=8.7.75
#export VERSIONDATE=20200907
#export VERSION=8.7.76
#export VERSIONDATE=20200909
#export VERSION=8.7.77
#export VERSIONDATE=20200910
#export VERSION=8.7.83
#export VERSIONDATE=20200912
#export VERSION=8.8.7
#export VERSIONDATE=20201005
#export VERSION=8.8.278.12
#export VERSIONDATE=20210109
#export VERSION=8.8.278.14
#export VERSIONDATE=20210112
#export VERSION=8.8.278.17
#export VERSIONDATE=20210211
#export VERSION=8.9.1
#export VERSIONDATE=20201116
#export VERSION=8.9.4
#export VERSIONDATE=20201117
#export VERSION=8.9.255.2
#export VERSIONDATE=20210115
#export VERSION=8.9.255.10
#export VERSIONDATE=20210129
#export VERSION=8.9.255.23
#export VERSIONDATE=20210324
#export VERSION=9.0.3
#export VERSIONDATE=20210118
#export VERSION=9.0.257.8
#export VERSIONDATE=20210309
#export VERSION=9.0.257.15
#export VERSIONDATE=20210407
#export VERSION=9.1.28
#export VERSIONDATE=20210303
#export VERSION=9.1.269.18
#export VERSIONDATE=20210428
#export VERSION=9.1.269.21
#export VERSIONDATE=20210504
#export VERSION=9.1.269.37
#export VERSIONDATE=20210629
#export VERSION=9.1.269.39
#export VERSIONDATE=20210715
#export VERSION=9.2.1
#export VERSIONDATE=20210410
#export VERSION=9.2.107
#export VERSIONDATE=20210428
#export VERSION=9.2.230.11
#export VERSIONDATE=20210618
#export VERSION=9.2.230.13
#export VERSIONDATE=20210626
#export VERSION=9.2.230.16
#export VERSIONDATE=20210712
#export VERSION=9.2.230.19
#export VERSIONDATE=20210715
#export VERSION=9.3.2
#export VERSIONDATE=20210522
#export VERSION=9.3.345
#export VERSIONDATE=20210715
#export VERSION=9.4.8
#export VERSIONDATE=20210720
#export VERSION=9.4.146.8
#export VERSIONDATE=20210819
#export VERSION=9.5.1
#export VERSIONDATE=20210814
#export VERSION=9.5.20
#export VERSIONDATE=20210819
#export VERSION=9.6.6
#export VERSIONDATE=20210912
#export VERSION=9.6.182
#export VERSIONDATE=20211009
#export VERSION=9.7.3
#export VERSIONDATE=20211009
#export VERSION=9.7.4
#export VERSIONDATE=20211012
#export VERSION=9.7.27
#export VERSIONDATE=20211015
#export VERSION=9.7.37
#export VERSIONDATE=20220113
#export VERSION=9.9.115.5
#export VERSIONDATE=20220132
#export VERSION=9.9.115.9
#export VERSIONDATE=20220308
#export VERSION=10.0.51
#export VERSIONDATE=20220129
#export VERSION=10.0.54
#export VERSIONDATE=20220201
#export VERSION=10.0.59
#export VERSIONDATE=20220201
#export VERSION=10.0.65
#export VERSIONDATE=20220202
#export VERSION=10.0.84
#export VERSIONDATE=20220204
#export VERSION=10.0.103
#export VERSIONDATE=20220209
#export VERSION=10.0.115
#export VERSIONDATE=20220211
#export VERSION=10.0.125
#export VERSIONDATE=20220214
#export VERSION=10.0.139.6
#export VERSIONDATE=20220308
#export VERSION=10.1.1
#export VERSIONDATE=20220219
#export VERSION=10.1.4
#export VERSIONDATE=20220221
#export VERSION=10.1.13
#export VERSIONDATE=20220223
#export VERSION=10.1.20
#export VERSIONDATE=20220224
#export VERSION=10.1.70
#export VERSIONDATE=20220307
#export VERSION=10.1.77
#export VERSIONDATE=20220308
#export VERSION=10.2.1
#export VERSIONDATE=20220319
#export VERSION=10.2.114
#export VERSIONDATE=20220409
#export VERSION=10.2.154.22
#export VERSIONDATE=20221207
#export VERSION=10.3.1
#export VERSIONDATE=20220416
#export VERSION=10.4.8
#export VERSIONDATE=20220516
#export VERSION=10.4.9
#export VERSIONDATE=20220517
#export VERSION=10.5.4
#export VERSIONDATE=20220611
#export VERSION=10.6.4
#export VERSIONDATE=20220723
#export VERSION=10.6.87
#export VERSIONDATE=20220803
#export VERSION=10.7.4
#export VERSIONDATE=20220821
#export VERSION=10.8.13
#export VERSIONDATE=20220920
#export VERSION=10.8.168.7
#export VERSIONDATE=20221025
#export VERSION=10.8.168.24
#export VERSIONDATE=20221216
#export VERSION=10.8.168.38
#export VERSIONDATE=20230630
#export VERSION=10.8.168.39
#export VERSIONDATE=20230721
#export VERSION=10.9.12
#export VERSIONDATE=20221018
#export VERSION=10.9.61
#export VERSIONDATE=20221023
#export VERSION=10.9.194.8
#export VERSIONDATE=20221216
#export VERSION=11.0.1
#export VERSIONDATE=20221112
#export VERSION=11.0.187
#export VERSIONDATE=20221207
#export VERSION=11.0.226.2
#export VERSIONDATE=20221216
#export VERSION=11.1.10
#export VERSIONDATE=20221219
#export VERSION=11.1.77
#export VERSIONDATE=20221227
#export VERSION=11.1.277.2
#export VERSIONDATE=20230127
#export VERSION=11.1.277.6
#export VERSIONDATE=20230206
#export VERSION=11.2.68
#export VERSIONDATE=20230206
#export VERSION=11.3.5
#export VERSIONDATE=20230225
#export VERSION=11.4.1
#export VERSIONDATE=20230325
#export VERSION=11.4.183.14
#export VERSIONDATE=20230524
#export VERSION=11.5.30
#export VERSIONDATE=20230503
#export VERSION=11.6.8
#export VERSIONDATE=20230525
#export VERSION=11.6.20
#export VERSIONDATE=20230528
#export VERSION=11.6.21
#export VERSIONDATE=20230530
#export VERSION=11.6.189.5
#export VERSIONDATE=20230622
#export VERSION=11.7.1
#export VERSIONDATE=20230622
#export VERSION=11.8.5
#export VERSIONDATE=20230809
export VERSION=11.9.5
export VERSIONDATE=20230905
wl-showstatus --package-version
export DEPENDENCIES=
export OPTIONALDEPENDENCIES=
#export BUILDDEPENDENCIES=gyp
#export OPTIONALBUILDDEPENDENCIES=
export BUILDDEPENDENCIES=gn,ninja
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=LICENSE.v8
export LICENSETYPE=
#export DOWNLOADURL="https://github.com/v8/v8/releases"
export DOWNLOADURL="https://github.com/v8/v8/tags"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
#export DOWNLOADSOURCEURL=https://github.com/v8/v8/archive/$VERSION.tar.gz
export DOWNLOADSOURCEURL=https://github.com/v8/v8/archive/refs/tags/$VERSION.tar.gz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
wl-showstatus extract
tar xz --force-local -f $TARBALLDIR/$BASENAME/$VERSION.tar.gz
cd $BASENAME-$VERSION
pushd $INSTALLPREFIX/python &> /dev/null &&
WININSTALLPREFIX=$(pwd -W) &&
popd &> /dev/null
wl-showstatus build
 pushd $MINGWPREFIX/python/Scripts &> /dev/null &&
 WINGYP=$(pwd -W) &&
 popd &> /dev/null &&
 pushd $MINGWPREFIX/python &> /dev/null &&
 WINPYINC=$(pwd -W) &&
 popd &> /dev/null &&
 #PYTHONPATH=$(echo $WINMINGWPREFIX/Lib/site-packages|sed -e 's?/?\\?g') $MINGWPREFIX/python/Scripts/gyp.exe --help
 #PATH=$MINGWPREFIX/python/Scripts:$PATH PYTHONPATH=$(echo $WINPYINC/Lib/site-packages|sed -e 's?/?\\?g'):$MINGWPREFIX/python/Lib/site-packages${PYTHONPATH:+:$PYTHONPATH} $COMSPEC /C "%PY2DIR%/python.exe $(echo $WINGYP/gyp-script.py|sed -e 's?/?\\?g') --help" &&
 echo "%PY2DIR%/python.exe $(echo $WINGYP/gyp-script.py|sed -e 's?/?\\?g') --help" | PATH=$MINGWPREFIX/python/Scripts:$PATH PYTHONPATH=$(echo $WINPYINC/Lib/site-packages|sed -e 's?/?\\?g'):$MINGWPREFIX/python/Lib/site-packages${PYTHONPATH:+:$PYTHONPATH} $COMSPEC &&
 #PATH=$MINGWPREFIX/python/Scripts:$PATH PYTHONPATH=$(echo $WINPYINC/Lib/site-packages|sed -e 's?/?\\?g'):$MINGWPREFIX/python/Lib/site-packages${PYTHONPATH:+:$PYTHONPATH} $PY2DIR/python.exe $MINGWPREFIX/python/Scripts/gyp-script.py &&
 #PATH=$PY2DIR/Scripts:$PATH PYTHONPATH=$PY2DIR/Lib/site-packages${PYTHONPATH:+:$PYTHONPATH} $PY2DIR/python.exe $MINGWPREFIX/python/Scripts/gyp-script.py &&
 #$PYDIR/python.exe tools/dev/gm.py x64.release &&
    echo OK

mkdir -p build/config
cat > build/dotfile_settings.gni << EOF
build_dotfile_settings = {
 exec_script_whitelist = []
}
EOF
cat > build/config/BUILDCONFIG.gn << EOF
#  toolchain("32") {
#    tool("cc") {
#      command = "gcc {{source}}"
#    }
#    toolchain_args = {
#      current_cpu = "x86"
#    }
#  }
#  toolchain("64") {
#    tool("cc") {
#      command = "gcc {{source}}"
#    }
#    toolchain_args = {
#      current_cpu = "x64"
#    }
#  }
#  if (target_cpu == "x64") {
#    set_default_toolchain("//toolchains:64")
#  } else if (target_cpu == "x86") {
#    set_default_toolchain("//toolchains:32")
#  }
set_default_toolchain("//toolchains:gcc")
target_os="win"
target_cpu="$(if ( echo $RUNPLATFORM | grep -q x86_64 ); then echo "x64"; else "x86"; fi)"
is_gcc=true
is_clang=false
is_debug=false
treat_warnings_as_errors=false
is_win=true
is_android=false
EOF
## fix missing files
#mkdir -p build/config/android
#touch build/config/android/config.gni
#touch build/config/arm.gni
#touch build/config/dcheck_always_on.gni
#touch build/config/host_byteorder.gni
## fix missing python3
#sed -i.bak -e "s/\(script_executable = \"python\)3/\1/" .gn
wl-showstatus configure &&
 PATH=$PYDIR:$PATH gn gen out/build_win --args='os="win" target_os="win" target_cpu="'$(if ( echo $RUNPLATFORM | grep -q x86_64 ); then echo "x64"; else "x86"; fi)'" is_gcc=true is_clang=false is_debug=false treat_warnings_as_errors=false' &&
    echo OK
# wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION
####See also: https://www.programmerall.com/article/6185365454/
####See also: https://github.com/fubark/zig-v8



