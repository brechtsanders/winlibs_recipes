export NAME="TensorFlow"
export STATUS=
export URL=https://www.tensorflow.org/
export BASENAME=tensorflow
export DESCRIPTION="TensorFlow(TM) is an open source software library for high performance numerical computation. Its flexible architecture allows easy deployment of computation across a variety of platforms (CPUs, GPUs, TPUs), and from desktops to clusters of servers to mobile and edge devices. Originally developed by researchers and engineers from the Google Brain team within Googleâ€™s AI organization, it comes with strong support for machine learning and deep learning and the flexible numerical computation core is used across many other scientific domains."
export CATEGORY=math
export TYPE=library
#export VERSION=1.11.0
#export VERSIONDATE=20181012
#export VERSION=1.12.0
#export VERSIONDATE=20181106
#export VERSION=1.12.1
#export VERSIONDATE=20190418
#export VERSION=1.12.2
#export VERSIONDATE=20190419
#export VERSION=1.12.3
#export VERSIONDATE=20190622
#export VERSION=1.13.0
#export VERSIONDATE=20190224
#export VERSION=1.13.1
#export VERSIONDATE=20190226
#export VERSION=1.13.2
#export VERSIONDATE=20190715
#export VERSION=1.14.0
#export VERSIONDATE=20190619
#export VERSION=1.15.0
#export VERSIONDATE=20191017
#export VERSION=1.15.1
#export VERSIONDATE=20200124
#export VERSION=1.15.2
#export VERSIONDATE=20200126
#export VERSION=1.15.3
#export VERSIONDATE=20200519
#export VERSION=1.15.5
#export VERSIONDATE=20210107
#export VERSION=2.0.0
#export VERSIONDATE=20191001
#export VERSION=2.0.1
#export VERSIONDATE=20191026
#export VERSION=2.0.2
#export VERSIONDATE=20200519
#export VERSION=2.0.4
#export VERSIONDATE=20210107
#export VERSION=2.1.0
#export VERSIONDATE=20200109
#export VERSION=2.1.1
#export VERSIONDATE=20200519
#export VERSION=2.1.3
#export VERSIONDATE=20210107
#export VERSION=2.1.4
#export VERSIONDATE=20210616
#export VERSION=2.2.0
#export VERSIONDATE=20200507
#export VERSION=2.2.2
#export VERSIONDATE=20210107
#export VERSION=2.2.3
#export VERSIONDATE=20210616
#export VERSION=2.3.0
#export VERSIONDATE=20200728
#export VERSION=2.3.1
#export VERSIONDATE=20200925
#export VERSION=2.3.2
#export VERSIONDATE=20210107
#export VERSION=2.3.3
#export VERSIONDATE=20210616
#export VERSION=2.3.4
#export VERSIONDATE=20210811
#export VERSION=2.4.0
#export VERSIONDATE=20201215
#export VERSION=2.4.1
#export VERSIONDATE=20210122
#export VERSION=2.4.2
#export VERSIONDATE=20210616
#export VERSION=2.4.3
#export VERSIONDATE=20210811
#export VERSION=2.4.4
#export VERSIONDATE=20211105
#export VERSION=2.5.0
#export VERSIONDATE=20210514
#export VERSION=2.5.1
#export VERSIONDATE=20210811
#export VERSION=2.5.2
#export VERSIONDATE=20211105
#export VERSION=2.5.3
#export VERSIONDATE=20220203
#export VERSION=2.6.0
#export VERSIONDATE=20210812
#export VERSION=2.6.1
#export VERSIONDATE=20211102
#export VERSION=2.6.2
#export VERSIONDATE=20211105
#export VERSION=2.6.3
#export VERSIONDATE=20220203
#export VERSION=2.6.5
#export VERSIONDATE=20220524
#export VERSION=2.7.0
#export VERSIONDATE=20211105
#export VERSION=2.7.1
#export VERSIONDATE=20220203
#export VERSION=2.7.3
#export VERSIONDATE=20220524
#export VERSION=2.7.4
#export VERSIONDATE=20220903
#export VERSION=2.8.0
#export VERSIONDATE=20220203
#export VERSION=2.8.2
#export VERSIONDATE=20220524
#export VERSION=2.8.3
#export VERSIONDATE=20220903
#export VERSION=2.8.4
#export VERSIONDATE=20221117
#export VERSION=2.9.0
#export VERSIONDATE=20220517
#export VERSION=2.9.1
#export VERSIONDATE=20220524
#export VERSION=2.9.2
#export VERSIONDATE=20220903
#export VERSION=2.9.3
#export VERSIONDATE=20221117
#export VERSION=2.10.0
#export VERSIONDATE=20220907
#export VERSION=2.10.1
#export VERSIONDATE=20221117
#export VERSION=2.11.0
#export VERSIONDATE=20221118
#export VERSION=2.11.1
#export VERSIONDATE=20230321
#export VERSION=2.12.0
#export VERSIONDATE=20230323
#export VERSION=2.12.1
#export VERSIONDATE=20230706
#export VERSION=2.13.0
#export VERSIONDATE=20230706
#export VERSION=2.13.1
#export VERSIONDATE=20230927
#export VERSION=2.14.0
#export VERSIONDATE=20230927
#export VERSION=2.14.1
#export VERSIONDATE=20231115
export VERSION=2.15.0
export VERSIONDATE=20231115
wl-showstatus --package-version
export DEPENDENCIES=cpuinfo
export OPTIONALDEPENDENCIES=
#export BUILDDEPENDENCIES=bazel
#export OPTIONALBUILDDEPENDENCIES=
export BUILDDEPENDENCIES=cmake,ninja
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=LICENSE
export LICENSETYPE=Apache
export DOWNLOADURL="https://github.com/tensorflow/tensorflow/releases"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
export DOWNLOADSOURCEURL=https://github.com/tensorflow/tensorflow/archive/v$VERSION.tar.gz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
wl-showstatus extract
tar xz --force-local -f $TARBALLDIR/$BASENAME/v$VERSION.tar.gz
cd $BASENAME-$VERSION
mkdir -p build_static build_shared &&
 wl-showstatus configure &&
 #cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=OFF -DFETCHCONTENT_FULLY_DISCONNECTED:BOOL=OFF -DCPUINFO_BUILD_TOOLS:BOOL=ON -DTFLITE_ENABLE_GPU:BOOL=OFF -DTFLITE_ENABLE_RUY:BOOL=OFF -DTFLITE_ENABLE_NNAPI:BOOL=OFF -DTFLITE_ENABLE_XNNPACK:BOOL=OFF -DTFLITE_ENABLE_MMAP:BOOL=OFF -DFXDIV_BUILD_BENCHMARKS:BOOL=OFF -DFXDIV_BUILD_TESTS:BOOL=OFF -DBUILD_TESTING:BOOL=OFF -DCLOG_BUILD_TESTS:BOOL=OFF -DCPUINFO_BUILD_MOCK_TESTS:BOOL=OFF -DCPUINFO_BUILD_UNIT_TESTS:BOOL=OFF -DEIGEN_BUILD_BTL:BOOL=OFF -Stensorflow/lite -Bbuild_static &&
 #cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=OFF -DFETCHCONTENT_FULLY_DISCONNECTED:BOOL=OFF -DCPUINFO_BUILD_TOOLS:BOOL=ON -DTFLITE_ENABLE_GPU:BOOL=OFF -DTFLITE_ENABLE_RUY:BOOL=OFF -DTFLITE_ENABLE_NNAPI:BOOL=OFF -DTFLITE_ENABLE_XNNPACK:BOOL=OFF -DTFLITE_ENABLE_MMAP:BOOL=OFF -DFXDIV_BUILD_BENCHMARKS:BOOL=OFF -DFXDIV_BUILD_TESTS:BOOL=OFF -DBUILD_TESTING:BOOL=OFF -DCLOG_BUILD_TESTS:BOOL=OFF -DCPUINFO_BUILD_MOCK_TESTS:BOOL=OFF -DCPUINFO_BUILD_UNIT_TESTS:BOOL=OFF -DEIGEN_BUILD_BTL:BOOL=OFF -DCMAKE_CXX_FLAGS:STRING="-D_USE_MATH_DEFINES" -Stensorflow/lite -Bbuild_static &&
 #cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=OFF -DTFLITE_C_BUILD_SHARED_LIBS:BOOL=OFF -DFETCHCONTENT_FULLY_DISCONNECTED:BOOL=OFF -DCPUINFO_BUILD_TOOLS:BOOL=ON -DTFLITE_ENABLE_GPU:BOOL=OFF -DTFLITE_ENABLE_RUY:BOOL=OFF -DTFLITE_ENABLE_NNAPI:BOOL=OFF -DTFLITE_ENABLE_XNNPACK:BOOL=OFF -DTFLITE_ENABLE_MMAP:BOOL=OFF -DABSL_PROPAGATE_CXX_STD:BOOL=ON -DFXDIV_BUILD_BENCHMARKS:BOOL=OFF -DFXDIV_BUILD_TESTS:BOOL=OFF -DBUILD_TESTING:BOOL=OFF -DCLOG_BUILD_TESTS:BOOL=OFF -DCPUINFO_BUILD_MOCK_TESTS:BOOL=OFF -DCPUINFO_BUILD_UNIT_TESTS:BOOL=OFF -DEIGEN_BUILD_BTL:BOOL=OFF -DCMAKE_CXX_FLAGS:STRING="-D_USE_MATH_DEFINES" -Stensorflow/lite -Bbuild_static &&
 cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=OFF -DTFLITE_C_BUILD_SHARED_LIBS:BOOL=OFF -DFETCHCONTENT_FULLY_DISCONNECTED:BOOL=OFF -DCPUINFO_BUILD_TOOLS:BOOL=ON -DTFLITE_ENABLE_GPU:BOOL=OFF -DTFLITE_ENABLE_RUY:BOOL=OFF -DTFLITE_ENABLE_NNAPI:BOOL=OFF -DTFLITE_ENABLE_XNNPACK:BOOL=OFF -DTFLITE_ENABLE_MMAP:BOOL=OFF -DABSL_PROPAGATE_CXX_STD:BOOL=ON -DFXDIV_BUILD_BENCHMARKS:BOOL=OFF -DFXDIV_BUILD_TESTS:BOOL=OFF -DBUILD_TESTING:BOOL=OFF -DCLOG_BUILD_TESTS:BOOL=OFF -DCPUINFO_BUILD_MOCK_TESTS:BOOL=OFF -DCPUINFO_BUILD_UNIT_TESTS:BOOL=OFF -DEIGEN_BUILD_BTL:BOOL=OFF -DCMAKE_CXX_FLAGS:STRING="-D_USE_MATH_DEFINES -I$MINGWPREFIX/include/mman-win32" -Stensorflow/lite -Bbuild_static &&
 #cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=OFF -DFETCHCONTENT_FULLY_DISCONNECTED:BOOL=ON -DABSL_USE_EXTERNAL_GOOGLETEST:BOOL=ON -DCPUINFO_BUILD_TOOLS:BOOL=OFF -DTFLITE_ENABLE_GPU:BOOL=OFF -DTFLITE_ENABLE_RUY:BOOL=OFF -DTFLITE_ENABLE_NNAPI:BOOL=OFF -DTFLITE_ENABLE_XNNPACK:BOOL=OFF -DTFLITE_ENABLE_MMAP:BOOL=OFF -DFXDIV_BUILD_BENCHMARKS:BOOL=OFF -DFXDIV_BUILD_TESTS:BOOL=OFF -DBUILD_TESTING:BOOL=OFF -DCLOG_BUILD_TESTS:BOOL=OFF -DCPUINFO_BUILD_MOCK_TESTS:BOOL=OFF -DCPUINFO_BUILD_UNIT_TESTS:BOOL=OFF -DEIGEN_BUILD_BTL:BOOL=OFF -DCMAKE_CXX_FLAGS:STRING="-D_USE_MATH_DEFINES" -Stensorflow/lite -Bbuild_static &&
 #-DXNNPACK_USE_SYSTEM_LIBS:BOOL=ON 
 #-DPython3_EXECUTABLE:PATH=$PYDIR/python.exe 
 wl-showstatus configure &&
 #cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=ON -DFETCHCONTENT_FULLY_DISCONNECTED:BOOL=OFF -DCPUINFO_BUILD_TOOLS:BOOL=ON -DTFLITE_ENABLE_GPU:BOOL=OFF -DTFLITE_ENABLE_RUY:BOOL=OFF -DTFLITE_ENABLE_NNAPI:BOOL=OFF -DTFLITE_ENABLE_XNNPACK:BOOL=OFF -DTFLITE_ENABLE_MMAP:BOOL=OFF -DFXDIV_BUILD_BENCHMARKS:BOOL=OFF -DFXDIV_BUILD_TESTS:BOOL=OFF -DBUILD_TESTING:BOOL=OFF -DCLOG_BUILD_TESTS:BOOL=OFF -DCPUINFO_BUILD_MOCK_TESTS:BOOL=OFF -DCPUINFO_BUILD_UNIT_TESTS:BOOL=OFF -DEIGEN_BUILD_BTL:BOOL=OFF -DCMAKE_SHARED_LINKER_FLAGS:STRING="-Wl,--allow-multiple-definition" -Stensorflow/lite -Bbuild_shared &&
 #cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=ON -DFETCHCONTENT_FULLY_DISCONNECTED:BOOL=OFF -DCPUINFO_BUILD_TOOLS:BOOL=ON -DTFLITE_ENABLE_GPU:BOOL=OFF -DTFLITE_ENABLE_RUY:BOOL=OFF -DTFLITE_ENABLE_NNAPI:BOOL=OFF -DTFLITE_ENABLE_XNNPACK:BOOL=OFF -DTFLITE_ENABLE_MMAP:BOOL=OFF -DFXDIV_BUILD_BENCHMARKS:BOOL=OFF -DFXDIV_BUILD_TESTS:BOOL=OFF -DBUILD_TESTING:BOOL=OFF -DCLOG_BUILD_TESTS:BOOL=OFF -DCPUINFO_BUILD_MOCK_TESTS:BOOL=OFF -DCPUINFO_BUILD_UNIT_TESTS:BOOL=OFF -DEIGEN_BUILD_BTL:BOOL=OFF -DCMAKE_CXX_FLAGS:STRING="-D_USE_MATH_DEFINES" -DCMAKE_SHARED_LINKER_FLAGS:STRING="-Wl,--allow-multiple-definition" -Stensorflow/lite -Bbuild_shared &&
 #cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=ON -DTFLITE_C_BUILD_SHARED_LIBS:BOOL=ON -DFETCHCONTENT_FULLY_DISCONNECTED:BOOL=OFF -DCPUINFO_BUILD_TOOLS:BOOL=ON -DTFLITE_ENABLE_GPU:BOOL=OFF -DTFLITE_ENABLE_RUY:BOOL=OFF -DTFLITE_ENABLE_NNAPI:BOOL=OFF -DTFLITE_ENABLE_XNNPACK:BOOL=OFF -DTFLITE_ENABLE_MMAP:BOOL=OFF -DABSL_PROPAGATE_CXX_STD:BOOL=ON -DFXDIV_BUILD_BENCHMARKS:BOOL=OFF -DFXDIV_BUILD_TESTS:BOOL=OFF -DBUILD_TESTING:BOOL=OFF -DCLOG_BUILD_TESTS:BOOL=OFF -DCPUINFO_BUILD_MOCK_TESTS:BOOL=OFF -DCPUINFO_BUILD_UNIT_TESTS:BOOL=OFF -DEIGEN_BUILD_BTL:BOOL=OFF -DCMAKE_CXX_FLAGS:STRING="-D_USE_MATH_DEFINES" -DCMAKE_SHARED_LINKER_FLAGS:STRING="-Wl,--allow-multiple-definition" -Stensorflow/lite -Bbuild_shared &&
 cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=ON -DTFLITE_C_BUILD_SHARED_LIBS:BOOL=ON -DFETCHCONTENT_FULLY_DISCONNECTED:BOOL=OFF -DCPUINFO_BUILD_TOOLS:BOOL=ON -DTFLITE_ENABLE_GPU:BOOL=OFF -DTFLITE_ENABLE_RUY:BOOL=OFF -DTFLITE_ENABLE_NNAPI:BOOL=OFF -DTFLITE_ENABLE_XNNPACK:BOOL=OFF -DTFLITE_ENABLE_MMAP:BOOL=OFF -DABSL_PROPAGATE_CXX_STD:BOOL=ON -DFXDIV_BUILD_BENCHMARKS:BOOL=OFF -DFXDIV_BUILD_TESTS:BOOL=OFF -DBUILD_TESTING:BOOL=OFF -DCLOG_BUILD_TESTS:BOOL=OFF -DCPUINFO_BUILD_MOCK_TESTS:BOOL=OFF -DCPUINFO_BUILD_UNIT_TESTS:BOOL=OFF -DEIGEN_BUILD_BTL:BOOL=OFF -DCMAKE_CXX_FLAGS:STRING="-D_USE_MATH_DEFINES -I$(cygpath -m $MINGWPREFIX/include/mman-win32)" -DCMAKE_SHARED_LINKER_FLAGS:STRING="-Wl,--allow-multiple-definition" -Stensorflow/lite -Bbuild_shared &&
 #cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=ON -DFETCHCONTENT_FULLY_DISCONNECTED:BOOL=ON -DABSL_USE_EXTERNAL_GOOGLETEST:BOOL=ON -DCPUINFO_BUILD_TOOLS:BOOL=OFF -DTFLITE_ENABLE_GPU:BOOL=OFF -DTFLITE_ENABLE_RUY:BOOL=OFF -DTFLITE_ENABLE_NNAPI:BOOL=OFF -DTFLITE_ENABLE_XNNPACK:BOOL=OFF -DTFLITE_ENABLE_MMAP:BOOL=OFF -DFXDIV_BUILD_BENCHMARKS:BOOL=OFF -DFXDIV_BUILD_TESTS:BOOL=OFF -DBUILD_TESTING:BOOL=OFF -DCLOG_BUILD_TESTS:BOOL=OFF -DCPUINFO_BUILD_MOCK_TESTS:BOOL=OFF -DCPUINFO_BUILD_UNIT_TESTS:BOOL=OFF -DEIGEN_BUILD_BTL:BOOL=OFF -DCMAKE_CXX_FLAGS:STRING="-D_USE_MATH_DEFINES" -DCMAKE_SHARED_LINKER_FLAGS:STRING="-Wl,--allow-multiple-definition" -Stensorflow/lite -Bbuild_shared &&
 # fix missing max() (version >= 2.8.0)
 sed -i.bak "s/static inline uint32_t bit_mask(uint32_t bits)/static inline uint32_t max(uint32_t a, uint32_t b) {\n\treturn a > b ? a : b;\n}\n\n&/" */cpuinfo/src/x86/windows/init.c &&
 wl-showstatus build-install &&
 ( ninja -Cbuild_static install/strip ||
  (
   # fix farmhash
   sed -i.bak -e "s/if defined(__LITTLE_ENDIAN_*)/& || defined(_WIN32)/" build_static/farmhash/src/farmhash.h &&
   echo -e '@@ -168 +168 @@\n-#else\n+#elif !defined(_WIN32)' | patch -ulbf build_static/farmhash/src/farmhash.cc &&
   ninja -Cbuild_static install/strip ) || 
  (
   # fix missing max()
   mv build_static/cpuinfo-source/src/x86/windows/init.c build_static/cpuinfo-source/src/x86/windows/init.c.bak &&
   echo "#define max(a,b) (((a) > (b)) ? (a) : (b))" > build_static/cpuinfo-source/src/x86/windows/init.c &&
   cat build_static/cpuinfo-source/src/x86/windows/init.c.bak >> build_static/cpuinfo-source/src/x86/windows/init.c &&
   ninja -Cbuild_static install/strip
  )
 ) &&
 wl-showstatus build-install &&
 ( ninja -Cbuild_shared install/strip ||
  (
   # fix farmhash
   sed -i.bak -e "s/if defined(__LITTLE_ENDIAN_*)/& || defined(_WIN32)/" build_shared/farmhash/src/farmhash.h &&
   echo -e '@@ -168 +168 @@\n-#else\n+#elif !defined(_WIN32)' | patch -ulbf build_shared/farmhash/src/farmhash.cc &&
   ninja -Cbuild_shared install/strip ) || 
  (
   # fix missing max()
   mv build_shared/cpuinfo-source/src/x86/windows/init.c build_shared/cpuinfo-source/src/x86/windows/init.c.bak &&
   echo "#define max(a,b) (((a) > (b)) ? (a) : (b))" > build_shared/cpuinfo-source/src/x86/windows/init.c &&
   cat build_shared/cpuinfo-source/src/x86/windows/init.c.bak >> build_shared/cpuinfo-source/src/x86/windows/init.c &&
   ninja -Cbuild_shared install/strip
  )
 ) &&
    echo OK
# wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION
####Install
####See also: https://github.com/tensorflow/tensorboard/
####See also: https://github.com/tensorflow/models/
####See also: https://www.tensorflow.org/install/source_windows
####See also: https://www.tensorflow.org/lite/guide/build_cmake



#mkdir -p build_test && cmake.exe -G"MSYS Makefiles" -Stensorflow/compiler/mlir/hlo -Bbuild_test -LH && echo OK; rm -rf build_test
