export NAME="Veyon"
export STATUS=
export URL=https://veyon.io/
export BASENAME=veyon
export DESCRIPTION="Veyon is a free and open source software for monitoring and controlling computers across multiple platforms. Veyon supports you in teaching in digital learning environments, performing virtual trainings or giving remote support."
export CATEGORY=
export TYPE=application
#export VERSION=4.7.3
#export VERSIONDATE=20220612
export VERSION=4.7.4
export VERSIONDATE=20220730
wl-showstatus --package-version
export DEPENDENCIES=qt,libjpeg,zlib,openssl,openpam,lzo,qca2,cyrus-sasl
#export DEPENDENCIES=qt6,libjpeg,zlib,openssl,openpam,lzo,qca2,cyrus-sasl
#X11: xorg-dev libxtst-dev libfakekey-dev
#libjpeg: libjpeg-dev provided by libjpeg-turbo8-dev or libjpeg62-turbo-dev
#zlib: zlib1g-dev
#OpenSSL: libssl-dev
#PAM: libpam0g-dev
#procps:  -dev
#LDAP: libldap2-dev
export OPTIONALDEPENDENCIES=
export BUILDDEPENDENCIES=cmake,ninja
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=COPYING
export LICENSETYPE=GPL
export DOWNLOADURL="https://github.com/veyon/veyon/releases"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
export DOWNLOADSOURCEURL=https://github.com/veyon/veyon/releases/download/v$VERSION/veyon-$VERSION-src.tar.bz2
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
wl-showstatus extract
tar xfj $TARBALLDIR/$BASENAME/veyon-$VERSION-src.tar.bz2
cd $BASENAME-$VERSION
mkdir -p build_win &&
 wl-showstatus configure &&
 PATH=$PATH:$MINGWPREFIX/qt/bin QTDIR=$MINGWPREFIX/qt QMAKESPEC=$MINGWPREFIX/qt/mkspecs/win32-g++ cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DWITH_QT6:BOOL=OFF -DWITH_TRANSLATIONS:BOOL=OFF -DWITH_PCH:BOOL=OFF -S. -Bbuild_win &&
 #PATH=$PATH:$MINGWPREFIX/qt6/bin QTDIR=$MINGWPREFIX/qt6 QMAKESPEC=$MINGWPREFIX/qt6/mkspecs/win32-g++ cmake.exe -Wno-dev -GNinja -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DWITH_QT6:BOOL=ON -DWITH_TRANSLATIONS:BOOL=OFF -DWITH_PCH:BOOL=OFF -S. -Bbuild_win &&
 sed -i.bak -e "s/-E create_symlink/-E copy/g" build_win/build.ninja &&
 #wl-showstatus build &&
 #ninja -Cbuild_win &&
 wl-showstatus build-install &&
 ninja -Cbuild_win install/strip &&
    echo OK
# wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION



