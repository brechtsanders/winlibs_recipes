#export NAME="MySQL"
#export STATUS=
#export URL=http://www.mysql.org/downloads/mysql/4.1.html
#export BASENAME=mysql
#export DESCRIPTION="MySQL database client library"
#export CATEGORY=db
#export TYPE=library
#export VERSION=4.1.22
#export VERSIONDATE=
#wl-showstatus --package-version
#export DEPENDENCIES=zlib,pthreads
#export OPTIONALDEPENDENCIES=
#export BUILDDEPENDENCIES=
#export OPTIONALBUILDDEPENDENCIES=
#export LICENSEFILE=COPYING
## also depends on ncurses/curses/termcap/tinfo
#export LICENSETYPE="GPL2 \(FLOSS exception for client libraries\)"
#export DOWNLOADURL="http://dev.mysql.com/downloads/mysql/4.1.html"
#export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
#export DOWNLOADSOURCEURL=http://dev.mysql.com/get/Downloads/MySQL-`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/mysql-$VERSION.tar.gz/from/http://mysql.easynet.be/
#wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
#wl-wait4deps
#tar xz --force-local -f $TARBALLDIR/$BASENAME/mysql-$VERSION.tar.gz
#cd mysql-$VERSION
#mv configure configure.bak
#sed -e 's/\*cygwin\*)/\*cygwin\* \| \*mingw\*)/' configure.bak > configure
#mv cmd-line-utils/libedit/tty.h cmd-line-utils/libedit/tty.h.orig
##sed -e 's/u_int/unsigned int/g' -e 's/^\#define[ \t]*CONTROL(A)[ \t]*((A) \& 037)[ \t]*$/\#define CONTROL(A) ((A) \& 0x1F)/' cmd-line-utils/libedit/tty.h.orig > cmd-line-utils/libedit/tty.h
#sed -e 's/u_int/unsigned int/g' cmd-line-utils/libedit/tty.h.orig > cmd-line-utils/libedit/tty.h
###mv $MINGWDIR/lib/gcc-lib/i686-pc-msys/2.95.3-1/include/sys/termios.h $MINGWDIR/lib/gcc-lib/i686-pc-msys/2.95.3-1/include/sys/termios.h.orig
###sed -e "s/^#define CTRL(c'h')/#define CTRL(ch)/" $MINGWDIR/lib/gcc-lib/i686-pc-msys/2.95.3-1/include/sys/termios.h.orig > $MINGWDIR/lib/gcc-lib/i686-pc-msys/2.95.3-1/include/sys/termios.h
##wl-showstatus configure &&
##./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --with-pthread --without-server --without-bench --without-extra-tools --without-man --with-isam --with-zlib-dir=$INSTALLPREFIX CFLAGS="-I$MINGWPREFIX/include" LDFLAGS="-L$MINGWPREFIX/lib"
##./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --with-named-curses-libs=curses --enable-thread-safe-client --with-pthread --without-server --without-bench --without-extra-tools --without-man --with-zlib-dir=$INSTALLPREFIX --without-debug CFLAGS="-I$MINGWPREFIX/include" LDFLAGS="-L$MINGWPREFIX/lib"
#./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --with-named-curses-libs=curses --enable-thread-safe-client --with-pthread --without-server --without-bench --without-extra-tools --without-man --with-zlib-dir=$MINGWPREFIX --without-debug
###CFLAGS="-DNO_OLDNAMES"
##make
##make install
##cd ..
#cd libmysql_r
#make
#make install
#cd ../..
#wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION



#export NAME="MySQL"
#export STATUS=
#export URL=http://www.mysql.org/downloads/mysql/
#export BASENAME=mysql
#export DESCRIPTION="MySQL database client library"
#export CATEGORY=db
#export TYPE=library
#export VERSION=5.1.53
#export VERSIONDATE=20101123
#wl-showstatus --package-version
#export DEPENDENCIES=zlib,pthreads
#export OPTIONALDEPENDENCIES=
#export BUILDDEPENDENCIES=
#export OPTIONALBUILDDEPENDENCIES=
#export LICENSEFILE=COPYING
## also depends on ncurses/curses/termcap/tinfo
#export LICENSETYPE="GPL2 \(FLOSS exception for client libraries\)"
#export DOWNLOADURL="http://dev.mysql.com/downloads/mysql/5.1.html"
#export DOWNLOADURL="http://dev.mysql.com/downloads/mysql/"
#export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
#export DOWNLOADSOURCEURL=http://dev.mysql.com/get/Downloads/MySQL-`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/$BASENAME-$VERSION.tar.gz/from/http://mysql.easynet.be/
#wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
#wl-wait4deps
#tar xz --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.gz
#cd $BASENAME-$VERSION
##mv configure configure.bak
##sed -e 's/\*cygwin\*)/\*cygwin\* \| \*mingw\*)/' configure.bak > configure
##mv cmd-line-utils/libedit/tty.h cmd-line-utils/libedit/tty.h.orig
###sed -e 's/u_int/unsigned int/g' -e 's/^\#define[ \t]*CONTROL(A)[ \t]*((A) \& 037)[ \t]*$/\#define CONTROL(A) ((A) \& 0x1F)/' cmd-line-utils/libedit/tty.h.orig > cmd-line-utils/libedit/tty.h
##sed -e 's/u_int/unsigned int/g' cmd-line-utils/libedit/tty.h.orig > cmd-line-utils/libedit/tty.h
##./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --with-named-curses-libs=libcurses --enable-thread-safe-client --with-pthread --without-server --without-extra-tools --without-man --with-zlib-dir=$MINGWPREFIX --with-other-libc=$MINGWPREFIX CFLAGS="-I$MINGWPREFIX/include" LDFLAGS="-L$MINGWPREFIX/lib" && make install
##./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --with-named-curses-libs=libtermcap --enable-thread-safe-client --with-pthread --without-server --without-extra-tools --without-man --with-zlib-dir=$MINGWPREFIX --with-other-libc=$MINGWPREFIX CFLAGS="-I$MINGWPREFIX/include" LDFLAGS="-L$MINGWPREFIX/lib" && make install
##./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --with-named-curses-libs=libcurses --without-readline --enable-thread-safe-client --with-pthread --without-server --without-extra-tools --without-man --without-docs --without-bench --with-zlib-dir=$MINGWPREFIX --with-other-libc=$MINGWPREFIX CFLAGS="-I$MINGWPREFIX/include" LDFLAGS="-L$MINGWPREFIX/lib" && make install
#./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --with-named-curses-libs=libcurses --without-readline --enable-thread-safe-client --with-pthread --without-server --without-extra-tools --without-man --without-docs --without-bench --with-zlib-dir=$MINGWPREFIX --with-other-libc=$MINGWPREFIX &&
# make install-strip &&
# wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION cd .. && rm -rf $BASENAME-$VERSION



#export NAME="MySQL"
#export STATUS=
#export URL=http://www.mysql.org/downloads/mysql/
#export BASENAME=mysql
#export DESCRIPTION="MySQL database client library"
#export CATEGORY=db
#export TYPE=library
##export VERSION=5.5.12
##export VERSIONDATE=20110506
##export VERSION=5.5.13
##export VERSIONDATE=20110603
##export VERSION=5.5.14
##export VERSIONDATE=20110804
##export VERSION=5.5.15
##export VERSIONDATE=20110804
##export VERSION=5.5.23
##export VERSIONDATE=20120424
##export VERSION=5.5.29
##export VERSIONDATE=20130122
#export VERSION=5.5.32
#export VERSIONDATE=20130604
##export VERSION=5.6.21
##export VERSIONDATE=20141019
#####include/my_pthread.h:59: error: expected specifier-qualifier-list before 'CONDITION_VARIABLE'
#wl-showstatus --package-version
#export DEPENDENCIES=zlib,pthreads
#export OPTIONALDEPENDENCIES=
#export BUILDDEPENDENCIES=cmake
#export OPTIONALBUILDDEPENDENCIES=
#export LICENSEFILE=COPYING
#export DOWNLOADURL="http://dev.mysql.com/downloads/mysql/"
#export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
#wl-wait4deps
##export DOWNLOADSOURCEURL=http://dev.mysql.com/get/Downloads/MySQL-`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/$BASENAME-$VERSION.tar.gz/from/http://mysql.easynet.be/
#export DOWNLOADSOURCEURL=http://cdn.mysql.com/Downloads/MySQL-`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/$BASENAME-$VERSION.tar.gz
#wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
#tar xz --force-local -f $TARBALLDIR/$BASENAME/$BASENAME-$VERSION.tar.gz
#cd $BASENAME-$VERSION
## fix include/my_global.h ERROR: /include/dlfcn.h:40: error: expected identifier before '__null'
#patch -ulbf include/my_global.h << EOF
#--- include/my_global.h  2011-04-11 12:44:02 +0200
#+++ include/my_global.h  2011-05-06 22:05:30 +0200
#@@ -1356,3 +1356,3 @@
#
#-#ifdef HAVE_DLOPEN
#+#if defined(HAVE_DLOPEN) && !defined(_WIN32)
# #if defined(HAVE_DLFCN_H)
#EOF
##-DFLAGS:STRING="-Wl,--as-needed -lpthread" 
#wl-showstatus configure &&
#wl-showstatus configure
#CXX=gcc CXXFLAGS="-fno-exceptions" cmake.exe -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_CONFIG=mysql_release -DSIGNCODE=0 -DCOMMUNITY_BUILD:BOOL=ON -DCMAKE_THREAD_LIBS_INIT:STRING="-lpthread" -DWITH_ZLIB:STRING=system -DWITH_SSL:STRING=system -DWITH_READLINE:STRING=system -DWITH_DEBUG=0 . &&
# wl-showstatus build-install &&
# echo "#undef HAVE_DLFCN_H 1" >> include/config.h &&
# echo "#undef HAVE_DLFCN_H 1" >> include/my_config.h &&
# echo "#undef HAVE_LIBPTHREAD" >> include/config.h &&
# echo "#undef HAVE_LIBPTHREAD" >> include/my_config.h &&
# echo "#define HAVE_ISNAN 1" >> include/my_config.h &&
# #echo "#define HAVE_PTHREAD_RWLOCK_RDLOCK 1" >> include/config.h
# #echo "#define HAVE_PTHREAD_RWLOCK_RDLOCK 1" >> include/my_config.h
# make install/strip &&
#    echo OK
#####E:\Prg\MinGW-mSys\mingw32\include/dlfcn.h:40: error: expected identifier before '__null'
# wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION cd .. && rm -rf $BASENAME-$VERSION
##cmake.exe -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DDISABLE_SHARED:BOOL=OFF -DWITH_ZLIB:STRING=system -DWITH_LIBEVENT:STRING=system -DWITH_SSL:STRING=system . &&
## wl-showstatus build &&
## make install/strip &&
##    echo OK
## wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION



export NAME="MySQL for Windows without installer"
export STATUS=
export URL=http://www.mysql.org/downloads/mysql/
export BASENAME=mysql
export DESCRIPTION="MySQL database client library"
export CATEGORY=db
export TYPE=library
#export VERSION=4.1.22
#export VERSION=5.0.51b
#export VERSION=5.0.67
#export VERSION=5.1.30
#export VERSION=5.1.32
#export VERSION=5.1.33
#export VERSION=5.1.35
#export VERSION=5.1.36
#export VERSION=5.1.37
#export VERSION=5.1.38
#export VERSION=5.1.39
#export VERSION=5.1.40
#export VERSION=5.1.41
#export VERSION=5.1.42
#export VERSIONDATE=20100102
#export VERSION=5.1.43
#export VERSIONDATE=20100201
#export VERSION=5.1.45
#export VERSIONDATE=20100316
#export VERSION=5.1.46
#export VERSIONDATE=20100423
#export VERSION=5.1.47
#export VERSIONDATE=20100520
#export VERSION=5.1.48
#export VERSIONDATE=20100520
#export VERSION=5.1.49
#export VERSIONDATE=20100523
#export VERSION=5.1.50
#export VERSIONDATE=20100823
#export VERSION=5.1.51
#export VERSIONDATE=20100927
#export VERSION=5.1.52
#export VERSIONDATE=20101102
#export VERSION=5.1.53
#export VERSIONDATE=20101123
#export VERSION=5.1.54
#export VERSIONDATE=20101214
#export VERSION=5.1.55
#export VERSIONDATE=20110209
#export VERSION=5.1.56
#export VERSIONDATE=20110305
#export VERSION=5.1.57
#export VERSIONDATE=20110506
#export VERSION=5.5.11
#export VERSIONDATE=20110506
#export VERSION=5.5.15
#export VERSIONDATE=20110506
#export VERSION=5.5.21
#export VERSIONDATE=20120304
#export VERSION=5.5.22
#export VERSIONDATE=20120322
#export VERSION=5.5.23
#export VERSIONDATE=20120413
#export VERSION=5.5.24
#export VERSIONDATE=20120508
#export VERSION=5.5.25
#export VERSIONDATE=20120531
#export VERSION=5.5.25a
#export VERSIONDATE=20120705
#export VERSION=5.5.27
#export VERSIONDATE=20120803
#export VERSION=5.5.28
#export VERSIONDATE=20120929
#export VERSION=5.5.29
#export VERSIONDATE=20121221
#export VERSION=5.5.30
#export VERSIONDATE=20130131
#export VERSION=5.5.31
#export VERSIONDATE=20130418
#export VERSION=5.5.32
#export VERSIONDATE=20130604
#export VERSION=5.5.33
#export VERSIONDATE=20130731
#export VERSION=5.5.34
#export VERSIONDATE=20130920
#export VERSION=5.5.35
#export VERSIONDATE=20131203
#export VERSION=5.5.36
#export VERSIONDATE=20140201
#export VERSION=5.5.37
#export VERSIONDATE=20140327
#export VERSION=5.5.38
#export VERSIONDATE=20140531
#export VERSION=5.5.39
#export VERSIONDATE=20140731
#export VERSION=5.5.40
#export VERSIONDATE=20140923
#export VERSION=5.5.41
#export VERSIONDATE=20141128
#export VERSION=5.5.42
#export VERSIONDATE=20150203
#export VERSION=5.5.43
#export VERSIONDATE=20150407
#export VERSION=5.5.44
#export VERSIONDATE=20150529
#export VERSION=5.5.45
#export VERSIONDATE=20150724
#export VERSION=5.5.46
#export VERSIONDATE=20151001
#export VERSION=5.5.47
#export VERSIONDATE=20151205
#export VERSION=5.5.48
#export VERSIONDATE=20160405
#export VERSION=5.5.49
#export VERSIONDATE=20160410
#export VERSION=5.5.50
#export VERSIONDATE=20160602
#export VERSION=5.5.51
#export VERSIONDATE=20160729
#export VERSION=5.5.52
#export VERSIONDATE=20160906
#export VERSION=5.5.53
#export VERSIONDATE=20161012
#export VERSION=5.5.54
#export VERSIONDATE=20161212
#export VERSION=5.5.55
#export VERSIONDATE=20170410
#export VERSION=5.5.56
#export VERSIONDATE=20170501
#export VERSION=5.5.57
#export VERSIONDATE=20170717
#export VERSION=5.5.58
#export VERSIONDATE=20171016
#export VERSION=5.5.59
#export VERSIONDATE=20180105
#export VERSION=5.5.60
#export VERSIONDATE=20180418
#export VERSION=5.5.61
#export VERSIONDATE=20180724
export VERSION=5.5.62
export VERSIONDATE=20181021
#export VERSION=5.6.2
#export VERSIONDATE=20110506
#export VERSION=5.6.21
#export VERSIONDATE=20141019
#export VERSION=9.6.0
#export VERSIONDATE=20260124
wl-showstatus --package-version
export DEPENDENCIES=
export OPTIONALDEPENDENCIES=
export BUILDDEPENDENCIES=pexports
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=COPYING
export LICENSETYPE="GPL2 \(FLOSS exception for client libraries\)"
#export DOWNLOADURL="http://dev.mysql.com/downloads/mysql/5.1.html mysql-noinstall- -win32.zip"
#export DOWNLOADURL="http://dev.mysql.com/downloads/mysql/ mysql-noinstall- -win32.zip"
#export DOWNLOADURL="http://mysql.mirror.kangaroot.net/Downloads/MySQL-5.1/ mysql-noinstall- -win32.zip"
#export DOWNLOADURL="http://mysql.mirror.kangaroot.net/Downloads/MySQL-5.5/ mysql-noinstall- -win32.zip"
#export DOWNLOADURL="http://mysql.mirror.kangaroot.net/Downloads/MySQL-5.6/ mysql-noinstall- -win32.zip"
export DOWNLOADURL="http://mysql.mirror.kangaroot.net/Downloads/MySQL-5.5/"
#export DOWNLOADURL="https://dev.mysql.com/downloads/mysql/"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
wl-wait4deps
if ( echo $RUNPLATFORM | grep -qv x86_64 ); then
 OSTYPE=win32
else
 OSTYPE=winx64
fi
#export DOWNLOADSOURCEURL=http://dev.mysql.com/get/Downloads/MySQL-`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/mysql-noinstall-$VERSION-$OSTYPE.zip/from/http://mysql.easynet.be/
#export DOWNLOADSOURCEURL=http://dev.mysql.com/get/Downloads/MySQL-`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/mysql-noinstall-$VERSION-$OSTYPE.zip/from/http://mysql.mirror.kangaroot.net/
#export DOWNLOADSOURCEURL=http://mysql.mirror.kangaroot.net/Downloads/MySQL-`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/mysql-noinstall-$VERSION-$OSTYPE.zip
export DOWNLOADSOURCEURL=http://mysql.mirror.kangaroot.net/Downloads/MySQL-$(echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/')/mysql-$VERSION-$OSTYPE.zip
#export DOWNLOADSOURCEURL=https://dev.mysql.com/get/Downloads/MySQL-$(echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/')/mysql-$VERSION.tar.gz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
mkdir -p $BASENAME-$VERSION
cd $BASENAME-$VERSION
wl-showstatus install &&
mkdir -p $INSTALLPREFIX/include/mysql $INSTALLPREFIX/bin $INSTALLPREFIX/lib
#unzip -oq -d $INSTALLPREFIX -j $TARBALLDIR/$BASENAME/mysql-noinstall-$VERSION-$OSTYPE.zip mysql-$VERSION-$OSTYPE/COPYING
#unzip -oq -d $INSTALLPREFIX/include/mysql -j $TARBALLDIR/$BASENAME/mysql-noinstall-$VERSION-$OSTYPE.zip mysql-$VERSION-$OSTYPE/include/*
#unzip -oq -d $INSTALLPREFIX/bin -j $TARBALLDIR/$BASENAME/mysql-noinstall-$VERSION-$OSTYPE.zip mysql-$VERSION-$OSTYPE/bin/libmysql.dll mysql-$VERSION-$OSTYPE/bin/mysql.exe
#unzip -oq -d $INSTALLPREFIX/lib -j $TARBALLDIR/$BASENAME/mysql-noinstall-$VERSION-$OSTYPE.zip mysql-$VERSION-$OSTYPE/lib/opt/libmysql.lib mysql-$VERSION-$OSTYPE/lib/opt/mysqlclient.lib
##unzip -oq -d $INSTALLPREFIX/bin -j $TARBALLDIR/$BASENAME/mysql-noinstall-$VERSION-$OSTYPE.zip mysql-$VERSION-$OSTYPE/scripts/mysql_config
#unzip -oq -d $INSTALLPREFIX/bin -j $TARBALLDIR/$BASENAME/mysql-noinstall-$VERSION-$OSTYPE.zip mysql-$VERSION-$OSTYPE/scripts/mysql_config.pl && mv $INSTALLPREFIX/bin/mysql_config.pl $INSTALLPREFIX/bin/mysql_config
#rm $INSTALLPREFIX/include/mysql/libmysqld.def
#mv $INSTALLPREFIX/include/mysql/*.def $INSTALLPREFIX/lib/
#cat >> $INSTALLPREFIX/lib/libmysql.def << EOF
#  mysql_affected_rows@4
#  mysql_close@4
#  mysql_error@4
#  mysql_escape_string@12
#  mysql_fetch_fields@4
#  mysql_fetch_lengths@4
#  mysql_fetch_row@4
#  mysql_free_result@4
#  mysql_init@4
#  mysql_num_fields@4
#  mysql_options@12
#  mysql_query@8
#  mysql_real_connect@32
#  mysql_real_escape_string@16
#  mysql_stmt_bind_param@8
#  mysql_stmt_bind_result@8
#  mysql_stmt_close@4
#  mysql_stmt_error@4
#  mysql_stmt_execute@4
#  mysql_stmt_fetch@4
#  mysql_stmt_free_result@4
#  mysql_stmt_init@4
#  mysql_stmt_param_count@4
#  mysql_stmt_prepare@12
#  mysql_stmt_result_metadata@4
#  mysql_stmt_store_result@4
#  mysql_store_result@4
#  mysql_use_result@4
#  myodbc_remove_escape@8
#  mysql_autocommit@8
#  mysql_change_user@16
#  mysql_character_set_name@4
#  mysql_set_character_set@8
#  mysql_commit@4
#  mysql_connect
#  mysql_create_db
#  mysql_debug@4
#  mysql_dump_debug_info@4
#  mysql_eof@4
#  mysql_fetch_field@4
#  mysql_fetch_field_direct@8
#  mysql_field_count@4
#  mysql_field_seek@8
#  mysql_field_tell@4
#  mysql_get_client_info@0
#  mysql_get_client_version@0
#  mysql_get_host_info@4
#  mysql_get_proto_info@4
#  mysql_get_server_info@4
#  mysql_get_server_version@4
#  mysql_hex_string@12
#  mysql_kill@8
#  mysql_list_dbs@8
#  mysql_list_fields@12
#  mysql_list_processes@4
#  mysql_list_tables@8
#  mysql_more_results@4
#  mysql_next_result@4
#  mysql_num_rows@4
#  mysql_ping@4
#  mysql_real_query@12
#  mysql_rollback@4
#  mysql_row_tell@4
#  mysql_select_db@8
#  mysql_set_server_option@8
#  mysql_shutdown@8
#  mysql_sqlstate@4
#  mysql_ssl_set@24
#  mysql_stat@4
#  mysql_stmt_affected_rows@4
#  mysql_stmt_attr_get@12
#  mysql_stmt_attr_set@12
#  mysql_stmt_data_seek@12
#  mysql_stmt_errno@4
#  mysql_stmt_fetch_column@16
#  mysql_stmt_field_count@4
#  mysql_stmt_insert_id@4
#  mysql_stmt_num_rows@4
#  mysql_stmt_param_metadata@4
#  mysql_stmt_reset@4
#  mysql_stmt_row_seek@8
#  mysql_stmt_row_tell@4
#  mysql_stmt_send_long_data@16
#  mysql_stmt_sqlstate@4
#  mysql_thread_end@0
#  mysql_thread_id@4
#  mysql_thread_init@0
#  mysql_thread_safe@0
#  mysql_warning_count@4
#  mysql_insert_id@4
#  mysql_errno@4
#  mysql_data_seek@12
#EOF
unzip -oq -j $TARBALLDIR/$BASENAME/mysql-$VERSION-$OSTYPE.zip mysql-$VERSION-$OSTYPE/COPYING
unzip -oq -d $INSTALLPREFIX/include/mysql -j $TARBALLDIR/$BASENAME/mysql-$VERSION-$OSTYPE.zip mysql-$VERSION-$OSTYPE/include/*
unzip -oq -d $INSTALLPREFIX/bin -j $TARBALLDIR/$BASENAME/mysql-$VERSION-$OSTYPE.zip mysql-$VERSION-$OSTYPE/lib/libmysql.dll mysql-$VERSION-$OSTYPE/bin/mysql.exe
unzip -oq -d $INSTALLPREFIX/lib -j $TARBALLDIR/$BASENAME/mysql-$VERSION-$OSTYPE.zip mysql-$VERSION-$OSTYPE/lib/libmysql.lib mysql-$VERSION-$OSTYPE/lib/mysqlclient.lib
unzip -oq -d $INSTALLPREFIX/bin -j $TARBALLDIR/$BASENAME/mysql-$VERSION-$OSTYPE.zip mysql-$VERSION-$OSTYPE/bin/mysql_config.pl && mv $INSTALLPREFIX/bin/mysql_config.pl $INSTALLPREFIX/bin/mysql_config
pexports $INSTALLPREFIX/bin/libmysql.dll > $INSTALLPREFIX/lib/libmysql.def
# fix mysql_config (contains bad compiler switches and excessive quotes)
mv $INSTALLPREFIX/bin/mysql_config $INSTALLPREFIX/bin/mysql_config.bak
sed -e 's?/MT /Zi /O2 /Ob1 /D NDEBUG?-O2 -DNDEBUG?; s?/wd4996??; s?\\"??g; s?ws2_32?-lws2_32?; s?Secur32?-lsecur32?' $INSTALLPREFIX/bin/mysql_config.bak > $INSTALLPREFIX/bin/mysql_config
rm $INSTALLPREFIX/bin/mysql_config.bak
#reimp $INSTALLPREFIX/lib/libmysql.lib -d
#rm liblibmysql.a
#mv libmysql.def $INSTALLPREFIX/lib/libmysql.def
##$RUNPLATFORM-dlltool -k -D $INSTALLPREFIX/bin/libmysql.dll -d $INSTALLPREFIX/lib/libmysql.def -l $INSTALLPREFIX/lib/libmysqlclient.a
##libtool --mode=link gcc -g -O -o $INSTALLPREFIX/lib/libmysql.la $INSTALLPREFIX/bin/libmysql.dll $INSTALLPREFIX/bin/libmysql.dll.a -lm
dlltool -k -d $INSTALLPREFIX/lib/libmysql.def -l $INSTALLPREFIX/lib/libmysql.a && 
 dlltool -k -D $INSTALLPREFIX/bin/libmysql.dll -d $INSTALLPREFIX/lib/libmysql.def -l $INSTALLPREFIX/lib/libmysql.dll.a && 
 cp $INSTALLPREFIX/lib/libmysql.a $INSTALLPREFIX/lib/libmysqlclient.a && 
 cp $INSTALLPREFIX/lib/libmysql.dll.a $INSTALLPREFIX/lib/libmysqlclient.dll.a &&
    echo OK
# wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION --no-strip && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION



#export NAME="mysql-connector-c"
#export STATUS=
#export URL=http://dev.mysql.com/downloads/connector/c/
#export BASENAME=mysql
#export DESCRIPTION="Connector/C (libmysql) is a client library for C development."
#export CATEGORY=database
#export TYPE=library
##export VERSION=6.0.2
##export VERSIONDATE=20130129
##export VERSION=6.1.0
##export VERSIONDATE=20130604
##export VERSION=6.1.2
##export VERSIONDATE=20131118
##CMake Error at E:/Prog/MinGW-mSys32-4.7.0/msys/custombuilt32/share/cmake-2.8/Modules/TestBigEndian.cmake:44 (message): no suitable type found
#export VERSION=6.1.6
#export VERSIONDATE=20150724
#wl-showstatus --package-version
#export DEPENDENCIES=pthreads,zlib,openssl
#export OPTIONALDEPENDENCIES=
#export BUILDDEPENDENCIES=
#export OPTIONALBUILDDEPENDENCIES=
#export LICENSEFILE=COPYING
#export LICENSETYPE=GPL
#export DOWNLOADURL="http://dev.mysql.com/downloads/connector/c/ mysql-connector-c"
#export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
##export DOWNLOADSOURCEURL=http://dev.mysql.com/get/Downloads/Connector-C/mysql-connector-c-$VERSION.tar.gz/from/http://cdn.mysql.com/
##export DOWNLOADSOURCEURL=http://cdn.mysql.com/Downloads/Connector-C/mysql-connector-c-$VERSION.tar.gz
#export DOWNLOADSOURCEURL=http://cdn.mysql.com/Downloads/Connector-C/mysql-connector-c-$VERSION-src.tar.gz
#wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
#wl-wait4deps
##tar xz --force-local -f $TARBALLDIR/$BASENAME/mysql-connector-c-$VERSION.tar.gz
#tar xz --force-local -f $TARBALLDIR/$BASENAME/mysql-connector-c-$VERSION-src.tar.gz
##cd mysql-connector-c-$VERSION
#cd mysql-connector-c-$VERSION-src
## fix CMakeLists.txt
#patch -ulbf CMakeLists.txt << EOF
#--- CMakeLists.txt  2009-08-07 14:31:12 +0200
#+++ CMakeLists.txt  2013-01-29 23:16:28 +0100
#@@ -20,4 +20,7 @@
#
#+ENABLE_LANGUAGE(C CXX)
# PROJECT(libmysql)
#
#+LINK_LIBRARIES(ws2_32 mswsock netapi32)
#+
# IF(NOT CMAKE_BUILD_TYPE)
#@@ -27,7 +30,7 @@
# # This reads user configuration, generated by configure.js.
#-IF(WIN32 AND EXISTS \${CMAKE_SOURCE_DIR}/win/configure.data)
#-  INCLUDE(\${CMAKE_SOURCE_DIR}/win/configure.data)
#-ENDIF(WIN32 AND EXISTS \${CMAKE_SOURCE_DIR}/win/configure.data)
#+#IF(WIN32 AND EXISTS \${CMAKE_SOURCE_DIR}/win/configure.data)
#+#  INCLUDE(\${CMAKE_SOURCE_DIR}/win/configure.data)
#+#ENDIF(WIN32 AND EXISTS \${CMAKE_SOURCE_DIR}/win/configure.data)
#
#-IF(CMAKE_COMPILER_IS_GNUCXX)
#+#IF(CMAKE_COMPILER_IS_GNUCXX)
#   SET(CMAKE_C_FLAGS "\${CMAKE_C_FLAGS} -Wall")
#@@ -35,3 +38,3 @@
#   SET(CMAKE_CXX_COMPILER "\${CMAKE_C_COMPILER}" CACHE INTERNAL "C++ Compiler" FORCE)
#-ENDIF(CMAKE_COMPILER_IS_GNUCXX)
#+#ENDIF(CMAKE_COMPILER_IS_GNUCXX)
#
#@@ -54,6 +57,6 @@
#
#-IF(WIN32)
#-  FILE(WRITE "\${CMAKE_SOURCE_DIR}/win/version.cmake" "SET(CONNECTOR_PRODUCT_VERSION \${CONNECTOR_C_NUMERIC_VERSION})
#-SET(CONNECTOR_PRODUCT_LEVEL \${CONNECTOR_C_LEVEL})")
#-ENDIF(WIN32)
#+#IF(WIN32)
#+#  FILE(WRITE "\${CMAKE_SOURCE_DIR}/win/version.cmake" "SET(CONNECTOR_PRODUCT_VERSION \${CONNECTOR_C_NUMERIC_VERSION})
#+#SET(CONNECTOR_PRODUCT_LEVEL \${CONNECTOR_C_LEVEL})")
#+#ENDIF(WIN32)
#
#@@ -74,2 +77,3 @@
#
#+SET (SKIP_SSL TRUE)
# IF(NOT SKIP_SSL AND NOT WITH_OPENSSL)
#@@ -84,6 +88,6 @@
# # explicitely undefined in my_pthread.h
#-IF(NOT WIN32)
#+#IF(NOT WIN32)
#   SET(CMAKE_CXX_FLAGS_DEBUG "\${CMAKE_CXX_FLAGS_DEBUG} -DSAFEMALLOC -DSAFE_MUTEX")
#   SET(CMAKE_C_FLAGS_DEBUG "\${CMAKE_C_FLAGS_DEBUG} -DSAFEMALLOC -DSAFE_MUTEX")
#-ENDIF(NOT WIN32)
#+#ENDIF(NOT WIN32)
#
#@@ -120,7 +124,7 @@
# # enable debug info also in Release build, and create PDB to be able to analyze crashes
#-IF(WIN32)
#-  SET(CMAKE_CXX_FLAGS_RELEASE "\${CMAKE_CXX_FLAGS_RELEASE} /Zi")
#-  SET(CMAKE_C_FLAGS_RELEASE "\${CMAKE_C_FLAGS_RELEASE} /Zi")
#-  SET(CMAKE_EXE_LINKER_FLAGS_RELEASE "\${CMAKE_EXE_LINKER_FLAGS_RELEASE} /debug")
#-ENDIF(WIN32)
#+#IF(WIN32)
#+#  SET(CMAKE_CXX_FLAGS_RELEASE "\${CMAKE_CXX_FLAGS_RELEASE} /Zi")
#+#  SET(CMAKE_C_FLAGS_RELEASE "\${CMAKE_C_FLAGS_RELEASE} /Zi")
#+#  SET(CMAKE_EXE_LINKER_FLAGS_RELEASE "\${CMAKE_EXE_LINKER_FLAGS_RELEASE} /debug")
#+#ENDIF(WIN32)
#
#@@ -139,6 +143,6 @@
# #TODO: update the code and remove the disabled warnings
#-IF(WIN32)
#-  SET(CMAKE_CXX_FLAGS "\${CMAKE_CXX_FLAGS} /wd4800 /wd4805")
#-  SET(CMAKE_C_FLAGS "\${CMAKE_C_FLAGS} /wd4800 /wd4805")
#-ENDIF(WIN32)
#+#IF(WIN32)
#+#  SET(CMAKE_CXX_FLAGS "\${CMAKE_CXX_FLAGS} /wd4800 /wd4805")
#+#  SET(CMAKE_C_FLAGS "\${CMAKE_C_FLAGS} /wd4800 /wd4805")
#+#ENDIF(WIN32)
#EOF
## remove endian test from CMakePlatformTests.txt
#mv CMakePlatformTests.txt CMakePlatformTests.txt.bak
#grep -v TEST_BIG_ENDIAN CMakePlatformTests.txt.bak > CMakePlatformTests.txt
## fix extlib/yassl/include/config.h
#patch -ulbf extlib/yassl/include/config.h << EOF
#--- extlib/yassl/include/config.h  2009-08-07 14:31:12 +0200
#+++ extlib/yassl/include/config.h  2013-01-30 16:46:34 +0100
#@@ -2,5 +2,5 @@
# /* Headers we may want to use. */
#-#define HAVE_ALLOCA_H 1
#-#define HAVE_ARPA_INET_H 1
#-#define HAVE_CRYPT_H 1
#+/* #undef HAVE_ALLOCA_H */
#+/* #undef HAVE_ARPA_INET_H */
#+/* #undef HAVE_CRYPT_H */
# #define HAVE_DIRENT_H 1
#@@ -11,4 +11,4 @@
# /* #undef HAVE_FPU_CONTROL_H */
#-#define HAVE_GRP_H 1
#-#define HAVE_IEEEFP_H 1
#+/* #undef HAVE_GRP_H */
#+/* #undef HAVE_IEEEFP_H */
# #define HAVE_LIMITS_H 1
#@@ -16,6 +16,6 @@
# #define HAVE_MEMORY_H 1
#-#define HAVE_NETINET_IN_H 1
#+/* #undef HAVE_NETINET_IN_H */
# /* #undef HAVE_PATHS_H */
#-#define HAVE_PWD_H 1
#-#define HAVE_SCHED_H 1
#+/* #undef HAVE_PWD_H */
#+/* #undef HAVE_SCHED_H */
# /* #undef HAVE_SELECT_H */
#@@ -25,19 +25,19 @@
# #define HAVE_STRING_H 1
#-#define HAVE_SYNCH_H 1
#+/* #undef HAVE_SYNCH_H */
# /* #undef HAVE_SYSENT_H */
# /* #undef HAVE_SYS_FPU_H */
#-#define HAVE_SYS_IOCTL_H 1
#-#define HAVE_SYS_IPC_H 1
#-#define HAVE_SYS_MMAN_H 1
#+/* #undef HAVE_SYS_IOCTL_H */
#+/* #undef HAVE_SYS_IPC_H */
#+/* #undef HAVE_SYS_MMAN_H */
# /* #undef HAVE_SYS_PRCTL_H */
#-#define HAVE_SYS_SELECT_H 1
#-#define HAVE_SYS_SHM_H 1
#-#define HAVE_SYS_SOCKET_H 1
#+/* #undef HAVE_SYS_SELECT_H */
#+/* #undef HAVE_SYS_SHM_H */
#+/* #undef HAVE_SYS_SOCKET_H */
# #define HAVE_SYS_STAT_H 1
#-#define HAVE_SYS_STREAM_H 1
#+/* #undef HAVE_SYS_STREAM_H */
# #define HAVE_SYS_TIMEB_H 1
# #define HAVE_SYS_TYPES_H 1
#-#define HAVE_SYS_UN_H 1
#-#define HAVE_TERMIOS_H 1
#-#define HAVE_TERMIO_H 1
#+/* #undef HAVE_SYS_UN_H */
#+/* #undef HAVE_TERMIOS_H */
#+/* #undef HAVE_TERMIO_H */
# #define HAVE_UNISTD_H 1
#@@ -48,22 +48,22 @@
# /* #undef HAVE_AIOWAIT */
#-#define HAVE_ALARM 1
#+/* #undef HAVE_ALARM */
# /* #undef HAVE_ALLOCA */
#-#define HAVE_BCMP 1
#+/* #undef HAVE_BCMP */
# /* #undef HAVE_BFILL */
# /* #undef HAVE_BMOVE */
#-#define HAVE_BZERO 1
#+/* #undef HAVE_BZERO */
# /* #undef HAVE_CLOCK_GETTIME */
# /* #undef HAVE_COMPRESS */
#-#define HAVE_CRYPT 1
#-#define HAVE_DLERROR 1
#-#define HAVE_DLOPEN 1
#-#define HAVE_FCHMOD 1
#-#define HAVE_FCNTL 1
#-#define HAVE_FCONVERT 1
#+/* #undef HAVE_CRYPT */
#+/* #undef HAVE_DLERROR */
#+/* #undef HAVE_DLOPEN */
#+/* #undef HAVE_FCHMOD */
#+/* #undef HAVE_FCNTL */
#+/* #undef HAVE_FCONVERT */
# /* #undef HAVE_FDATASYNC */
#-/* #undef HAVE_FESETROUND */
#+#define HAVE_FESETROUND 1
# #define HAVE_FINITE 1
# /* #undef HAVE_FP_EXCEPT */
#-#define HAVE_FSEEKO 1
#-#define HAVE_FSYNC 1
#+/* #undef HAVE_FSEEKO */
#+/* #undef HAVE_FSYNC */
# /* #undef HAVE_GETADDRINFO */
#@@ -72,22 +72,22 @@
# /* #undef HAVE_GETHOSTBYNAME_R */
#-#define HAVE_GETHRTIME 1
#+/* #undef HAVE_GETHRTIME */
# /* #undef HAVE_GETNAMEINFO */
# #define HAVE_GETPAGESIZE 1
#-#define HAVE_GETPASS 1
#-#define HAVE_GETPASSPHRASE 1
#-#define HAVE_GETPWNAM 1
#-#define HAVE_GETPWUID 1
#-#define HAVE_GETRLIMIT 1
#-#define HAVE_GETRUSAGE 1
#-#define HAVE_GETWD 1
#-#define HAVE_GMTIME_R 1
#-#define HAVE_INITGROUPS 1
#+/* #undef HAVE_GETPASS */
#+/* #undef HAVE_GETPASSPHRASE */
#+/* #undef HAVE_GETPWNAM */
#+/* #undef HAVE_GETPWUID */
#+/* #undef HAVE_GETRLIMIT */
#+/* #undef HAVE_GETRUSAGE */
#+/* #undef HAVE_GETWD */
#+/* #undef HAVE_GMTIME_R */
#+/* #undef HAVE_INITGROUPS */
# #define HAVE_ISNAN 1
# #define HAVE_LDIV 1
#-#define HAVE_LOCALTIME_R 1
#-/* #undef HAVE_LOG2 */
#+/* #undef HAVE_LOCALTIME_R */
#+#define HAVE_LOG2 1
# #define HAVE_LONGJMP 1
#-#define HAVE_LSTAT 1
#-#define HAVE_MADVISE 1
#-#define HAVE_DECL_MADVISE 1
#+/* #undef HAVE_LSTAT */
#+/* #undef HAVE_MADVISE */
#+/* #undef HAVE_DECL_MADVISE */
# /* #undef HAVE_MALLINFO */
#@@ -97,30 +97,30 @@
# #define HAVE_MEMMOVE 1
#-#define HAVE_MKSTEMP 1
#-#define HAVE_MLOCK 1
#-#define HAVE_MLOCKALL 1
#-#define HAVE_MMAP 1
#-#define HAVE_MMAP64 1
#+/* #undef HAVE_MKSTEMP */
#+/* #undef HAVE_MLOCK */
#+/* #undef HAVE_MLOCKALL */
#+/* #undef HAVE_MMAP */
#+/* #undef HAVE_MMAP64 */
# #define HAVE_PERROR 1
#-#define HAVE_POLL 1
#-#define HAVE_PREAD 1
#+/* #undef HAVE_POLL */
#+/* #undef HAVE_PREAD */
# /* #undef HAVE_PTHREAD_ATTR_CREATE */
#-#define HAVE_PTHREAD_ATTR_GETSTACKSIZE 1
#+/* #undef HAVE_PTHREAD_ATTR_GETSTACKSIZE */
# /* #undef HAVE_PTHREAD_ATTR_SETPRIO */
#-#define HAVE_PTHREAD_ATTR_SETSCHEDPARAM 1
#-#define HAVE_PTHREAD_ATTR_SETSCOPE 1
#-#define HAVE_PTHREAD_ATTR_SETSTACKSIZE 1
#+/* #undef HAVE_PTHREAD_ATTR_SETSCHEDPARAM */
#+/* #undef HAVE_PTHREAD_ATTR_SETSCOPE */
#+/* #undef HAVE_PTHREAD_ATTR_SETSTACKSIZE */
# /* #undef HAVE_PTHREAD_CONDATTR_CREATE */
# /* #undef HAVE_PTHREAD_INIT */
#-#define HAVE_PTHREAD_KEY_DELETE 1
#-#define HAVE_PTHREAD_KEY_DELETE 1
#-#define HAVE_PTHREAD_KILL 1
#-#define HAVE_PTHREAD_RWLOCK_RDLOCK 1
#+/* #undef HAVE_PTHREAD_KEY_DELETE */
#+/* #undef HAVE_PTHREAD_KEY_DELETE */
#+/* #undef HAVE_PTHREAD_KILL */
#+/* #undef HAVE_PTHREAD_RWLOCK_RDLOCK */
# /* #undef HAVE_PTHREAD_SETPRIO_NP */
#-#define HAVE_PTHREAD_SETSCHEDPARAM 1
#-#define HAVE_PTHREAD_SIGMASK 1
#+/* #undef HAVE_PTHREAD_SETSCHEDPARAM */
#+/* #undef HAVE_PTHREAD_SIGMASK */
# /* #undef HAVE_PTHREAD_THREADMASK */
# /* #undef HAVE_PTHREAD_YIELD_NP */
#-#define HAVE_READDIR_R 1
#-#define HAVE_READLINK 1
#-#define HAVE_REALPATH 1
#+/* #undef HAVE_READDIR_R */
#+/* #undef HAVE_READLINK */
#+/* #undef HAVE_REALPATH */
# #define HAVE_RENAME 1
#@@ -128,9 +128,9 @@
# /* #undef HAVE_SCHED_YIELD */
#-#define HAVE_SELECT 1
#+/* #undef HAVE_SELECT */
# /* #undef HAVE_SETFD */
# /* #undef HAVE_SETFILEPOINTER */
#-#define HAVE_SIGACTION 1
#+/* #undef HAVE_SIGACTION */
# /* #undef HAVE_SIGTHREADMASK */
#-#define HAVE_SIGWAIT 1
#-#define HAVE_SLEEP 1
#+/* #undef HAVE_SIGWAIT */
#+/* #undef HAVE_SLEEP */
# #define HAVE_SNPRINTF 1
#@@ -138,3 +138,3 @@
# #define HAVE_STRERROR 1
#-#define HAVE_STRLCPY 1
#+/* #undef HAVE_STRLCPY */
# /* #undef HAVE_STRNLEN */
#@@ -143,4 +143,4 @@
# #define HAVE_STRSTR 1
#-#define HAVE_STRTOK_R 1
#-#define HAVE_STRTOK_R 1
#+/* #undef HAVE_STRTOK_R */
#+/* #undef HAVE_STRTOK_R */
# #define HAVE_STRTOL 1
#@@ -150,4 +150,4 @@
# #define HAVE_TELL 1
#-#define HAVE_THR_SETCONCURRENCY 1
#-#define HAVE_THR_YIELD 1
#+/* #undef HAVE_THR_SETCONCURRENCY */
#+/* #undef HAVE_THR_YIELD */
# /* #undef HAVE_VASPRINTF */
#@@ -199,3 +199,3 @@
#
#-#define SIZEOF_SIGSET_T 16
#+#define SIZEOF_SIGSET_T 4
# #if SIZEOF_SIGSET_T
#@@ -214,3 +214,3 @@
#
#-#define SIZEOF_UINT 4
#+/* #undef SIZEOF_UINT */
# #if SIZEOF_UINT
#@@ -219,3 +219,3 @@
#
#-#define SIZEOF_ULONG 4
#+/* #undef SIZEOF_ULONG */
# #if SIZEOF_ULONG
#@@ -264,3 +264,3 @@
#
#-#define SIZEOF_SOCKLEN_T 4
#+/* #undef SIZEOF_SOCKLEN_T */
# #if SIZEOF_SOCKLEN_T
#@@ -278,3 +278,3 @@
#
#-#define WORDS_BIGENDIAN 1
#+/* #undef WORDS_BIGENDIAN */
#
#@@ -290,3 +290,3 @@
#
#-#define SHAREDIR "/usr/local/share/mysql"
#+#define SHAREDIR "share"
# #define THREAD 1
#@@ -294,2 +294,2 @@
#
#-#define DEFAULT_CHARSET_HOME "/usr/local"
#+#define DEFAULT_CHARSET_HOME "C:/mysql/"
#
#EOF
## fix include/config-win.h
#patch -ulbf include/config-win.h << EOF
#--- include/config-win.h  2009-08-07 14:31:12 +0200
#+++ include/config-win.h  2013-01-30 16:51:22 +0100
#@@ -23,4 +23,3 @@
# */
#-#define _WIN32_WINNT     0x0500
#-
#+#define _WIN32_WINNT     0x0501
#
#@@ -34,3 +33,3 @@
# #include <winsock2.h>
#-#include <Ws2tcpip.h>
#+#include <ws2tcpip.h>
# #include <fcntl.h>
#@@ -110,6 +109,6 @@
# */
#-#define S_IRWXU S_IREAD|S_IWRITE
#+//#define S_IRWXU S_IREAD|S_IWRITE
# #define S_IRWXG 0
# #define S_IRWXO 0
#-typedef int mode_t;
#+//typedef int mode_t;
#
#@@ -192,3 +191,3 @@
# #define isnan(X) _isnan(X)
#-#define finite(X) _finite(X)
#+//#define finite(X) _finite(X)
#
#@@ -243,5 +242,5 @@
#
#-#if !defined(__cplusplus)
#-#define inline __inline
#-#endif /* __cplusplus */
#+//#if !defined(__cplusplus)
#+//#define inline __inline
#+//#endif /* __cplusplus */
#
#@@ -252,3 +251,3 @@
# #else
#-inline double ulonglong2double(ulonglong value)
#+static inline double ulonglong2double(ulonglong value)
# {
#@@ -262,3 +261,3 @@
#
#-inline ulonglong double2ulonglong(double d)
#+static inline ulonglong double2ulonglong(double d)
# {
#EOF
## fix include/my_global.h
#patch -ulbf include/my_global.h << EOF
#--- include/my_global.h  2009-08-07 14:31:12 +0200
#+++ include/my_global.h  2013-01-30 16:52:50 +0100
#@@ -20,2 +20,4 @@
#
#+#include <stdio.h>
#+
# /*
#@@ -412,3 +414,3 @@
#
#-#ifndef stdin
#+#ifndef stdin__
# #include <stdio.h>
#@@ -579,3 +581,3 @@
# #define function_volatile      volatile
#-#define my_reinterpret_cast(A) reinterpret_cast<A>
#+//#define my_reinterpret_cast(A) reinterpret_cast<A>
# #define my_const_cast(A) const_cast<A>
#@@ -822,3 +824,3 @@
# #if !defined(HAVE_STRTOK_R)
#-inline char *strtok_r(char *str, const char *delim, char **saveptr)
#+static char *strtok_r(char *str, const char *delim, char **saveptr)
# {
#EOF
## fix include/my_pthread.h for using pthreads
#patch -ulbf include/my_pthread.h << EOF
#--- include/my_pthread.h 2013-09-24 22:08:56 +0200
#+++ include/my_pthread.h 2013-11-19 00:08:28 +0100
#@@ -33,3 +33,3 @@
#
#-#if defined(_WIN32)
#+#if defined(_WIN32) && !defined(__MINGW32__)
# typedef CRITICAL_SECTION pthread_mutex_t;
#@@ -339,3 +339,3 @@
#
#-#ifndef _WIN32  /* read/write locks using pthread */
#+#if !defined(_WIN32) || defined(__MINGW32__)  /* read/write locks using pthread */
# #define rw_lock_t pthread_rwlock_t
#@@ -542,3 +542,3 @@
#   int thr_errno;
#-#if defined(_WIN32)
#+#if defined(_WIN32) && !defined(__MINGW32__)
# /*
#@@ -575,3 +575,3 @@
#
#-#if defined(_WIN32)
#+#if defined(_WIN32) && !defined(__MINGW32__)
# #define my_winerr my_thread_var->thr_winerr
#@@ -588,3 +588,3 @@
# #ifndef thread_safe_increment
#-#ifdef _WIN32
#+#if defined(_WIN32) && !defined(__MINGW32__)
# #define thread_safe_increment(V,L) InterlockedIncrement((long*) &(V))
#EOF
### fix missing strerror_s in mysys/my_error.c
##mv mysys/my_error.c mysys/my_error.c.bak
##echo "#define strerror_s(buf,buflen,errnum) strncpy(buf,strerror(errnum),buflen-1);buf[buflen-1]=0;" > mysys/my_error.c
##cat mysys/my_error.c.bak >> mysys/my_error.c
#wl-showstatus configure &&
#cmake.exe -Wno-dev -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DCOMMUNITY_BUILD:BOOL=ON -DWITH_DEBUG:BOOL=OFF -DENABLE_DEBUG_SYNC:BOOL=OFF -DENABLE_GCOV:BOOL=OFF -DENABLE_GPROF:BOOL=OFF -DENABLED_PROFILING:BOOL=OFF -DHAVE_DLFCN_H:INTERNAL=0 -DWITH_ZLIB:STRING=$MINGWPREFIX -DWITH_SSL:STRING=$MINGWPREFIX -DWITH_EXTRA_CHARSETS:STRING=all . &&
##cmake.exe -Wno-dev -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DCOMMUNITY_BUILD:BOOL=ON -DWITH_DEBUG:BOOL=OFF -DENABLE_DEBUG_SYNC:BOOL=OFF -DENABLE_GCOV:BOOL=OFF -DENABLE_GPROF:BOOL=OFF -DENABLED_PROFILING:BOOL=OFF -DHAVE_DLFCN_H:INTERNAL=0 -DWITH_ZLIB:STRING=$MINGWPREFIX -DWITH_SSL:STRING=$MINGWPREFIX -DWITH_EXTRA_CHARSETS:STRING=all -DCMAKE_STATIC_LINKER_FLAGS:STRING="-lpthread" . &&
# wl-showstatus build-install &&
# ( make -j1 all install/strip || make -j1 all install ) &&
#    echo OK
## wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && rm -rf mysql-connector-c-$VERSION
#####See also: https://github.com/paulfitz/coopy/blob/master/scripts/mysql-connector-c-6.0.2.mingw-on-linux.patch




#export NAME="mysql-connector-c"
#export STATUS=
#export URL=http://dev.mysql.com/downloads/connector/c/
#export BASENAME=mysql
#export DESCRIPTION="Connector/C (libmysql) is a client library for C development."
#export CATEGORY=database
#export TYPE=library
##export VERSION=6.1.3
##export VERSIONDATE=20140327
##export VERSION=6.1.5
##export VERSIONDATE=20150203
##export VERSION=6.1.6
##export VERSIONDATE=20150814
#export VERSION=6.1.9
#export VERSIONDATE=20170410
#wl-showstatus --package-version
#export DEPENDENCIES=pthreads,zlib,openssl
#export OPTIONALDEPENDENCIES=
#export BUILDDEPENDENCIES=
#export OPTIONALBUILDDEPENDENCIES=
#export LICENSEFILE=COPYING
#export LICENSETYPE=GPL
#export DOWNLOADURL="http://dev.mysql.com/downloads/connector/c/ mysql-connector-c"
#export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
#export DOWNLOADSOURCEURL=http://cdn.mysql.com/Downloads/Connector-C/mysql-connector-c-$VERSION-src.tar.gz
#wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
#wl-wait4deps
#tar xz --force-local -f $TARBALLDIR/$BASENAME/mysql-connector-c-$VERSION-src.tar.gz
#cd mysql-connector-c-$VERSION-src
## fix include/my_pthread.h (version >= 6.1.3)
#mv include/my_pthread.h include/my_pthread.h.bak
#cat > include/my_pthread.h << EOF
##ifdef __MINGW32__ 
##include <sys/types.h>
##define timespec my_timespec
##endif
#EOF
#cat include/my_pthread.h.bak >> include/my_pthread.h
## fix mysys/stacktrace.c (version >= 6.1.3)
#patch -ulbf mysys/stacktrace.c << EOF
#--- mysys/stacktrace.c  2013-12-23 20:24:06 +0100
#+++ mysys/stacktrace.c  2014-03-27 21:00:24 +0100
#@@ -390,4 +390,5 @@
#   CONTEXT context;
#-  STACKFRAME64 frame={0};
#+  STACKFRAME64 frame;
#   static char symbol_path[MAX_SYMBOL_PATH];
#+  memset(&frame, 0, sizeof(frame));
#
#@@ -540,11 +541,5 @@
# {
#-  __try
#-  {
#+  if (val)
#     my_write_stderr(val, len);
#-    my_safe_printf_stderr("%s", "\n");
#-  }
#-  __except(EXCEPTION_EXECUTE_HANDLER)
#-  {
#-    my_safe_printf_stderr("%s", "is an invalid string pointer\n");
#-  }
#+  my_safe_printf_stderr("%s", "\n");
# }
#EOF
## fix libmysql/authentication_win/handshake.h (version >= 6.1.3)
#patch -ulbf libmysql/authentication_win/handshake.h << EOF
#--- libmysql/authentication_win/handshake.h  2013-12-23 20:24:06 +0100
#+++ libmysql/authentication_win/handshake.h  2014-03-27 21:37:16 +0100
#@@ -102,3 +102,3 @@
#
#-  int Handshake::packet_processing_loop();
#+  int packet_processing_loop();
#
#EOF
## fix missing stpcpy in include/m_string.h (version >= 6.1.5)
#patch -ulbf include/m_string.h << EOF
#--- include/m_string.h  2014-06-11 05:10:44.000000000 +0200
#+++ include/m_string.h  2015-02-03 21:40:24.000000000 +0100
#@@ -91,3 +91,10 @@
# {
#-#if defined(HAVE_BUILTIN_STPCPY)
#+#if defined(__MINGW32__)
#+  register char *d = dst;
#+  register const char *s = src;
#+  do
#+    *d++ = *s;
#+  while (*s++);
#+  return (d - 1);
#+#elif defined(HAVE_BUILTIN_STPCPY)
#   return __builtin_stpcpy(dst, src);
#EOF
## fix include/my_global.h
#patch -ulbf include/my_global.h << EOF
#--- include/my_global.h  2015-02-25 22:09:49.000000000 +0100
#+++ include/my_global.h  2016-06-27 22:02:06.308102000 +0200
#@@ -209,6 +209,8 @@
# typedef int       socket_len_t;
# typedef int       sigset_t;
#+#ifndef __MINGW32__
# typedef int       mode_t;
# typedef SSIZE_T   ssize_t;
#+#endif
# #else
# typedef socklen_t socket_len_t;
#@@ -658,4 +660,5 @@
#  };
#
#+#ifndef __MINGW32__
# struct timespec {
#   union ft64 tv;
#@@ -663,4 +666,5 @@
#   long max_timeout_msec;
# };
#+#endif
#
# #endif /* _WIN32 */
#@@ -672,5 +676,5 @@
# static inline void set_timespec_nsec(struct timespec *abstime, ulonglong nsec)
# {
#-#ifndef _WIN32
#+#if !defined(_WIN32) || defined(__MINGW32__)
#   ulonglong now= my_getsystime() + (nsec / 100);
#   abstime->tv_sec=   now / 10000000ULL;
#@@ -698,5 +702,5 @@
# static inline int cmp_timespec(struct timespec *ts1, struct timespec *ts2)
# {
#-#ifndef _WIN32
#+#if !defined(_WIN32) || defined(__MINGW32__)
#   if (ts1->tv_sec > ts2->tv_sec ||
#       (ts1->tv_sec == ts2->tv_sec && ts1->tv_nsec > ts2->tv_nsec))
#@@ -716,5 +720,5 @@
# static inline ulonglong diff_timespec(struct timespec *ts1, struct timespec *ts2)
# {
#-#ifndef _WIN32
#+#if !defined(_WIN32) || defined(__MINGW32__)
#   return (ts1->tv_sec - ts2->tv_sec) * 1000000000ULL +
#     ts1->tv_nsec - ts2->tv_nsec;
#EOF
## fix missing stpcpy in cmake/ssl.cmake (version >= 6.1.6)
#patch -ulbf cmake/ssl.cmake << EOF
#--- cmake/ssl.cmake  2015-02-25 22:09:49.000000000 +0100
#+++ cmake/ssl.cmake  2016-02-08 11:16:29.200065900 +0100
#@@ -170,6 +170,3 @@
#     )
#-    STRING(REGEX REPLACE
#-      "^.*OPENSSL_VERSION_NUMBER[\\t ]+0x([0-9]).*\$" "\\\\1"
#-      OPENSSL_MAJOR_VERSION "\${OPENSSL_VERSION_NUMBER}"
#-    )
#+    SET(OPENSSL_MAJOR_VERSION 1)
#
#EOF
## fix detection of OpenSSL
#mv cmake/ssl.cmake cmake/ssl.cmake.bak &&
#sed -e "s/\(\^\#\)\(define\)/\1.*\2/" cmake/ssl.cmake.bak > cmake/ssl.cmake
#wl-showstatus configure &&
##cmake.exe -Wno-dev -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DDISABLE_SHARED:BOOL=ON -DCOMMUNITY_BUILD:BOOL=ON -DWITH_DEBUG:BOOL=OFF -DENABLE_DEBUG_SYNC:BOOL=OFF -DENABLE_GCOV:BOOL=OFF -DENABLE_GPROF:BOOL=OFF -DENABLED_PROFILING:BOOL=OFF -DHAVE_DLFCN_H:INTERNAL=0 -DWITH_ZLIB:STRING=$MINGWPREFIX -DWITH_SSL:STRING=$MINGWPREFIX -DWITH_EXTRA_CHARSETS:STRING=all . &&
##cmake.exe -Wno-dev -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DDISABLE_SHARED:BOOL=OFF -DCOMMUNITY_BUILD:BOOL=ON -DWITH_DEBUG:BOOL=OFF -DENABLE_DEBUG_SYNC:BOOL=OFF -DENABLE_GCOV:BOOL=OFF -DENABLE_GPROF:BOOL=OFF -DENABLED_PROFILING:BOOL=OFF -DHAVE_DLFCN_H:INTERNAL=0 -DWITH_ZLIB:STRING=$MINGWPREFIX -DWITH_SSL:STRING=$MINGWPREFIX -DWITH_EXTRA_CHARSETS:STRING=all . &&
##cmake.exe -Wno-dev -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DDISABLE_SHARED:BOOL=ON -DCOMMUNITY_BUILD:BOOL=ON -DWITH_DEBUG:BOOL=OFF -DENABLE_DEBUG_SYNC:BOOL=OFF -DENABLE_GCOV:BOOL=OFF -DENABLE_GPROF:BOOL=OFF -DENABLED_PROFILING:BOOL=OFF -DHAVE_DLFCN_H:INTERNAL=0 -DWITH_ZLIB:PATH=$MINGWPREFIX -DWITH_SSL:STRING=bundled -DWITH_EXTRA_CHARSETS:STRING=all . &&
##cmake.exe -Wno-dev -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DDISABLE_SHARED:BOOL=OFF -DCOMMUNITY_BUILD:BOOL=ON -DWITH_DEBUG:BOOL=OFF -DENABLE_DEBUG_SYNC:BOOL=OFF -DENABLE_GCOV:BOOL=OFF -DENABLE_GPROF:BOOL=OFF -DENABLED_PROFILING:BOOL=OFF -DHAVE_DLFCN_H:INTERNAL=0 -DWITH_ZLIB:PATH=$MINGWPREFIX -DWITH_SSL:STRING=bundled -DWITH_EXTRA_CHARSETS:STRING=all . &&
##cmake.exe -Wno-dev -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DINSTALL_LAYOUT:STRING=STANDALONE -DDISABLE_SHARED:BOOL=OFF -DCOMMUNITY_BUILD:BOOL=ON -DWITH_DEBUG:BOOL=OFF -DENABLE_DEBUG_SYNC:BOOL=OFF -DENABLE_GCOV:BOOL=OFF -DENABLE_GPROF:BOOL=OFF -DENABLED_PROFILING:BOOL=OFF -DHAVE_DLFCN_H:INTERNAL=0 -DWITH_ZLIB:PATH=$MINGWPREFIX -DWITH_SSL:STRING=bundled -DWITH_EXTRA_CHARSETS:STRING=all . &&
##cmake.exe -Wno-dev -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DINSTALL_LAYOUT:STRING=STANDALONE -DDISABLE_SHARED:BOOL=OFF -DCOMMUNITY_BUILD:BOOL=ON -DWITH_DEBUG:BOOL=OFF -DENABLE_DEBUG_SYNC:BOOL=OFF -DENABLE_GCOV:BOOL=OFF -DENABLE_GPROF:BOOL=OFF -DENABLED_PROFILING:BOOL=OFF -DHAVE_DLFCN_H:INTERNAL=0 -DWITH_ZLIB:PATH=$MINGWPREFIX -DWITH_SSL:STRING=system -DOPENSSL_INCLUDE_DIR:PATH=$MINGWPREFIX/include -DOPENSSL_LIBRARY:FILEPATH=$MINGWPREFIX/lib/libssleay32.a -DCRYPTO_LIBRARY:STRING=$MINGWPREFIX/lib/libeay32.a -DWITH_EXTRA_CHARSETS:STRING=all . &&
#cmake.exe -Wno-dev -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DINSTALL_LAYOUT:STRING=STANDALONE -DDISABLE_SHARED:BOOL=OFF -DCOMMUNITY_BUILD:BOOL=ON -DWITH_DEBUG:BOOL=OFF -DENABLE_DEBUG_SYNC:BOOL=OFF -DENABLE_GCOV:BOOL=OFF -DENABLE_GPROF:BOOL=OFF -DENABLED_PROFILING:BOOL=OFF -DHAVE_DLFCN_H:INTERNAL=0 -DWITH_ZLIB:PATH=$MINGWPREFIX -DWITH_SSL:PATH=$MINGWPREFIX -DOPENSSL_INCLUDE_DIR:PATH=$MINGWPREFIX/include -DWITH_EXTRA_CHARSETS:STRING=all . &&
# wl-showstatus build-install &&
# ( make install/strip || make install ) &&
# mkdir -p $INSTALLPREFIX/bin &&
# mv -f $INSTALLPREFIX/lib/*.dll $INSTALLPREFIX/bin/ &&
# cp -f $INSTALLPREFIX/lib/libmysqlclient.a $INSTALLPREFIX/lib/libmysql.a &&
# mv -f $INSTALLPREFIX/lib/liblibmysql.dll.a $INSTALLPREFIX/lib/libmysql.dll.a &&
# cp -f $INSTALLPREFIX/lib/libmysql.dll.a $INSTALLPREFIX/lib/libmysqlclient.dll.a &&
#    echo OK
## wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && rm -rf mysql-connector-c-$VERSION



