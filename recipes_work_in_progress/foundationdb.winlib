export NAME="FoundationDB"
export STATUS=
export URL=https://www.foundationdb.org/
#export URL=https://github.com/apple/foundationdb
export BASENAME=foundationdb
export DESCRIPTION="FoundationDB is a distributed database designed to handle large volumes of structured data across clusters of commodity servers. It organizes data as an ordered key-value store and employs ACID transactions for all operations. It is especially well-suited for read/write workloads but also has excellent performance for write-intensive workloads. Users interact with the database using API language binding."
export CATEGORY=database
export TYPE=library
#export VERSION=6.1.11
#export VERSIONDATE=20190706
#export VERSION=6.1.12
#export VERSIONDATE=20190724
#export VERSION=6.1.13
#export VERSIONDATE=20200504
#export VERSION=6.2.0
#export VERSIONDATE=20190808
#export VERSION=6.2.1
#export VERSIONDATE=20190810
#export VERSION=6.2.2
#export VERSIONDATE=20190814
#export VERSION=6.2.3
#export VERSIONDATE=20190831
#export VERSION=6.2.4
#export VERSIONDATE=20190913
#export VERSION=6.2.5
#export VERSIONDATE=20191001
#export VERSION=6.2.6
#export VERSIONDATE=20191019
#export VERSION=6.2.7
#export VERSIONDATE=20191025
#export VERSION=6.2.8
#export VERSIONDATE=20191107
#export VERSION=6.2.9
#export VERSIONDATE=20191114
#export VERSION=6.2.10
#export VERSIONDATE=20191115
#export VERSION=6.2.11
#export VERSIONDATE=20191123
#export VERSION=6.2.12
#export VERSIONDATE=20200114
#export VERSION=6.2.13
#export VERSIONDATE=20200116
#export VERSION=6.2.14
#export VERSIONDATE=20200121
#export VERSION=6.2.15
#export VERSIONDATE=20200122
#export VERSION=6.2.16
#export VERSIONDATE=20200226
#export VERSION=6.2.17
#export VERSIONDATE=20200227
#export VERSION=6.2.18
#export VERSIONDATE=20200307
#export VERSION=6.2.19
#export VERSIONDATE=20200318
#export VERSION=6.2.20
#export VERSIONDATE=20200424
#export VERSION=6.2.21
#export VERSIONDATE=20200530
#export VERSION=6.2.22
#export VERSIONDATE=20200605
#export VERSION=6.2.23
#export VERSIONDATE=20200714
#export VERSION=6.2.24
#export VERSIONDATE=20200726
#export VERSION=6.2.25
#export VERSIONDATE=20200831
#export VERSION=6.2.26
#export VERSIONDATE=20201007
#export VERSION=6.2.27
#export VERSIONDATE=20201014
#export VERSION=6.2.28
#export VERSIONDATE=20201115
#export VERSION=6.2.29
#export VERSIONDATE=20201223
#export VERSION=6.2.30
#export VERSIONDATE=20210209
#export VERSION=6.2.31
#export VERSIONDATE=20210220
#export VERSION=6.2.32
#export VERSIONDATE=20210225
#export VERSION=6.2.33
#export VERSIONDATE=20210515
#export VERSION=6.3.0
#export VERSIONDATE=20200524
#export VERSION=6.3.1
#export VERSIONDATE=20200606
#export VERSION=6.3.2
#export VERSIONDATE=20200615
#export VERSION=6.3.3
#export VERSIONDATE=20200715
#export VERSION=6.3.4
#export VERSIONDATE=20200728
#export VERSION=6.3.5
#export VERSIONDATE=20200901
#export VERSION=6.3.6
#export VERSIONDATE=20200923
#export VERSION=6.3.7
#export VERSIONDATE=20200925
#export VERSION=6.3.8
#export VERSIONDATE=20201001
#export VERSION=6.3.9
#export VERSIONDATE=20201008
#export VERSION=6.3.10
#export VERSIONDATE=20210107
#export VERSION=6.3.11
#export VERSIONDATE=20210305
#export VERSION=6.3.12
#export VERSIONDATE=20210414
#export VERSION=6.3.13
#export VERSIONDATE=20210525
#export VERSION=6.3.14
#export VERSIONDATE=20210605
#export VERSION=6.3.15
#export VERSIONDATE=20210618
#export VERSION=6.3.16
#export VERSIONDATE=20210625
#export VERSION=6.3.17
#export VERSIONDATE=20210723
#export VERSION=6.3.18
#export VERSIONDATE=20210731
#export VERSION=6.3.19
#export VERSIONDATE=20210831
#export VERSION=6.3.20
#export VERSIONDATE=20210929
#export VERSION=6.3.21
#export VERSIONDATE=20211006
#export VERSION=6.3.22
#export VERSIONDATE=20211209
#export VERSION=6.3.23
#export VERSIONDATE=20220107
#export VERSION=6.3.24
#export VERSIONDATE=20220303
#export VERSION=6.3.25
#export VERSIONDATE=20221103
#export VERSION=7.0.0
#export VERSIONDATE=20211208
#export VERSION=7.1.0
#export VERSIONDATE=20220409
#export VERSION=7.1.1
#export VERSIONDATE=20220412
#export VERSION=7.1.2
#export VERSIONDATE=20220419
#export VERSION=7.1.3
#export VERSIONDATE=20220429
####Could NOT find JNI (missing: JAVA_AWT_LIBRARY JAVA_JVM_LIBRARY JAVA_INCLUDE_PATH JAVA_INCLUDE_PATH2 JAVA_AWT_INCLUDE_PATH) (Required is at least version "1.8")
#export VERSION=7.1.4
#export VERSIONDATE=20220507
#export VERSION=7.1.5
#export VERSIONDATE=20220514
#export VERSION=7.1.7
#export VERSIONDATE=20220521
#export VERSION=7.1.9
#export VERSIONDATE=20220611
#export VERSION=7.1.11
#export VERSIONDATE=20220616
#export VERSION=7.1.13
#export VERSIONDATE=20220708
#export VERSION=7.1.15
#export VERSIONDATE=20220712
#export VERSION=7.1.17
#export VERSIONDATE=20220727
#export VERSION=7.1.19
#export VERSIONDATE=20220810
#export VERSION=7.1.21
#export VERSIONDATE=20220831
#export VERSION=7.1.23
#export VERSIONDATE=20220919
#export VERSION=7.1.25
#export VERSIONDATE=20221108
#export VERSION=7.1.27
#export VERSIONDATE=20230128
#export VERSION=7.1.29
#export VERSIONDATE=20230315
#export VERSION=7.1.31
#export VERSIONDATE=20230407
#export VERSION=7.1.33
#export VERSIONDATE=20230509
#export VERSION=7.1.35
#export VERSIONDATE=20230731
#export VERSION=7.1.37
#export VERSIONDATE=20230811
#export VERSION=7.2.0
#export VERSIONDATE=20221119
#export VERSION=7.2.3
#export VERSIONDATE=20230119
#export VERSION=7.2.5
#export VERSIONDATE=20230318
#export VERSION=7.2.7
#export VERSIONDATE=20230504
#export VERSION=7.2.9
#export VERSIONDATE=20230525
#export VERSION=7.3.1
#export VERSIONDATE=20230524
#export VERSION=7.3.3
#export VERSIONDATE=20230601
#export VERSION=7.3.5
#export VERSIONDATE=20230617
#export VERSION=7.3.7
#export VERSIONDATE=20230711
#export VERSION=7.3.9
#export VERSIONDATE=20230726
#export VERSION=7.3.11
#export VERSIONDATE=20230731
#export VERSION=7.3.13
#export VERSIONDATE=20230802
#export VERSION=7.3.15
#export VERSIONDATE=20230815
export VERSION=7.3.17
export VERSIONDATE=20230831
wl-showstatus --package-version
export DEPENDENCIES=
export OPTIONALDEPENDENCIES=
#export BUILDDEPENDENCIES=cmake,mono,wix
#export OPTIONALBUILDDEPENDENCIES=
export BUILDDEPENDENCIES=cmake,mono
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=LICENSE
export LICENSETYPE=Apache
export DOWNLOADURL="https://github.com/apple/foundationdb/releases"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
export DOWNLOADSOURCEURL=https://github.com/apple/foundationdb/archive/$VERSION.tar.gz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
wl-showstatus extract
tar xz --force-local -f $TARBALLDIR/$BASENAME/$VERSION.tar.gz
cd $BASENAME-$VERSION
# fix detection of mono as C# compiler cmake/EnableCsharp.cmake (version >= 6.2.16)
patch -ulbf cmake/EnableCsharp.cmake << EOF
@@ -1,2 +1,2 @@
-if(WIN32)
+if(MSVC)
   # C# is currently only supported on Windows.
EOF
# skip building MSI install package
patch -ulbf CMakeLists.txt << EOF
@@ -196,3 +196,3 @@

-if(WIN32)
+if(MSVC)
   add_subdirectory(packaging/msi)
EOF
#echo "set_target_properties(STATIC_LIBRARY PROPERTIES LINKER_LANGUAGE CXX)" >> flow/CMakeLists.txt
mkdir -p build_static build_shared &&
 wl-showstatus configure &&
 #PATH=$PYDIR:$PATH cmake.exe -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=OFF -DPORTABLE_BINARY:BOOL=ON -S. -Bbuild_static &&
 #PATH=$PYDIR:$PATH cmake.exe -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=OFF -DPORTABLE_BINARY:BOOL=ON -DLibreSSL_ROOT:PATH=$MINGWPREFIX/libressl -S. -Bbuild_static &&
 #PATH=$PYDIR:$MINGWPREFIX/lib/mono/4.5:$PATH cmake.exe -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=OFF -DPORTABLE_BINARY:BOOL=ON -DLibreSSL_ROOT:PATH=$MINGWPREFIX/libressl -S. -Bbuild_static &&
 #PATH=$PYDIR:$MINGWPREFIX/lib/mono/4.5:$PATH cmake.exe -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=OFF -DPORTABLE_BINARY:BOOL=ON -DLibreSSL_ROOT:PATH=$MINGWPREFIX/libressl -DMONO_EXECUTABLE:FILEPATH=$MINGWPREFIX/lib/mono/4.5/mcs.exe -S. -Bbuild_static &&
 PATH=$PYDIR:$PATH PYTHONPATH=$MINGWPREFIX/python/Lib/site-packages${PYTHONPATH:+:$PYTHONPATH} cmake.exe -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=OFF -DPORTABLE_BINARY:BOOL=ON -DLibreSSL_ROOT:PATH=$MINGWPREFIX/libressl -DBUILD_JAVA_BINDING:BOOL=OFF -DBUILD_PYTHON_BINDING:BOOL=OFF -DVENV_Python3_EXECUTABLE:FILEPATH=$PYDIR/python.exe -DMONO_EXECUTABLE:FILEPATH=$MINGWPREFIX/lib/mono/4.5/mcs.exe -DBUILD_DOCUMENTATION:BOOL=OFF -DSphinx_EXECUTABLE:FILEPATH="$PYDIR/python.exe $MINGWPREFIX/python/Scripts/sphinx-build-script.py" -DSphinx_VERSION:STRING="$(PYTHONPATH=$MINGWPREFIX/python/Lib/site-packages${PYTHONPATH:+:$PYTHONPATH} $PYDIR/python.exe $MINGWPREFIX/python/Scripts/sphinx-build-script.py --version)" -DBENCHMARK_ENABLE_INSTALL:BOOL=OFF -S. -Bbuild_shared &&
 #cmake.exe -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=OFF -DPORTABLE_BINARY:BOOL=ON -DCMAKE_CSharp_COMPILER:FILEPATH=$MINGWPREFIX/lib/mono/4.5/mcs.exe -S. -Bbuild_static &&
 #cmake.exe -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=OFF -DPORTABLE_BINARY:BOOL=ON -DMONO_EXECUTABLE:FILEPATH=$MINGWPREFIX/lib/mono/4.5/mcs.exe -S. -Bbuild_static &&
 wl-showstatus configure &&
 #PATH=$PYDIR:$PATH cmake.exe -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=ON -DPORTABLE_BINARY:BOOL=ON -S. -Bbuild_shared &&
 #PATH=$PYDIR:$PATH cmake.exe -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=ON -DPORTABLE_BINARY:BOOL=ON -DLibreSSL_ROOT:PATH=$MINGWPREFIX/libressl -S. -Bbuild_shared &&
 PATH=$PYDIR:$PATH PYTHONPATH=$MINGWPREFIX/python/Lib/site-packages${PYTHONPATH:+:$PYTHONPATH} cmake.exe -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=$INSTALLPREFIX -DCMAKE_BUILD_TYPE:STRING=Release -DBUILD_SHARED_LIBS:BOOL=ON -DPORTABLE_BINARY:BOOL=ON -DLibreSSL_ROOT:PATH=$MINGWPREFIX/libressl -DBUILD_JAVA_BINDING:BOOL=OFF -DBUILD_PYTHON_BINDING:BOOL=OFF -DVENV_Python3_EXECUTABLE:FILEPATH=$PYDIR/python.exe -DMONO_EXECUTABLE:FILEPATH=$MINGWPREFIX/lib/mono/4.5/mcs.exe -DBUILD_DOCUMENTATION:BOOL=OFF -DSphinx_EXECUTABLE:FILEPATH="$PYDIR/python.exe $MINGWPREFIX/python/Scripts/sphinx-build-script.py" -DSphinx_VERSION:STRING="$(PYTHONPATH=$MINGWPREFIX/python/Lib/site-packages${PYTHONPATH:+:$PYTHONPATH} $PYDIR/python.exe $MINGWPREFIX/python/Scripts/sphinx-build-script.py --version)" -DBENCHMARK_ENABLE_INSTALL:BOOL=OFF -S. -Bbuild_shared &&
 wl-showstatus build-install &&
 make -Cbuild_static install/strip &&
 wl-showstatus build-install &&
 make -Cbuild_shared install/strip &&
    echo OK
# wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION



