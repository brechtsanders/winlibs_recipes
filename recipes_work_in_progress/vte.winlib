export NAME="vte"
export STATUS=
export URL=http://ftp.gnome.org/pub/GNOME/sources/vte/
export BASENAME=vte
export DESCRIPTION="VTE is a library (libvte) implementing a terminal emulator widget for GTK+"
export CATEGORY=console
export TYPE=library
#export VERSION=0.16.13
#export VERSION=0.17.4
#export VERSION=0.19.4
#export VERSION=0.20.0
#export VERSION=0.20.1
#export VERSION=0.20.2
#export VERSION=0.20.3
#### configure: error: Your intltool is too old.  You need intltool 0.35.0 or later.
#export VERSION=0.20.4
#export VERSION=0.20.5
#export VERSION=0.21.4
#export VERSION=0.21.5
#export VERSION=0.21.6
#export VERSION=0.22.2
#export VERSION=0.22.4
#export VERSION=0.23.2
#export VERSION=0.23.3
#export VERSION=0.23.5
#export VERSION=0.24.0
#export VERSION=0.24.1
#export VERSION=0.24.2
#export VERSION=0.24.3
#export VERSION=0.25.1
#export VERSION=0.26.0
#export VERSION=0.26.1
#export VERSION=0.26.2
####No package 'gio-unix-2.0' found
#export VERSION=0.27.0
####reaper.h:24:22: error: sys/wait.h: No such file or directory
####pty.c:38:23: error: sys/ioctl.h: No such file or directory
####pty.c:39:24: error: sys/socket.h: No such file or directory
####pty.c: In function 'vte_pty_child_setup':
####pty.c:255: error: implicit declaration of function 'ttyname'
#export VERSION=0.27.1
#export VERSION=0.27.2
#export VERSION=0.27.3
#export VERSIONDATE=
#export VERSION=0.27.4
#export VERSIONDATE=20110115
#export VERSION=0.27.5
#export VERSIONDATE=20110202
#export VERSION=0.28.0
#export VERSIONDATE=20110404
#export VERSION=0.28.1
#export VERSIONDATE=20110615
#export VERSION=0.28.2
#export VERSIONDATE=20110829
#export VERSION=0.29.1
#export VERSIONDATE=20110831
####pty.c:38:23: error: sys/ioctl.h: No such file or directory
####pty.c:39:24: error: sys/socket.h: No such file or directory
####pty.c:255: error: implicit declaration of function 'ttyname'
#export VERSION=0.29.0
#export VERSIONDATE=20110829
#export VERSION=0.30.0
#export VERSIONDATE=20110926
#export VERSION=0.30.1
#export VERSIONDATE=20111017
#export VERSION=0.31.0
#export VERSIONDATE=20111121
####Requested 'gtk+-3.0 >= 3.1.9' but version of GTK+ is 3.0.12
#export VERSION=0.32.0
#export VERSIONDATE=20120320
#export VERSION=0.32.1
#export VERSIONDATE=20120417
#export VERSION=0.32.2
#export VERSIONDATE=20120530
#export VERSION=0.33.90
#export VERSIONDATE=20120824
#export VERSION=0.34.0
#export VERSIONDATE=20120917
#export VERSION=0.34.1
#export VERSIONDATE=20121016
#export VERSION=0.34.2
#export VERSIONDATE=20121113
#export VERSION=0.34.3
#export VERSIONDATE=20130326
#export VERSION=0.34.4
#export VERSIONDATE=20130416
#export VERSION=0.34.5
#export VERSIONDATE=20130514
#export VERSION=0.34.6
#export VERSIONDATE=20130611
#export VERSION=0.34.7
#export VERSIONDATE=20130708
#export VERSION=0.34.8
#export VERSIONDATE=20130917
#export VERSION=0.34.9
#export VERSIONDATE=20131014
#export VERSION=0.35.0
#export VERSIONDATE=20131119
#export VERSION=0.35.1
#export VERSIONDATE=20140114
#export VERSION=0.35.2
#export VERSIONDATE=20140219
#export VERSION=0.36.0
#export VERSIONDATE=20140324
#export VERSION=0.36.1
#export VERSIONDATE=20140427
#export VERSION=0.36.2
#export VERSIONDATE=20140513
#export VERSION=0.36.3
#export VERSIONDATE=20140624
#export VERSION=0.36.4
#export VERSIONDATE=20150414
#export VERSION=0.36.5
#export VERSIONDATE=20151012
#export VERSION=0.37.0
#export VERSIONDATE=20140428
#export VERSION=0.37.1
#export VERSIONDATE=20140529
#export VERSION=0.37.2
#export VERSIONDATE=20140624
#export VERSION=0.38.0
#export VERSIONDATE=20140914
#export VERSION=0.38.1
#export VERSIONDATE=20141014
#export VERSION=0.38.2
#export VERSIONDATE=20141111
#export VERSION=0.38.3
#export VERSIONDATE=20141216
#export VERSION=0.38.4
#export VERSIONDATE=20151012
#export VERSION=0.39.0
#export VERSIONDATE=20141125
#export VERSION=0.39.1
#export VERSIONDATE=20141216
#export VERSION=0.40.0
#export VERSIONDATE=20150324
#export VERSION=0.40.2
#export VERSIONDATE=20150512
#export VERSION=0.42.0
#export VERSIONDATE=20150922
#export VERSION=0.42.1
#export VERSIONDATE=20151014
####src/pty.c:1016:2: error: #error Have neither UNIX98 PTY nor BSD openpty!
#export VERSION=0.43.0
#export VERSIONDATE=20151101
#export VERSION=0.44.0
#export VERSIONDATE=20160406
#export VERSION=0.44.1
#export VERSIONDATE=20160412
#export VERSION=0.44.2
#export VERSIONDATE=20160511
#export VERSION=0.44.3
#export VERSIONDATE=20161108
#export VERSION=0.45.90
#export VERSIONDATE=20160818
#export VERSION=0.46.0
#export VERSIONDATE=20160919
#export VERSION=0.46.1
#export VERSIONDATE=20161108
#export VERSION=0.46.2
#export VERSIONDATE=20170523
#export VERSION=0.46.3
#export VERSIONDATE=20171005
#export VERSION=0.48.1
#export VERSIONDATE=20170323
#export VERSION=0.48.2
#export VERSIONDATE=20170413
#export VERSION=0.48.3
#export VERSIONDATE=20170511
#export VERSION=0.48.4
#export VERSIONDATE=20171004
#export VERSION=0.49.1
#export VERSIONDATE=20170428
#export VERSION=0.49.92
#export VERSIONDATE=20170909
#export VERSION=0.50.0
#export VERSIONDATE=20170912
#export VERSION=0.50.1
#export VERSIONDATE=20171004
#export VERSION=0.50.2
#export VERSIONDATE=20171102
#export VERSION=0.50.3
#export VERSIONDATE=20180410
#export VERSION=0.50.4
#export VERSIONDATE=20180522
#export VERSION=0.51.3
#export VERSIONDATE=20180110
#export VERSION=0.52.0
#export VERSIONDATE=20180313
#export VERSION=0.52.1
#export VERSIONDATE=20180410
#export VERSION=0.52.2
#export VERSIONDATE=20180522
#export VERSION=0.52.3
#export VERSIONDATE=20190412
#export VERSION=0.52.4
#export VERSIONDATE=20191012
#export VERSION=0.53.0
#export VERSIONDATE=20180522
#export VERSION=0.54.0
#export VERSIONDATE=20180902
#export VERSION=0.54.1
#export VERSIONDATE=20180925
#export VERSION=0.54.2
#export VERSIONDATE=20181023
#export VERSION=0.54.3
#export VERSIONDATE=20181211
#export VERSION=0.54.4
#export VERSIONDATE=20190412
#export VERSION=0.54.5
#export VERSIONDATE=20191012
#export VERSION=0.55.0
#export VERSIONDATE=20181113
#export VERSION=0.56.0
#export VERSIONDATE=20190312
#export VERSION=0.56.1
#export VERSIONDATE=20190412
#export VERSION=0.56.2
#export VERSIONDATE=20190424
#export VERSION=0.56.3
#export VERSIONDATE=20190507
#export VERSION=0.56.4
#export VERSIONDATE=20191012
####configure: error: PCRE2 requested but libpcre2-8 not found. Use --without-pcre2 to disable PCRE2
####src/pty.cc:892:2: error: #error Have neither UNIX98 PTY nor BSD openpty!
#export VERSION=0.57.0
#export VERSIONDATE=20190427
####meson.build:167:2: ERROR: Assert failed: TIOCGWINSZ not found
#export DEPENDENCIES=ncurses,glib2
#export OPTIONALDEPENDENCIES=
#export BUILDDEPENDENCIES=
#export OPTIONALBUILDDEPENDENCIES=
#export VERSION=0.57.3
#export VERSIONDATE=20190701
#export VERSION=0.58.0
#export VERSIONDATE=20190910
#export VERSION=0.58.1
#export VERSIONDATE=20191008
#export VERSION=0.58.2
#export VERSIONDATE=20191012
#export VERSION=0.58.3
#export VERSIONDATE=20191124
#export VERSION=0.59.0
#export VERSIONDATE=20191012
#export VERSION=0.60.0
#export VERSIONDATE=20200306
#export VERSION=0.60.1
#export VERSIONDATE=20200328
#export VERSION=0.60.2
#export VERSIONDATE=20200426
#export VERSION=0.60.3
#export VERSIONDATE=20200530
#export VERSION=0.60.4
#export VERSIONDATE=20210508
#export VERSION=0.61.90
#export VERSIONDATE=20200810
#export VERSION=0.62.1
#export VERSIONDATE=20201009
#export VERSION=0.62.2
#export VERSIONDATE=20210123
#export VERSION=0.62.3
#export VERSIONDATE=20210217
#export VERSION=0.64.0
#export VERSIONDATE=20210417
#export VERSION=0.64.1
#export VERSIONDATE=20210507
#export VERSION=0.64.2
#export VERSIONDATE=20210617
#export VERSION=0.66.0
#export VERSIONDATE=20211021
#export VERSION=0.66.2
#export VERSIONDATE=20211208
#export VERSION=0.68.0
#export VERSIONDATE=20220328
#export VERSION=0.69.92
#export VERSIONDATE=20220808
#export VERSION=0.69.99
#export VERSIONDATE=20220904
#export VERSION=0.70.0
#export VERSIONDATE=20220918
#export VERSION=0.70.1
#export VERSIONDATE=20221027
export VERSION=0.70.2
export VERSIONDATE=20221104
####meson.build:175:2: ERROR: Assert failed: TIOCGWINSZ not found
wl-showstatus --package-version
export DEPENDENCIES=ncurses,glib2
export OPTIONALDEPENDENCIES=
export BUILDDEPENDENCIES=meson
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=COPYING
export LICENSETYPE=GPL2
export DOWNLOADURL="http://ftp.gnome.org/pub/GNOME/sources/vte/"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
#export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/GNOME/sources/vte/`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/vte-$VERSION.tar.bz2
#export DOWNLOADSOURCEURL=http://ftp.gnome.org/pub/GNOME/sources/vte/`echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/'`/vte-$VERSION.tar.xz
export DOWNLOADSOURCEURL=https://download.gnome.org/sources/vte/$(echo $VERSION|sed 's/^\([0-9]*\.[0-9]*\)\..*$/\1/')/vte-$VERSION.tar.xz
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
#tar xfj $TARBALLDIR/$BASENAME/vte-$VERSION.tar.bz2
tar xfJ $TARBALLDIR/$BASENAME/vte-$VERSION.tar.xz
cd vte-$VERSION
# fix missing files
mkdir -p sys
touch sys/ioctl.h
echo "#include <winsock2.h>" > sys/socket.h
# fix problem detecting GNU gettext tools on 64-bit
if ( echo $RUNPLATFORM | grep -q x86_64 ); then
 mv configure configure.bak
 sed -e "s/as_fn_error\(.*GNU gettext tools not found; required for intltool\)/as_echo\1/" configure.bak > configure
fi
# remove gio-unix dependancy
mv configure configure.bak2
sed -e "s/gio-unix/gio-windows/g" configure.bak2 > configure
wl-showstatus configure &&
#INTLTOOL_PERL="$PERLDIR/bin/perl.exe" ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --disable-python --disable-gnome-pty-helper --disable-glade
#ln -s $MINGWPREFIX/lib/pkgconfig/libpng12.pc $MINGWPREFIX/lib/pkgconfig/libpng13.pc
##INTLTOOL_PERL="$PERLDIR/bin/perl.exe -I$PERLDIR/lib" PATH=$PYDIR:$PATH ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM CFLAGS="-I$MINGWPREFIX/include/gtk-2.0 -I$MINGWPREFIX/lib/gtk-2.0/include -I$MINGWPREFIX/include/cairo -I$MINGWPREFIX/include/pango-1.0 -I$MINGWPREFIX/include/atk-1.0 -I$PYDIR/include -I/home/PBUBXS1/inst_libgw32c-0.4/include/glibc" LDFLAGS="-L/home/PBUBXS1/inst_libgw32c-0.4/lib -lgw32c"
#INTLTOOL_PERL="$PERLDIR/bin/perl.exe -I$PERLDIR/lib" PATH=$PYDIR:$PATH ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM CFLAGS="-I$MINGWPREFIX/include/gtk-2.0 -I$MINGWPREFIX/lib/gtk-2.0/include -I$MINGWPREFIX/include/cairo -I$MINGWPREFIX/include/pango-1.0 -I$MINGWPREFIX/include/atk-1.0 -I$PYDIR/include -I/home/PBUBXS1/inst_libgw32c-0.4/include/glibc"
#INTLTOOL_PERL="$PERLDIR/bin/perl.exe -I$PERLDIR/lib" PATH=$PYDIR:$PATH ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM CFLAGS="-I$MINGWPREFIX/include/ncurses" &&
#INTLTOOL_PERL="$PERLDIR/bin/perl.exe -I$PERLDIR/lib" PATH=$PYDIR:$PATH ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM &&
INTLTOOL_PERL="$PERLDIR/bin/perl.exe -I$PERLDIR/lib" PATH=$PYDIR:$PATH ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --disable-introspection --disable-vala &&
#INTLTOOL_PERL="$PERLDIR/bin/perl.exe -I$PERLDIR/lib" PATH=$PYDIR:$PATH ./configure --prefix=$INSTALLPREFIX --build=$BUILDPLATFORM --host=$RUNPLATFORM --disable-introspection --disable-vala --without-pcre2 &&
 wl-showstatus build-install &&
 echo "#undef VTE_USE_GNOME_PTY_HELPER" >> config.h &&
 echo "#define LINE_MAX 1024" >> config.h &&
 make install-strip &&
    echo OK
# remove signal processing stuff from src/pty.c and src/reaper.c
####pty.c:21:23: sys/ioctl.h: No such file or directory
####pty.c:22:24: sys/socket.h: No such file or directory
####pty.c: In function `_vte_pty_reset_signal_handlers':
####pty.c:72: error: `SIGHUP' undeclared (first use in this function)
#rm $MINGWPREFIX/lib/pkgconfig/libpng13.pc
#wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION
cd ..



#mkdir -p build_both &&
# wl-showstatus configure &&
# PKG_CONFIG= PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib $PYDIR/python.exe $(which meson.py) --prefix $INSTALLPREFIX --backend ninja --buildtype release --strip --default-library both -D docs=false -D gir=false -D vapi=false . build_both &&
# wl-showstatus build-install &&
# PATH=$PATH:$PYDIR PYTHONPATH=${PYTHONPATH:+$PYTHONPATH:}$MINGWPREFIX/lib ninja -Cbuild_both install/strip &&
#    echo OK && find . -name '*.a'




