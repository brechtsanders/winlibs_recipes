export NAME="zen::Xml"
export STATUS=
#export URL=https://sourceforge.net/projects/zenxml/
export URL=https://zenxml.sourceforge.net/
#export URL=https://github.com/sfinktah/ZenXml
export BASENAME=zenxml
export DESCRIPTION="zen::Xml is an XML library serializing structured user data in a convenient way. Using compile-time information gathered by techniques of template metaprogramming it minimizes the manual overhead required and frees the user from implementing fundamental type conversions by himself."
export CATEGORY=fileformat,dataprocessing
export TYPE=library
export VERSION=2.5
export VERSIONDATE=20250804
####zen/guid.h:24:2: error: #error Where is Glibc?
####zen/guid.h:27:19: error: missing binary operator before token "("
####zen/file_access.cpp:18:14: fatal error: sys/vfs.h: No such file or directory
wl-showstatus --package-version
export DEPENDENCIES=
export OPTIONALDEPENDENCIES=
export BUILDDEPENDENCIES=
export OPTIONALBUILDDEPENDENCIES=
export LICENSEFILE=License.txt
export LICENSETYPE=GPL
export DOWNLOADURL="https://sourceforge.net/projects/zenxml/files/ zenXml_"
#export DOWNLOADURL="https://github.com/sfinktah/ZenXml/tags"
export INSTALLPREFIX=`pwd`/inst_$BASENAME-$VERSION
export DOWNLOADSOURCEURL=https://downloads.sourceforge.net/project/zenxml/zenXml_$VERSION.zip
wl-showstatus download
wl-download -v -d $TARBALLDIR/$BASENAME $DOWNLOADSOURCEURL
wl-wait4deps
wl-showstatus extract
mkdir -p $BASENAME-$VERSION
unzip -oq $TARBALLDIR/$BASENAME/zenXml_$VERSION.zip -d$BASENAME-$VERSION
cd $BASENAME-$VERSION
# fix zen/guid.h (version >= 2.5)
patch -ulbf zen/guid.h << EOF
@@ -22,2 +22,5 @@

+#if defined(__MINGW32__) && !defined(__GLIBC_PREREQ)
+#define __GLIBC_PREREQ(...) 1
+#endif
 #ifndef __GLIBC_PREREQ
EOF
wl-showstatus build &&
 touch SUCCESS &&
 for F in zen/*.cpp; do
  echo CXX $F
  ${CXX:-g++} -c -o $F.o $F -I. $(${PKG_CONFIG:-pkg-config} --cflags glib-2.0) || ( rm -f SUCCESS; false ) || break
 done &&
 rm SUCCESS &&
    echo OK
# wl-makepackage -c -d && wl-install -d $BASENAME-$VERSION && cd .. && wl-showstatus cleanup && rm -rf $BASENAME-$VERSION



